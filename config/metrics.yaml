# Headers generator — http://patorjk.com/software/taag/#p=display&f=Banner3&t=buyer

########  ##     ## ##    ## ######## ########
##     ## ##     ##  ##  ##  ##       ##     ##
##     ## ##     ##   ####   ##       ##     ##
########  ##     ##    ##    ######   ########
##     ## ##     ##    ##    ##       ##   ##
##     ## ##     ##    ##    ##       ##    ##
########   #######     ##    ######## ##     ##

###############################################################################
# Buyer :: Totals
###############################################################################

item_views:
  title: item_views
  tags: [i2, bx, total]
  numerator:
    observations: [item_views]

item_views_total_vas:
  title: item_views_total_vas
  tags: [i2, bx, vas, total]
  numerator:
    observations: [item_views_total_vas]

item_views_total_vip:
  title: item_views_total_vip
  tags: [i3, bx, vas, total]
  numerator:
    observations: [item_views_total_vip]

item_views_total_premium:
  title: item_views_total_premium
  tags: [i3, bx, vas, total]
  numerator:
    observations: [item_views_total_premium]

item_views_total_push:
  title: item_views_total_push
  tags: [i3, bx, vas, total]
  numerator:
    observations: [item_views_total_push]

item_views_grouped:
  title: item_views_grouped
  tags: [i2, bx, total, grouped]
  numerator:
    observations: [item_views]
    groupby: [participant, item]
    
item_views_client:
  title: item_views_client
  tags: [i3, bx, total]
  numerator:
    observations: [item_views_client]

item_views_client_grouped:
  title: item_views_client 
  tags: [i3, bx, total, grouped]
  numerator:
    observations: [item_views_client]
    groupby: [participant, item]

contacts:
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
  tags: [i1, bx, total]

contacts_total_vas:
  title: contacts_total_vas
  tags: [i1, bx, vas, total]
  numerator:
    observations: [phone_views_total_vas, booking_created_short_rent_vas, first_messages_vas, delivery_order_created_vas, realty_development_phone_views_vas]

contacts_grouped:
  title:   contacts_groupped
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
    groupby: [participant, item]
  tags: [i1, bx, total, grouped]

advertisement_page_views:
  title: advertisement_page_views
  tags: [critical, rise, ad, total]
  numerator:
    observations: [advertisement_page_views]

phone_views_snippet:
  title: phone_views_snippet
  tags: [i3, bx, total]
  numerator:
    observations: [phone_views_snippet, phone_views_snippet_xlvas]

phone_views:
  title: phone_views
  tags: [i2, bx, total]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top]

phone_views_grouped:
  title: phone_views_grouped
  tags: [i3, bx, total,grouped]
  numerator:
    observations: [phone_views_total]
    groupby: [participant, item]

phone_views_total:
  title: phone_views_total
  tags: [i3, bx, total]
  numerator:
    observations: [phone_views_total]

phone_views_total_vas:
  title: phone_views_total_vas
  tags: [i3, bx, vas, total]
  numerator:
    observations: [phone_views_total_vas]

phone_views_total_vip:
  title: phone_views_total_vip
  tags: [i4, bx, vas, total]
  numerator:
    observations: [phone_views_total_vip]

phone_views_total_premium:
  title: phone_views_total_premium
  tags: [i4, bx, vas, total]
  numerator:
    observations: [phone_views_total_premium]

phone_views_total_push:
  title: phone_views_total_push
  tags: [i4, bx, vas, total]
  numerator:
    observations: [phone_views_total_push]

favorites_added:
  title: favorites_added
  tags: [i2, bx, fav, total]
  numerator:
    observations: [favorites_added]

item_views_fav_list:
  title: item_views_fav_list
  tags: [i2, bx, fav, tns, total]
  numerator:
    observations: [item_views_fav_list]

contacts_fav_list:
  title: contacts_fav_list
  tags: [i2, bx, fav, tns, total]
  numerator:
    observations: [contacts_fav_list]

fav_list_item_view:
  title: fav_list_item_view
  tags: [i2, bx, fav, tns, total]
  numerator:
    observations: [fav_list_item_view]

fav_list_contact:
  title: fav_list_contact
  tags: [i2, bx, fav, tns, total]
  numerator:
    observations: [fav_list_contact]

first_messages:
  title: first_messages
  tags: [i2, bx, mes, total]
  numerator:
    observations: [first_messages]

first_messages_vas:
  title: first_messages_vas
  tags: [i3, bx, mes, vas, total]
  numerator:
    observations: [first_messages_vas]

all_main_pages:
  title: all_main_pages
  tags: [i2, bx, rec, main, total]
  numerator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]

head_main_pages:
  title: head_main_pages
  tags: [i2, bx, rec, main, total]
  numerator:
    observations: [head_main_pages]

vertical_main_pages:
  title: vertical_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [transport_main_pages, re_main_pages, services_main_pages]

transport_main_pages:
  title: transport_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [transport_main_pages]

re_main_pages:
  title: re_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [re_main_pages]

services_main_pages:
  title: services_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [services_main_pages]

bt_clicks:
  title: bt_clicks
  tags: [i1, bx, total]
  numerator:
    observations: [phone_views_total, first_messages, delivery_order_created, booking_created_short_rent, favorites_added, write_button_clicks, realty_development_phone_views]
    
favorites_net:
  title: favorites_net
  description: "Чистое число добавленных в избранное. Прежде всего полезно для чистки мискликов. Если пользователь добавил айтем в избранное, затем его удалил, значение будет 0. Если потом снова добавил, то 1"
  tags: [i2, bx, fav, total]
  numerator:
    observations: [favorites_net]
    groupby: [item, participant]
    
favorites_added_grouped:
  title: favorites_added_grouped
  tags: [i2, bx, fav, total, group]
  numerator:
    observations: [favorites_added]  
    groupby: [item, participant]

bt_clicks_grouped:
  title: bt_clicks_grouped
  tags: [i1, bx, total, group]
  numerator:
    observations: [phone_views_total, first_messages, delivery_order_created, booking_created_short_rent, favorites_added, write_button_clicks, realty_development_phone_views]
    groupby: [participant, item]

ad_clicks:
  tags: [critical, bx]
  numerator:
    observations: [ad_clicks]

ad_successes:
  tags: [i1, bx]
  numerator:
    observations: [ad_successes]

ad_fails:
  tags: [i1, bx]
  numerator:
    observations: [ad_fails]

ad_revenue_predict:
  tags: [critical, bx]
  numerator:
    observations: [ad_revenue_predict]

call_phones:
  title: calls_backend
  description: "Показ экрана набора номера. Актуально для Андроида. 299 событие"
  tags: [i1, bx]
  numerator:
    observations: [call_phone_screen_views]
 
calls:
  description: "Аппроксимация звонков. Для Андроида - показ экрана набора номера (системный) 3381, для iOS - прокси звонки 2545, 2546"
  tags: [i1, bx]
  numerator:
    observations: [call_phone_screen_views_client, missed_proxy_calls, answered_proxy_calls]
    
calls_serp:
  description: "Аппроксимация звонков с СЕРПа. Для Андроида - показ экрана набора номера (системный) 3381, для iOS - прокси звонки 2545, 2546"
  tags: [i2, bx]
  numerator:
    observations: [missed_proxy_calls_serp, answered_proxy_calls_serp]
    
calls_rec:
  description: "Аппроксимация звонков с рекомендаций. Для Андроида - показ экрана набора номера (системный) 3381, для iOS - прокси звонки 2545, 2546"
  tags: [i2, bx]
  numerator:
    observations: [missed_proxy_calls_rec, answered_proxy_calls_rec]
    
calls_fav:
  description: "Аппроксимация звонков из избранного. Для Андроида - показ экрана набора номера (системный) 3381, для iOS - прокси звонки 2545, 2546"
  tags: [i2, bx]
  numerator:
    observations: [missed_proxy_calls_fav, answered_proxy_calls_fav]
    
calls_map:
  description: "Аппроксимация звонков с карты. Для Андроида - показ экрана набора номера (системный) 3381, для iOS - прокси звонки 2545, 2546"
  tags: [i2, bx]
  numerator:
    observations: [missed_proxy_calls_map, answered_proxy_calls_map]
    
calls_dialogues:
  description: "Показ экрана диалога звонить/не звонить. Актуально для Андроида."
  tags: [i2, bx]
  numerator:
    observations: [call_phone_dialogues]
 
   
realty_dev_views:
  title: realty_dev_views
  tags: [i4, bx]
  numerator:
    observations: [realty_development_views]
    
realty_dev_phone_views:
  title: realty_dev_phone_views
  tags: [i4, bx]
  numerator:
    observations: [realty_development_phone_views]
    
shortcut_clicks:
  title: shortcut_clicks
  tags: [i4, bx]
  numerator:
    observations: [shortcut_clicks]

phone_view_button_clicks:
  title: phone_view_button_clicks
  tags: [i3, bx]
  numerator:
    observations: [phone_view_button_clicks]
        
fatal_app_errors:
  title: fatal_app_errors
  tags: [critical, bx]
  numerator:
    observations: [fatal_app_error]
    
non_fatal_app_errors:
  title: non_fatal_app_errors
  tags: [i2, bx]
  numerator:
    observations: [non_fatal_app_error]
    
answered_proxy_calls:
  title: answered_proxy_calls
  tags: [i2, bx]
  numerator:
    observations: [answered_proxy_calls]
    
answered_proxy_calls_serp:
  title: answered_proxy_calls_serp
  tags: [i4, bx]
  numerator:
    observations: [answered_proxy_calls_serp]
    
answered_proxy_calls_rec:
  title: answered_proxy_calls_rec
  tags: [i4, bx]
  numerator:
    observations: [answered_proxy_calls_rec]
    
answered_proxy_calls_fav:
  title: answered_proxy_calls_fav
  tags: [i4, bx]
  numerator:
    observations: [answered_proxy_calls_fav]
    
answered_proxy_calls_map:
  title: answered_proxy_calls_map
  tags: [i4, bx]
  numerator:
    observations: [answered_proxy_calls_map]   
    
missed_proxy_calls:
  title: missed_proxy_calls
  tags: [i2, bx]
  numerator:
    observations: [missed_proxy_calls]

missed_proxy_calls_serp:
  title: missed_proxy_calls_serp
  tags: [i4, bx]
  numerator:
    observations: [missed_proxy_calls_serp]

missed_proxy_calls_rec:
  title: missed_proxy_calls_rec
  tags: [i4, bx]
  numerator:
    observations: [missed_proxy_calls_rec]

missed_proxy_calls_fav:
  title: missed_proxy_calls_fav
  tags: [i4, bx]
  numerator:
    observations: [missed_proxy_calls_fav]   

missed_proxy_calls_map:
  title: missed_proxy_calls_map
  tags: [i4, bx]
  numerator:
    observations: [missed_proxy_calls_map]

###############################################################################
# Buyer :: Ratios
###############################################################################

phone_views_per_item_view:
  title: phone_views_per_item_view
  tags: [i3, bx, ratio]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top]
  denominator:
    observations: [item_views]

contacts_per_item_view:
  title: contacts_per_item_view
  tags: [i2, bx, ratio]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
  denominator:
    observations: [item_views]

delivery_orders_per_flow_begining:
  numerator:
    observations: [delivery_order_created]
  denominator:
    observations: [delivery_flow_beginings]
    
call_phones_per_phone_views:
  title: calls_backend_per_phone_views
  tags: [i2, bx, ratio]
  numerator:
    observations: [call_phone_screen_views]
  denominator:
    observations: [phone_views_total]
    
calls_per_dialogue:
  tags: [i2, bx, ratio]
  numerator:
    observations: [call_phone_screen_views_client,missed_proxy_calls, answered_proxy_calls]
  denominator:
    observations: [call_phone_dialogues]
    
calls_per_phone_views:
  tags: [i2, bx, ratio]
  numerator:
    observations: [call_phone_screen_views_client,missed_proxy_calls, answered_proxy_calls]
  denominator:
    observations: [phone_views_total]
    
realty_dev_phone_per_views:
  tags: [i4, bx, ratio]
  numerator:
    observations: [realty_development_phone_views]
  denominator:
    observations: [realty_development_views]    
    
realty_dev_views_per_search:
  tags: [i4, bx, ratio]
  numerator:
    observations: [realty_development_views]
  denominator:
    observations: [searches]   
    
shortcut_clicks_per_search:
  tags: [i4, bx, ratio]
  numerator:
    observations: [shortcut_clicks]
  denominator:
    observations: [searches]   
    
phone_view_button_clicks_per_item_view:
  title: pv_button_per_item_view
  tags: [i3, bx, ratio]
  numerator:
    observations: [phone_view_button_clicks]
  denominator:
    observations: [item_views]
    
phone_view_button_clicks_per_item_view_client:
  title: pv_button_per_iv_client
  tags: [i3, bx, ratio]
  numerator:
    observations: [phone_view_button_clicks]
  denominator:
    observations: [item_views_client]

fav_list_item_view_per_fav_list:
  title: fav_list_item_view_per_fav_list
  tags: [i4, bx, fav, ratio]
  numerator:
    observations: [fav_list_item_view]
  denominator:
    observations: [favorites_list_views]

fav_list_contact_per_fav_list:
  title: fav_list_contact_per_fav_list
  tags: [i4, bx, fav, ratio]
  numerator:
    observations: [fav_list_contact]
  denominator:
    observations: [favorites_list_views]
    
###############################################################################
# Buyer :: User Totals
###############################################################################

users_active_daily:
  title: users_active
  tags: [critical, bx, user]
  numerator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]

users_item_view_daily:
  title: users_item_view
  tags: [i1, bx, user]
  numerator:
    observations: [item_views]
    groupby: [participant]

user_item_views_total_vas:
  title: user_item_views_total_vas
  tags: [i1, bx, vas, user]
  numerator:
    observations: [item_views_total_vas]
    groupby: [participant]

user_item_views_total_vip:
  title: user_item_views_total_vip
  tags: [i2, bx, vas, user]
  numerator:
    observations: [item_views_total_vip]
    groupby: [participant]

user_item_views_total_premium:
  title: user_item_views_total_premium
  tags: [i2, bx, vas, user]
  numerator:
    observations: [item_views_total_premium]
    groupby: [participant]

user_item_views_total_push:
  title: user_item_views_total_push
  tags: [i2, bx, vas, user]
  numerator:
    observations: [item_views_total_push]
    groupby: [participant]

users_item_view_client_daily:
  title: users_item_view_client
  tags: [i1, bx, user]
  numerator:
    observations: [item_views_client]
    groupby: [participant]

buyers:
  title: buyers
  tags: [i0, bx, user]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
    groupby: [participant]

buyers_vas:
  title: buyers_vas
  tags: [i0, bx, vas, user]
  numerator:
    observations: [phone_views_total_vas, booking_created_short_rent_vas, first_messages_vas, delivery_order_created_vas, realty_development_phone_views_vas]
    groupby: [participant]

users_all_main_page_daily:
  title: users_main_page
  tags: [i2, bx, rec, main, user]
  numerator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_head_main_page_daily:
  title: users_head_main_page
  tags: [i2, bx, rec, main, user]
  numerator:
    observations: [head_main_pages]
    groupby: [participant]

users_transport_main_page_daily:
  title: users_transport_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [transport_main_pages]
    groupby: [participant]

users_re_main_page_daily:
  title: users_re_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [re_main_pages]
    groupby: [participant]

users_services_main_page_daily:
  title: users_services_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [services_main_pages]
    groupby: [participant]

users_vertical_main_page_daily:
  title: users_vertical_main_page
  tags: [i3, bx, rec, main, user]
  numerator:
    observations: [transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_bt_click_daily:
  title: users_bt_click
  tags: [i0, bx, user]
  numerator:
    observations: [phone_views_total, first_messages, booking_created_short_rent, delivery_order_created, favorites_added, realty_development_phone_views]
    groupby: [participant]

users_favorites:
  title: users_favorites_added
  tags: [i2, bx, user]
  numerator:
    observations: [favorites_added]
    groupby: [participant]

users_item_views_fav_list:
  title: users_item_views_fav_list
  tags: [i2, bx, fav, tns, user]
  numerator:
    observations: [item_views_fav_list]
    groupby: [participant]

users_contacts_fav_list:
  title: users_contacts_fav_list
  tags: [i2, bx, fav, tns, user]
  numerator:
    observations: [contacts_fav_list]
    groupby: [participant]

users_2plus_actions:
  title: users_2plus_actions
  tags: [i3, bx, user]
  numerator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]
    threshold: 2
    
users_phone_calls:
  title: users_calls_backend
  tags: [i1, bx, user]
  numerator:
    observations: [call_phone_screen_views]
    groupby: [participant]  
    
users_phone_calls_client:
  title: users_calls
  tags: [i1, bx, user]
  numerator:
    observations: [call_phone_screen_views_client, missed_proxy_calls, answered_proxy_calls]
    groupby: [participant] 

users_phone_calls_client_serp:
  title: users_calls_serp
  tags: [i3, bx, user]
  numerator:
    observations: [missed_proxy_calls_serp, answered_proxy_calls_serp]
    groupby: [participant] 

users_phone_calls_client_rec:
  title: users_calls_rec
  tags: [i3, bx, user]
  numerator:
    observations: [ missed_proxy_rec, answered_proxy_rec]
    groupby: [participant] 

users_phone_calls_client_fav:
  title: users_calls_fav
  tags: [i1, bx, user]
  numerator:
    observations: [missed_proxy_calls_fav, answered_proxy_calls_fav]
    groupby: [participant] 

users_phone_calls_client_map:
  title: users_calls_map
  tags: [i1, bx, user]
  numerator:
    observations: [missed_proxy_calls_map, answered_proxy_calls_map]
    groupby: [participant]     
    
ad_click_users:
  tags: [critical, bx]
  numerator:
    observations: [ad_clicks]
    groupby: [participant]
    
users_realty_dev_view:
  title: users_realty_dev_view
  tags: [i4, bx, user]
  numerator:
    observations: [realty_development_views]
    groupby: [participant] 

users_realty_dev_phone_view:
  title: users_realty_dev_phone_view
  tags: [i4, bx, user]
  numerator:
    observations: [realty_development_phone_views]
    groupby: [participant] 

shortcut_users:
  title: shortcut_users
  tags: [i4, bx, user]
  numerator:
    observations: [shortcut_clicks]
    groupby: [participant]

users_pv_button_clicks:
  title: users_pv_button_clicks
  tags: [i3, bx, user]
  numerator:
    observations: [phone_view_button_clicks]
    groupby: [participant] 
    
users_fatal_app_errors:
  title: users_fatal_app_errors
  tags: [i0, bx, user]
  numerator:
    observations: [fatal_app_error]
    groupby: [participant] 
    
users_non_fatal_app_errors:
  title: users_non_fatal_app_errors
  tags: [i2, bx, user]
  numerator:
    observations: [non_fatal_app_error]
    groupby: [participant] 

###############################################################################
# Buyer :: User Ratios
###############################################################################

buyers_per_users:
  title: buyers_per_users
  tags: [i0, bx, ratio]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]

users_item_view_per_users:
  title: users_item_view_per_users
  tags: [i1, bx, ratio]
  numerator:
    observations: [item_views]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]

users_bt_click_per_users:
  title: users_bt_click_per_users
  tags: [i1, bx, ratio]
  numerator:
    observations: [phone_views_total, first_messages, booking_created_short_rent, delivery_order_created, favorites_added, realty_development_phone_views]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]

buyers_per_users_favorites:
  title: buyers_per_users_favorites
  tags: [bx, ratio]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created, realty_development_phone_views]
    groupby: [participant]
  denominator:
    observations: [favorites_added]
    groupby: [participant]
    
shortcut_users_per_search_user:
  title: shortcut_users_per_search_user
  tags: [bx, ratio]
  numerator:
    observations: [shortcut_clicks]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]
    
user_fatal_error_per_users:
  title: user_fatal_error_per_users
  tags: [i0, bx, ratio]
  numerator:
    observations: [fatal_app_error]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_creasted
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]    

user_non_fatal_error_per_users:
  title: user_non_fatal_error_per_users
  tags: [i2, bx, ratio]
  numerator:
    observations: [non_fatal_app_error]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
      - realty_development_phone_views
    groupby: [participant]    

###############################################################################
# Buyer :: Other
###############################################################################

favorites_removed:
  title: favorites_removed
  tags: [i4, bx, fav, total]
  numerator:
    observations: [favorites_removed]

favorites_list_views:
  title: favorites_list_views
  tags: [i4, bx, fav, total]
  numerator:
    observations: [favorites_list_views]

saved_searches_added:
  title: saved_searches_added
  tags: [i4, bx, ss, total]
  numerator:
    observations: [saved_searches_added]

searches_and_item_views_to_contact:
  title: s_all_and_iv_to_contact
  tags: [i3, bx]
  numerator:
    observations: [searches_and_iv_to_contact]

ad_pages_to_contact:
  title: ad_pages_to_contact
  tags: [i3, bx]
  numerator:
    observations: [ad_pages_to_contact]

item_views_to_contact:
  title: iv_to_contact
  tags: [i3, bx]
  numerator:
    observations: [item_views_to_contact]

searches_to_contact:
  title: searches_all_to_contact
  description: All 300 events to first contact (including map searches and scrolls). Ex-'searches_to_contact' metric
  tags: [i3, bx]
  numerator:
    observations: [searches_to_contact]
    
correct_searches_to_contact:
  title: searches_serp_to_contact
  description: Searches serp to first contact.
  tags: [i3, bx]
  numerator:
    observations: [correct_searches_to_contact]
    
correct_searches_and_iv_to_contact:
  title: ss_and_iv_to_contact
  tags: [i3, bx]
  description: Searches serp and item views to first contact
  numerator:
    observations: [correct_searches_and_iv_to_contact]
    
map_searches_to_contact:
  title: maps_to_contact
  tags: [i3, bx]
  description: Map searches (based on 2743 event) to first contact
  numerator:
    observations: [map_searches_to_contact]
    
map_searches_and_iv_to_contact:
  title: maps_and_iv_to_contact
  tags: [i3, bx]
  description: Map searches (based on 2743 event) and all item views (no matter from map or not) to first contact
  numerator:
    observations: [map_searches_and_iv_to_contact]
  
correct_and_map_searches_and_iv_to_contact:
  title: maps_ss_iv_to_contact
  tags: [i3, bx]
  description: Map searches (based on 2743 event), searches serp and item views to first_contact
  numerator:
    observations: [correct_and_map_searches_and_iv_to_contact]  

ad_click_sessions:
  tags: [critical, bx]
  numerator:
    observations: [ad_clicks]
    groupby: [participant, session]

ad_click_sessions_per_show:
  tags: [critical, bx]
  numerator:
    observations: [ad_clicks]
    groupby: [participant, session]
  denominator:
    observations: [ad_head_mp, ad_vertical_mp, ad_searches, ad_item_views]
    groupby: [participant, session]

 ######  ########    ###    ########   ######  ##     ##
##    ## ##         ## ##   ##     ## ##    ## ##     ##
##       ##        ##   ##  ##     ## ##       ##     ##
 ######  ######   ##     ## ########  ##       #########
      ## ##       ######### ##   ##   ##       ##     ##
##    ## ##       ##     ## ##    ##  ##    ## ##     ##
 ######  ######## ##     ## ##     ##  ######  ##     ##

###############################################################################
# Search :: Totals
###############################################################################

misspell_replace:
  title: misspell_replace
  tags: [misspell]
  numerator:
    observations: [misspell_replace]

misspell_suggest:
  title: misspell_suggest
  tags: [misspell]
  numerator:
    observations: [misspell_suggest]

teleport_replace:
  title: teleport_replace
  tags: [misspell]
  numerator:
    observations: [teleport_replace]

teleport_suggest:
  title: teleport_suggest
  tags: [misspell]
  numerator:
    observations: [teleport_suggest]

search_redirect_replace:
  title: search_redirect_replace
  tags: [misspell]
  numerator:
    observations: [search_redirect_replace]

search_redirect_suggest:
  title: search_redirect_suggest
  tags: [misspell]
  numerator:
    observations: [search_redirect_suggest]

geo_redirect_replace:
  title: geo_redirect_replace
  tags: [misspell]
  numerator:
    observations: [geo_redirect_replace]

geo_redirect_suggest:
  title: geo_redirect_suggest
  tags: [misspell]
  numerator:
    observations: [geo_redirect_suggest]

typo_replace:
  title: typo_replace
  tags: [misspell]
  numerator:
    observations: [typo_replace]

typo_suggest:
  title: typo_suggest
  tags: [misspell]
  numerator:
    observations: [typo_suggest]

keyboard_replace:
  title: keyboard_replace
  tags: [misspell]
  numerator:
    observations: [keyboard_replace]

keyboard_suggest:
  title: keyboard_suggest
  tags: [misspell]
  numerator:
    observations: [keyboard_suggest]

wordbreaker_replace:
  title: wordbreaker_replace
  tags: [misspell]
  numerator:
    observations: [wordbreaker_replace]

wordbreaker_suggest:
  title: wordbreaker_suggest
  tags: [misspell]
  numerator:
    observations: [wordbreaker_suggest]

wordbreaker_digit_replace:
  title: wordbreaker_digit_replace
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_replace]

wordbreaker_digit_suggest:
  title: wordbreaker_digit_suggest
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_suggest]

misspell_disabled:
  title: misspell_disabled
  tags: [misspell]
  numerator:
    observations: [misspell_disabled]

misspell_suggest_disabled:
  title: misspell_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [misspell_suggest_disabled]

teleport_disabled:
  title: teleport_disabled
  tags: [misspell]
  numerator:
    observations: [teleport_disabled]

teleport_suggest_disabled:
  title: teleport_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [teleport_suggest_disabled]

search_redirect_disabled:
  title: search_redirect_disabled
  tags: [misspell]
  numerator:
    observations: [search_redirect_disabled]

search_redirect_suggest_disabled:
  title: search_redirect_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [search_redirect_suggest_disabled]

geo_redirect_disabled:
  title: geo_redirect_disabled
  tags: [misspell]
  numerator:
    observations: [geo_redirect_disabled]

geo_redirect_suggest_disabled:
  title: geo_redirect_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [geo_redirect_suggest_disabled]

typo_disabled:
  title: typo_disabled
  tags: [misspell]
  numerator:
    observations: [typo_disabled]

typo_suggest_disabled:
  title: typo_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [typo_suggest_disabled]

keyboard_disabled:
  title: keyboard_disabled
  tags: [misspell]
  numerator:
    observations: [keyboard_disabled]

keyboard_suggest_disabled:
  title: keyboard_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [keyboard_suggest_disabled]

wordbreaker_disabled:
  title: wordbreaker_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_disabled]

wordbreaker_suggest_disabled:
  title: wordbreaker_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_suggest_disabled]

wordbreaker_digit_disabled:
  title: wordbreaker_digit_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_disabled]

wordbreaker_digit_suggest_disabled:
  title: wordbreaker_digit_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_suggest_disabled]

searches_date_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_date_sort]

searches_price_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_price_sort]

searches_default_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_default_sort]

searches_with_query_date_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_with_query_date_sort]

searches_with_query:
  title: searches_with_query
  tags: [i3, bx, total]
  numerator:
    observations: [searches_with_query]

searches_without_query:
  title: searches_without_query
  tags: [i3, bx, total]
  numerator:
    observations: [searches_without_query]

searches:
  title: searches
  tags: [i2, bx, total]
  numerator:
    observations: [searches]
  description: only first page

searches_serp:
  title: searches_serp
  tags: [i2, bx, total]
  numerator:
    observations: [searches_serp]
  description: all pages included

serp_empty:
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_empty]

serp_small:
  title: serp_small
  tags: [i4, bx, serp, total]
  numerator:
    observations: [serp_small]
  
serp_with_query_empty:
  title: serp_with_query_empty
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_with_query_empty]
  
serp_with_query_small:
  title: serp_with_query_small
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_with_query_small]
  
serp_without_query_empty:
  title: serp_no_query_empty
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_without_query_empty]
  
serp_without_query_small:
  title: serp_no_query_small
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_without_query_small]

searches_item_view_delivery:
  title: iv_block_delivery
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_item_view_delivery]

searches_item_view_regions:
  title: iv_block_ext_reg
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_item_view_regions]

searches_item_view_vip:
  title: searches_item_view_vip
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_vip]

searches_item_view_premium:
  title: searches_item_view_premium
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_premium]

searches_item_view_push:
  title: searches_item_view_push
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_push]

searches_item_view_vas:
  title: searches_item_view_vas
  tags: [i3, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_vas]

searches_item_view_serp:
  title: searches_item_view_serp
  tags: [i3, bx, serp, has]
  numerator:
    observations: [searches_item_view_serp]

searches_contact_delivery:
  title: searches_contact_delivery
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_contact_delivery]

searches_contact_regions:
  title: searches_contact_regions
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_contact_regions]

searches_contact_vip:
  title: searches_contact_vip
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_vip]

searches_contact_premium:
  title: searches_contact_premium
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_premium]

searches_contact_push:
  title: searches_contact_push
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_push]

searches_contact_vas:
  title: searches_contact_vas
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_vas]

searches_contact_serp:
  title: searches_contact_serp
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_contact_serp]

item_views_regions:
  title: item_views_regions
  tags: [bx, total]
  numerator:
    observations: [item_views_regions]

item_views_delivery:
  title: item_views_delivery
  tags: [bx, total]
  numerator:
    observations: [item_views_delivery]

item_views_vip:
  title: item_views_vip
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_vip]

item_views_premium:
  title: item_views_premium
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_premium]

item_views_push:
  title: item_views_push
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_push]

item_views_vas:
  title: item_views_vas
  tags: [critical, bx, vas, total]
  numerator:
    observations: [item_views_vas]

item_views_serp:
  title: item_views_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [item_views_serp]

contacts_regions:
  title: contacts_block_ext_reg
  tags: [bx, total]
  numerator:
    observations: [contacts_regions]

contacts_delivery:
  title: contacts_block_delivery
  tags: [bx, total]
  numerator:
    observations: [contacts_delivery]

contacts_vip:
  title: contacts_vip
  tags: [bx, vas, total]
  numerator:
    observations: [contacts_vip]

contacts_premium:
  title: contacts_premium
  tags: [bx, vas, total]
  numerator:
    observations: [contacts_premium]

contacts_push:
  title: contacts_push
  tags: [i4, bx, vas, total]
  numerator:
    observations: [contacts_push]

contacts_vas:
  title: contacts_vas
  tags: [i3, bx, vas, total]
  numerator:
    observations: [contacts_vas]

contacts_serp:
  title: contacts_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [contacts_serp]

fav_added_regions:
  title: fav_added_regions
  tags: [bx, fav, total]
  numerator:
    observations: [fav_added_regions]

fav_added_delivery:
  title: fav_added_delivery
  tags: [bx, fav, total]
  numerator:
    observations: [fav_added_delivery]

fav_added_vip:
  title: fav_added_vip
  tags: [bx, vas, fav, total]
  numerator:
    observations: [fav_added_vip]

fav_added_premium:
  title: fav_added_premium
  tags: [bx, vas, fav, total]
  numerator:
    observations: [fav_added_premium]

fav_added_push:
  title: fav_added_push
  tags: [i4, bx, vas, fav, total]
  numerator:
    observations: [fav_added_push]

fav_added_vas:
  title: fav_added_vas
  tags: [i4, bx, vas, fav, total]
  numerator:
    observations: [fav_added_vas]

fav_added_serp:
  title: fav_added_serp
  tags: [i2, bx, serp, fav, total]
  numerator:
    observations: [fav_added_serp]

buyer_target_clicks_regions:
  title: bt_clicks_regions
  tags: [i4, bx, serp, total]
  numerator:
    observations: [buyer_target_clicks_regions]

buyer_target_clicks_delivery:
  title: bt_clicks_delivery
  tags: [i4, bx, serp, total]
  numerator:
    observations: [buyer_target_clicks_delivery]

buyer_target_clicks_vip:
  title: bt_clicks_vip
  tags: [i4, bx, serp, vas, total]
  numerator:
    observations: [buyer_target_clicks_vip]

buyer_target_clicks_premium:
  title: bt_clicks_premium
  tags: [bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_premium]

buyer_target_clicks_push:
  title: bt_clicks_push
  tags: [bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_push]

buyer_target_clicks_vas:
  title: bt_clicks_vas
  tags: [critical, bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_vas]

buyer_target_clicks_serp:
  title: bt_clicks_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [buyer_target_clicks_serp]

suggest_buyers:
  title: suggest_buyers_old
  description: "Buyers, who use suggest"
  tags: [ss, sgt]
  numerator:
    observations: [queries_no_redirect_contact]
    groupby: [participant]

suggest_buyers_with_all_queries:
  title: suggest_buyers
  description: "Buyers, who use suggest"
  tags: [ss, sgt]
  numerator:
    observations: [sessions_with_suggest_click_and_contact]
    groupby: [participant]

share_suggest_buyers_to_all_users:
  description: "Buyers, who use suggest"
  tags: [ss, sgt]
  numerator:
    observations: [sessions_with_query_suggest_click_contact]
    groupby: [participant]
    
filters_screen_shows:
  title: filters_screen_shows
  tags: [i4, bx, total]
  numerator:
    observations: [filters_screen_shows]
    
user_filters_screen_shows:
  title: user_filters_screen_shows
  tags: [i4, bx, user]
  numerator:
    observations: [filters_screen_shows]
    groupby: [participant]
    
filters_price_searches:
  title: filters_price_searches
  tags: [i4, bx, total]
  numerator:
    observations: [price_filter_searches]
    
filters_rubricator_searches:
  description: "Without prices, local geo, radius etc"
  title: filters_rubricator_searches
  tags: [i4, bx, total]
  numerator:
    observations: [filter_searches]
    
filters_local_geo_searches:
  description: "Metro, district, road"
  title: filters_local_geo_searches
  tags: [i4, bx, total]
  numerator:
    observations: [local_geo_filter_searches]
    
filters_radius_searches:
  description: "All radius searches with radius >0"
  title: filters_radius_searches
  tags: [i4, bx, total]
  numerator:
    observations: [radius_searches]

filters_prc_rubr_searches:
  description: "price and/or rubricator filters"
  title: filters_prc_rubr_searches
  tags: [i4, bx, total]
  numerator:
    observations: [filter_searches,price_filter_searches]
    
filters_any_searches:
  description: "All filters: rubricator, geo, radius, prices"
  title: filters_any_searches
  tags: [i4, bx, total]
  numerator:
    observations: [filter_searches,price_filter_searches,local_geo_filter_searches,radius_searches]

###############################################################################
# Search :: Ratios
###############################################################################

misspell_replace_ctr_disable:
  title: misspell_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [misspell_disabled]
  denominator:
    observations: [misspell_replace]

misspell_suggest_ctr_disable:
  title: misspell_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [misspell_suggest_disabled]
  denominator:
    observations: [misspell_suggest]

teleport_replace_ctr_disable:
  title: teleport_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [teleport_disabled]
  denominator:
    observations: [teleport_replace]

teleport_suggest_ctr_disable:
  title: teleport_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [teleport_suggest_disabled]
  denominator:
    observations: [teleport_suggest]

search_redirect_replace_ctr_disable:
  title: search_redirect_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [search_redirect_disabled]
  denominator:
    observations: [search_redirect_replace]

search_redirect_suggest_ctr_disable:
  title: search_redirect_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [search_redirect_suggest_disabled]
  denominator:
    observations: [search_redirect_suggest]

geo_redirect_replace_ctr_disable:
  title: geo_redirect_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [geo_redirect_disabled]
  denominator:
    observations: [geo_redirect_replace]

geo_redirect_suggest_ctr_disable:
  title: geo_redirect_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [geo_redirect_suggest_disabled]
  denominator:
    observations: [geo_redirect_suggest]

typo_replace_ctr_disable:
  title: typo_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [typo_disabled]
  denominator:
    observations: [typo_replace]

typo_suggest_ctr_disable:
  title: typo_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [typo_suggest_disabled]
  denominator:
    observations: [typo_suggest]

keyboard_replace_ctr_disable:
  title: keyboard_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [keyboard_disabled]
  denominator:
    observations: [keyboard_replace]

keyboard_suggest_ctr_disable:
  title: keyboard_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [keyboard_suggest_disabled]
  denominator:
    observations: [keyboard_suggest]

wordbreaker_replace_ctr_disable:
  title: wordbreaker_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_disabled]
  denominator:
    observations: [wordbreaker_replace]

wordbreaker_suggest_ctr_disable:
  title: wordbreaker_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_suggest_disabled]
  denominator:
    observations: [wordbreaker_suggest]

wordbreaker_digit_replace_ctr_disable:
  title: wordbreaker_digit_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_disabled]
  denominator:
    observations: [wordbreaker_digit_replace]

wordbreaker_digit_suggest_ctr_disable:
  title: wordbreaker_digit_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_suggest_disabled]
  denominator:
    observations: [wordbreaker_digit_suggest]

item_views_regions_per_search:
  title: item_views_regions_per_search
  tags: [bx, ratio]
  numerator:
    observations: [item_views_regions]
  denominator:
    observations: [searches_serp]

item_views_delivery_per_search:
  title: item_views_delivery_per_search
  tags: [bx, ratio]
  numerator:
    observations: [item_views_delivery]
  denominator:
    observations: [searches_serp]

item_views_vip_per_search:
  title: item_views_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_vip]
  denominator:
    observations: [searches_serp]

item_views_premium_per_search:
  title: item_views_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_premium]
  denominator:
    observations: [searches_serp]

item_views_push_per_search:
  title: item_views_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_push]
  denominator:
    observations: [searches_serp]

item_views_vas_per_search:
  title: item_views_vas_per_search
  tags: [i4, bx, serp, vas, ratio]
  numerator:
    observations: [item_views_vas]
  denominator:
    observations: [searches_serp]

item_views_serp_per_search:
  title: item_views_serp_per_search
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [item_views_serp]
  denominator:
    observations: [searches_serp]

contacts_regions_per_search:
  title: contacts_regions_per_search
  tags: [bx, ratio]
  numerator:
    observations: [contacts_regions]
  denominator:
    observations: [searches_serp]

contacts_delivery_per_search:
  title: contacts_delivery_per_search
  tags: [bx, ratio]
  numerator:
    observations: [contacts_delivery]
  denominator:
    observations: [searches_serp]

contacts_vip_per_search:
  title: contacts_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_vip]
  denominator:
    observations: [searches_serp]

contacts_premium_per_search:
  title: contacts_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_premium]
  denominator:
    observations: [searches_serp]

contacts_push_per_search:
  title: contacts_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_push]
  denominator:
    observations: [searches_serp]

contacts_vas_per_search:
  title: contacts_vas_per_search
  tags: [i4, bx, serp, vas, ratio]
  numerator:
    observations: [contacts_vas]
  denominator:
    observations: [searches_serp]

contacts_serp_per_search:
  title: contacts_serp_per_search
  tags: [i3, bx, serp, ratio]
  numerator:
    observations: [contacts_serp]
  denominator:
    observations: [searches_serp]

fav_added_regions_per_search:
  title: fav_added_regions_per_search
  tags: [bx, fav, ratio]
  numerator:
    observations: [fav_added_regions]
  denominator:
    observations: [searches_serp]

fav_added_delivery_per_search:
  title: fav_added_delivery_per_search
  tags: [bx, fav, ratio]
  numerator:
    observations: [fav_added_delivery]
  denominator:
    observations: [searches_serp]

fav_added_vip_per_search:
  title: fav_added_vip_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_vip]
  denominator:
    observations: [searches_serp]

fav_added_premium_per_search:
  title: fav_added_premium_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_premium]
  denominator:
    observations: [searches_serp]

fav_added_push_per_search:
  title: fav_added_push_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_push]
  denominator:
    observations: [searches_serp]

fav_added_vas_per_search:
  title: fav_added_vas_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_vas]
  denominator:
    observations: [searches_serp]

fav_added_serp_per_search:
  title: fav_added_serp_per_search
  tags: [i4, bx, serp, fav, ratio]
  numerator:
    observations: [fav_added_serp]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_regions_per_search:
  title: bt_clicks_regions_per_search
  tags: [bx, ratio]
  numerator:
    observations: [buyer_target_clicks_regions]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_delivery_per_search:
  title: bt_clicks_delivery_per_search
  tags: [bx, ratio]
  numerator:
    observations: [buyer_target_clicks_delivery]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_vip_per_search:
  title: bt_clicks_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_vip]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_premium_per_search:
  title: bt_clicks_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_premium]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_push_per_search:
  title: bt_clicks_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_push]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_vas_per_search:
  title: bt_clicks_vas_per_search
  tags: [i4, bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_vas]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_serp_per_search:
  title: bt_clicks_serp_per_search
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [buyer_target_clicks_serp]
  denominator:
    observations: [searches_serp]

contacts_regions_per_item_views_regions:
  title: contacts_regions_per_item_views_regions
  tags: [bx, ratio]
  numerator:
    observations: [contacts_regions]
  denominator:
    observations: [item_views_vip]

contacts_delivery_per_item_views_delivery:
  title: contacts_delivery_per_item_views_delivery
  tags: [bx, ratio]
  numerator:
    observations: [contacts_delivery]
  denominator:
    observations: [item_views_delivery]

contacts_vip_per_item_views_vip:
  title: contacts_vip_per_item_views_vip
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_vip]
  denominator:
    observations: [item_views_vip]

contacts_premium_per_item_views_premium:
  title: contacts_premium_per_item_views_premium
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_premium]
  denominator:
    observations: [item_views_premium]

contacts_push_per_item_views_push:
  title: contacts_push_per_item_views_push
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_push]
  denominator:
    observations: [item_views_push]

contacts_vas_per_item_views_vas:
  title: contacts_vas_per_item_views_vas
  tags: [i4, bx, vas, ratio]
  numerator:
    observations: [contacts_vas]
  denominator:
    observations: [item_views_vas]

contacts_serp_per_item_views_serp:
  title: contacts_serp_per_item_views_serp
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [contacts_serp]
  denominator:
    observations: [item_views_serp]

searches_item_view_serp_per_searches_serp:
  title: searches_item_view_serp_per_searches
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_serp]
  denominator:
    observations: [searches]

searches_contact_per_search:
  tags: [serp]
  numerator:
    observations: [searches_contact_serp]
  denominator:
    observations: [searches]

searches_with_suggest_share:
  description: "Share of searches with suggest"
  tags: [ss, ratio, sgt]
  numerator:
    observations: [queries_with_suggest]
  denominator:
    observations: [queries_no_redirect]

share_suggest_searches_to_all:
  description: "Share of searches with suggest"
  tags: [ss, ratio, sgt]
  numerator:
    observations: [search_suggest_clicks]
  denominator:
    observations: [session_searches_with_uniq_query]

suggest_searches_to_all_searches:
  description: "Share of searches with suggest"
  tags: [ss, ratio, sgt]
  numerator:
    observations: [search_suggest_clicks]
  denominator:
    observations: [session_searches_with_empty_or_uniq_query]

s_iv_per_s_date_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_date_sort]
  denominator:
    observations: [searches_date_sort]

s_iv_per_s_price_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_price_sort]
  denominator:
    observations: [searches_price_sort]

s_iv_per_s_default_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_default_sort]
  denominator:
    observations: [searches_default_sort]

s_iv_per_s_query:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_query_item_view]
  denominator:
    observations: [searches_with_query]

s_iv_per_s_noquery:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_noquery_item_view]
  denominator:
    observations: [searches_without_query]

s_btc_per_s_date_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_date_sort]
  denominator:
    observations: [searches_date_sort]

s_btc_per_s_price_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_price_sort]
  denominator:
    observations: [searches_price_sort]

s_btc_per_s_default_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_default_sort]
  denominator:
    observations: [searches_default_sort]

s_btc_per_s_query:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_query]
  denominator:
    observations: [searches_with_query]

s_btc_per_s_noquery:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_noquery]
  denominator:
    observations: [searches_without_query]

s_query_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_with_query]
  denominator:
    observations: [searches]

s_pages_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_serp]
  denominator:
    observations: [searches]

s_date_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_date_sort]
  denominator:
    observations: [searches]

s_price_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_price_sort]
  denominator:
    observations: [searches]

s_default_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_default_sort]
  denominator:
    observations: [searches]

serp_empty_per_s:
  title: serp_empty_per_search
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [serp_empty]
  denominator:
    observations: [searches]

serp_small_per_s:
  title: serp_small_per_search
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_small]
  denominator:
    observations: [searches]
  
serp_wq_empty_per_s_wq:
  title: serp_wq_empty_per_s_wq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_with_query_empty]
  denominator:
    observations: [searches_with_query]
  
serp_wq_small_per_s_wq:
  title: serp_wq_small_per_s_wq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_with_query_small]
  denominator:
    observations: [searches_with_query]
  
serp_noq_empty_per_s_noq:
  title: serp_noq_empty_per_s_noq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_without_query_empty]
  denominator:
    observations: [searches_without_query]
  
serp_noq_small_per_s_noq:
  title: serp_noq_small_per_s_noq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_without_query_small]
  denominator:
    observations: [searches_without_query]
    
filters_local_geo_per_searches:
  description: "Metro, district, road usage per search"
  title: filters_local_geo_per_searches
  tags: [i4, bx, ratio]
  numerator:
    observations: [local_geo_filter_searches]
  denominator:
    observations: [searches_serp]
    
filters_radius_per_searches:
  description: "All radius searches with radius >0 per search"
  title: filters_radius_per_searches
  tags: [i4, bx, ratio]
  numerator:
    observations: [radius_searches]
  denominator:
    observations: [searches_serp]

filters_pr_rubr_per_searches:
  description: "price and/or rubricator filters usage per search"
  title: filters_pr_rubr_per_searches
  tags: [i4, bx, ratio]
  numerator:
    observations: [filter_searches,price_filter_searches]
  denominator:
    observations: [searches_serp]

filters_any_per_searches:
  description: "Any filters per search"
  title: filters_any_per_searches
  tags: [i4, bx, ratio]
  numerator:
    observations: [filter_searches,price_filter_searches,local_geo_filter_searches,radius_searches]
  denominator:
    observations: [searches_serp]

 ######  ########  ######   ######  ######   ######  ##    ##
##    ## ##       ##    ## ##    ##   ##    ##    ## ###   ##
##       ##       ##       ##         ##    ##    ## ####  ##
 ######  ######    ######   ######    ##    ##    ## ## ## ##
      ## ##             ##       ##   ##    ##    ## ##  ####
##    ## ##       ##    ## ##    ##   ##    ##    ## ##   ###
 ######  ########  ######   ######  ######   ######  ##    ##

###############################################################################
# Session :: Totals
###############################################################################
sessions_active:
  numerator:
    observations:
      - searches
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [critical, bx, session]

sessions_iv:
  numerator:
    observations: [item_views]
    groupby: [participant, session]
  tags: [i3, bx, session]
  
sessions_s:
  numerator:
    observations: [searches]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_btc:
  numerator:
    observations:
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c:
  numerator:
    observations:
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [i3, bx, session]

###

sessions_iv_s:
  numerator:
    observations: [item_views_serp]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s:
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_iv_s_q:
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s_q:
  numerator:
    observations: [search_btc_query]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_iv_s_noq:
  numerator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s_noq:
  numerator:
    observations: [search_btc_noquery]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  tags: [i4, bx, session]

###

sessions_iv_r:
  numerator:
    observations: [item_views_rec]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r:
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c_r:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_iv_r_u2i:
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r_u2i:
  numerator:
    observations: [buyer_target_clicks_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_r_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_iv_r_i2i:
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r_i2i:
  numerator:
    observations: [buyer_target_clicks_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_r_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]


###############################################################################
# Session :: Ratios
###############################################################################

sessions_iv_per_active:
  numerator:
    observations: [item_views]
    groupby: [participant, session]
  denominator:
    observations:
      - searches
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_per_active:
  numerator:
    observations:
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  denominator:
    observations:
      - searches
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_per_active:
  numerator:
    observations:
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - realty_development_phone_views
    groupby: [participant, session]
  denominator:
    observations:
      - searches
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - favorites_added
      - write_button_clicks
      - realty_development_phone_views
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_iv_s_per_s:
  numerator:
    observations: [item_views_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_per_s:
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_per_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_s_q_per_s_q:
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_q_per_s_q:
  numerator:
    observations: [search_btc_query]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_q_per_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_s_noq_per_s_noq:
  numerator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_noq_per_s_noq:
  numerator:
    observations: [search_btc_noquery]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_noq_per_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_iv_r_per_r:
  numerator:
    observations: [item_views_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_per_r:
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_per_r:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_r_u2i_per_r_u2i:
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_u2i_per_r_u2i:
  numerator:
    observations: [buyer_target_clicks_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_u2i_per_r_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_r_i2i_per_r_i2i:
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_i2i_per_r_i2i:
  numerator:
    observations: [buyer_target_clicks_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_i2i_per_r_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_c_per_iv:
  numerator:
    observations: [contacts_serp, contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [item_views_serp, item_views_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_per_iv_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  denominator:
    observations: [item_views_serp]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_q_per_iv_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_noq_per_iv_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_per_iv_rec:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_u2i_per_iv_rec_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_i2i_per_iv_rec_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  tags: [bx, session]


###############################################################################
# Search :: User Totals
###############################################################################

users_search:
  title: users_search
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches]
    groupby: [participant]

users_search_query:
  title: users_search_query
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_with_query]
    groupby: [participant]

users_item_view_serp_daily:
  title: users_search_item_view
  tags: [i2, bx, serp, user]
  numerator:
    observations: [item_views_serp]
    groupby: [participant]

item_views_s_item_attr_users:
  tags: [i1, bx, serp, user]
  numerator:
    observations: [item_views_search_item_attr]
    groupby: [participant]

users_item_view_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant]

users_contact_serp_daily:
  title: users_search_contact
  tags: [i1, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]

contact_s_item_attr_users:
  tags: [i1, bx, serp, user]
  numerator:
    observations: [contacts_search_item_attr]
    groupby: [participant]

users_buyer_target_click_serp_daily:
  title: users_search_bt_click
  tags: [i1, bx, serp, user]
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant]

btc_s_item_attr_users:
  tags: [i1, bx, serp, user]
  numerator:
    observations: [btc_search_item_attr]
    groupby: [participant]

users_contact_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_contact]
    groupby: [participant]

search_suggest_clicks:
  description: "Clicks on search suggest"
  tags: [ss, sgt]
  numerator:
    observations: [search_suggest_clicks]
    groupby: [participant]
    
filters_pr_rubr_users:
  description: "price and/or rubricator filters users"
  title: filters_pr_rubr_users
  tags: [i4, bx, user]
  numerator:
    observations: [filter_searches,price_filter_searches]
    groupby: [participant]
    
filters_local_geo_users:
  description: local geo filters users"
  title: filters_local_geo_users
  tags: [i4, bx, user]
  numerator:
    observations: [local_geo_filter_searches]
    groupby: [participant]
    
filters_radius_users:
  description: "radius filters users"
  title: filters_radius_users
  tags: [i4, bx, user]
  numerator:
    observations: [radius_searches]
    groupby: [participant]
    
filters_any_users:
  description: "Any filters users"
  title: filters_any_users
  tags: [i4, bx, user]
  numerator:
    observations: [filter_searches,price_filter_searches,local_geo_filter_searches,radius_searches]
    groupby: [participant]

###############################################################################
# Search :: User Ratios
###############################################################################

users_item_view_per_search:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [item_views_serp]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_contact_per_search:
  tags: [i1, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_contact_per_item_view_search:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]
  denominator:
    observations: [item_views_serp]
    groupby: [participant]

users_item_view_per_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

users_contact_per_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_contact]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

users_s_btc_per_s:
  tags: [i1, bx, serp, ratio, user]
  numerator:
    observations: [search_btc]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_s_btc_per_s_query:
  tags: [i2, bx, serp, ratio, user]
  numerator:
    observations: [search_btc_query]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

suggest_users_share:
  description: "Share of cookies, who use suggest"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [queries_with_suggest]
    groupby: [participant]
  denominator:
    observations: [queries_no_redirect]
    groupby: [participant]

suggest_buyers_share:
  description: "Share of buyers, who use suggest, to cookies, who use suggest"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [queries_no_redirect_contact]
    groupby: [participant]
  denominator:
    observations: [queries_with_suggest]
    groupby: [participant]

share_suggest_users_to_users_with_search:
  description: "Share of cookies, who use suggest, to users with query, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [search_suggest_clicks]
    groupby: [participant]
  denominator:
    observations: [session_searches_with_uniq_query]
    groupby: [participant]

suggest_users_to_users_with_search:
  description: "Share of cookies, who use suggest, to users with query, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [search_suggest_clicks]
    groupby: [participant]
  denominator:
    observations: [session_searches_with_empty_or_uniq_query]
    groupby: [participant]

share_suggest_buyers_to_suggest_users:
  title: old_share_suggest_buyers_to_suggest_users
  description: "Share of buyers, who use suggest, to cookies, who use suggest, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [sessions_with_query_suggest_click_contact]
    groupby: [participant]
  denominator:
    observations: [search_suggest_clicks]
    groupby: [participant]

suggest_buyers_to_suggest_users:
  description: "Share of buyers, who use suggest, to cookies, who use suggest, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [sessions_with_suggest_click_and_contact]
    groupby: [participant]
  denominator:
    observations: [search_suggest_clicks]
    groupby: [participant]

misspell_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [misspell_suggest]
  denominator:
    observations: [searches]

misspell_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [misspell_replace]
  denominator:
    observations: [searches]

teleport_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [teleport_suggest]
  denominator:
    observations: [searches]

teleport_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [teleport_replace]
  denominator:
    observations: [searches]

search_redirect_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [search_redirect_suggest]
  denominator:
    observations: [searches]

search_redirect_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [search_redirect_replace]
  denominator:
    observations: [searches]

geo_redirect_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [geo_redirect_suggest]
  denominator:
    observations: [searches]

geo_redirect_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [geo_redirect_replace]
  denominator:
    observations: [searches]

typo_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [typo_suggest]
  denominator:
    observations: [searches]

typo_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [typo_replace]
  denominator:
    observations: [searches]

keyboard_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [keyboard_suggest]
  denominator:
    observations: [searches]

keyboard_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [keyboard_replace]
  denominator:
    observations: [searches]

wordbreaker_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_suggest]
  denominator:
    observations: [searches]

wordbreaker_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_replace]
  denominator:
    observations: [searches]

wordbreaker_digit_suggest_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_suggest]
  denominator:
    observations: [searches]

wordbreaker_digit_replace_to_searches:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_replace]
  denominator:
    observations: [searches]

misspell_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [misspell_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

misspell_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [misspell_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

teleport_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [teleport_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

teleport_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [teleport_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

search_redirect_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [search_redirect_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

search_redirect_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [search_redirect_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

geo_redirect_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [geo_redirect_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

geo_redirect_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [geo_redirect_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

typo_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [typo_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

typo_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [typo_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

keyboard_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [keyboard_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

keyboard_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [keyboard_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

wordbreaker_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

wordbreaker_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

wordbreaker_digit_suggest_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_suggest]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

wordbreaker_digit_replace_users_share:
  tags: [ss, ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_replace]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

########  ########  ######
##     ## ##       ##    ##
##     ## ##       ##
########  ######   ##
##   ##   ##       ##
##    ##  ##       ##    ##
##     ## ########  ######

###############################################################################
# Rec :: Totals
###############################################################################

recblock_shows:
  tags: [i4, bx, rec, total]
  numerator:
    observations: [recblock_shows]

recblock_shows_i2i:
  tags: [i4, bx, rec, total]
  numerator:
    observations: [recblock_shows_i2i]

recblock_shows_u2i:
  tags: [i4, bx, rec, total]
  numerator:
    observations: [recblock_shows_u2i]

shows_item_view_recblock:
  title: shows_item_view_recblock
  tags: [i3, bx, rec, has]
  numerator:
    observations: [shows_item_view_recblock]

shows_contact_recblock:
  title: shows_contact_recblock
  tags: [i3, bx, rec, has]
  numerator:
    observations: [shows_contact_recblock]

shows_btc_recblock:
  title: shows_btc_recblock
  tags: [i3, bx, rec, has]
  numerator:
      observations: [recshow_btc]

shows_btc_recblock_i2i:
  title: shows_btc_recblock_i2i
  tags: [i3, bx, rec, has]
  numerator:
      observations: [recshow_btc_i2i]

shows_btc_recblock_u2i:
  title: shows_btc_recblock_u2i
  tags: [i3, bx, rec, has]
  numerator:
      observations: [recshow_btc_u2i]

item_views_rec:
  title: item_views_rec
  tags: [i3, bx, rec, total]
  numerator:
    observations: [item_views_rec]

item_views_rec_i2i:
  title: item_views_rec_i2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [item_views_rec_i2i]

item_views_rec_u2i:
  title: item_views_rec_u2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [item_views_rec_u2i]

contacts_rec:
  title: contacts_rec
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec]

contacts_rec_i2i:
  title: contacts_rec_i2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec_i2i]

contacts_rec_u2i:
  title: contacts_rec_u2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec_u2i]

fav_added_rec:
  title: fav_added_rec
  tags: [i2, bx, rec, fav, total]
  numerator:
    observations: [fav_added_rec]

fav_added_rec_i2i:
  title: fav_added_rec_i2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [fav_added_rec_i2i]

fav_added_rec_u2i:
  title: fav_added_rec_u2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [fav_added_rec_u2i]

buyer_target_clicks_rec:
  title: bt_clicks_rec
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec]

buyer_target_clicks_rec_i2i:
  title: bt_clicks_rec_i2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec_i2i]

buyer_target_clicks_rec_u2i:
  title: bt_clicks_rec_u2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec_u2i]

item_views_rec_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_vas]

item_views_rec_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_vip]

item_views_rec_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_push]

item_views_rec_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_premium]

item_views_rec_i2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_i2i_vas]

item_views_rec_i2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_i2i_vip]

item_views_rec_i2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_i2i_push]

item_views_rec_i2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_i2i_premium]

item_views_rec_u2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_u2i_vas]

item_views_rec_u2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_u2i_vip]

item_views_rec_u2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_u2i_push]

item_views_rec_u2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [item_views_rec_u2i_premium]

contacts_rec_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_vas]

contacts_rec_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_vip]

contacts_rec_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_push]

contacts_rec_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_premium]

contacts_rec_i2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_i2i_vas]

contacts_rec_i2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_i2i_vip]

contacts_rec_i2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_i2i_push]

contacts_rec_i2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_i2i_premium]

contacts_rec_u2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_u2i_vas]

contacts_rec_u2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_u2i_vip]

contacts_rec_u2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_u2i_push]

contacts_rec_u2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [contacts_rec_u2i_premium]

fav_added_rec_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_vas]

fav_added_rec_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_vip]

fav_added_rec_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_push]

fav_added_rec_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_premium]

fav_added_rec_i2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_i2i_vas]

fav_added_rec_i2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_i2i_vip]

fav_added_rec_i2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_i2i_push]

fav_added_rec_i2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_i2i_premium]

fav_added_rec_u2i_vas:
  tags: [i3, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_u2i_vas]

fav_added_rec_u2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_u2i_vip]

fav_added_rec_u2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_u2i_push]

fav_added_rec_u2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [fav_added_rec_u2i_premium]

bt_clicks_rec_vas:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_vas]

bt_clicks_rec_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_vip]

bt_clicks_rec_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_push]

bt_clicks_rec_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_premium]

bt_clicks_rec_i2i_vas:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_i2i_vas]

bt_clicks_rec_i2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_i2i_vip]

bt_clicks_rec_i2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_i2i_push]

bt_clicks_rec_i2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_i2i_premium]

bt_clicks_rec_u2i_vas:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_u2i_vas]

bt_clicks_rec_u2i_vip:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_u2i_vip]

bt_clicks_rec_u2i_push:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_u2i_push]

bt_clicks_rec_u2i_premium:
  tags: [i4, bx, rec, total, vas]
  numerator:
    observations: [bt_clicks_rec_u2i_premium]

###############################################################################
# Rec :: Ratios
###############################################################################

item_views_rec_per_rec_block:
  title: item_views_rec_per_recblock
  tags: [i4, bx, rec, ratio]
  numerator:
    observations: [item_views_rec]
  denominator:
    observations: [recblock_shows]

contacts_rec_per_rec_block:
  title: contacts_rec_per_recblock
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec]
  denominator:
    observations: [recblock_shows]

fav_added_rec_per_rec_block:
  title: fav_added_rec_per_recblock
  tags: [i4, bx, rec, fav, ratio]
  numerator:
    observations: [fav_added_rec]
  denominator:
    observations: [recblock_shows]

buyer_target_clicks_rec_per_rec_block:
  title: bt_clicks_rec_per_recblock
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [buyer_target_clicks_rec]
  denominator:
    observations: [recblock_shows]

contacts_rec_per_item_views_rec:
  title: contacts_rec_per_item_views_rec
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec]
  denominator:
    observations: [item_views_rec]

shows_item_view_recblock_per_recblock_shows:
  title: shows_item_view_recblock_per_recblock_shows
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [shows_item_view_recblock]
  denominator:
    observations: [recblock_shows]

###############################################################################
# Rec :: User Totals
###############################################################################

users_item_view_rec_daily:
  title: users_item_view_rec
  tags: [i2, bx, rec, user]
  numerator:
    observations: [item_views_rec]
    groupby: [participant]

users_contact_rec_daily:
  title: users_contact_rec
  tags: [i1, bx, rec, user]
  numerator:
    observations: [contacts_rec]
    groupby: [participant]

users_buyer_target_click_rec_daily:
  title: users_bt_click_rec
  tags: [i2, bx, rec, user]
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant]

users_contact_rec_i2i:
  title: users_contact_rec_i2i
  tags: [i1, bx, rec, user]
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant]

users_contact_rec_u2i:
  title: users_contact_rec_u2i
  tags: [i1, bx, rec, user]
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant]

users_item_view_rec_i2i:
  title: users_item_view_rec_i2i
  tags: [i2, bx, rec, user]
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant]

users_item_view_rec_u2i:
  title: users_item_view_rec_u2i
  tags: [i2, bx, rec, user]
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant]

users_item_view_rec_daily_vas:
  title: users_item_view_rec_vas
  tags: [i2, bx, rec, user, vas]
  numerator:
    observations: [item_views_rec_vas]
    groupby: [participant]

users_contact_rec_daily_vas:
  title: users_contact_rec_vas
  tags: [i1, bx, rec, user, vas]
  numerator:
    observations: [contacts_rec_vas]
    groupby: [participant]

users_buyer_target_click_rec_daily_vas:
  title: users_bt_click_rec_vas
  tags: [i2, bx, rec, user, vas]
  numerator:
    observations: [buyer_target_clicks_rec_vas]
    groupby: [participant]

users_contact_rec_i2i_vas:
  title: users_contact_rec_i2i_vas
  tags: [i1, bx, rec, user, vas]
  numerator:
    observations: [contacts_rec_i2i_vas]
    groupby: [participant]

users_contact_rec_u2i_vas:
  title: users_contact_rec_u2i_vas
  tags: [i1, bx, rec, user, vas]
  numerator:
    observations: [contacts_rec_u2i_vas]
    groupby: [participant]

users_item_view_rec_i2i_vas:
  title: users_item_view_rec_i2i_vas
  tags: [i2, bx, rec, user, vas]
  numerator:
    observations: [item_views_rec_i2i_vas]
    groupby: [participant]

users_item_view_rec_u2i_vas:
  title: users_item_view_rec_u2i_vas
  tags: [i2, bx, rec, user, vas]
  numerator:
    observations: [item_views_rec_u2i_vas]
    groupby: [participant]


###############################################################################
# Rec :: User Ratios
###############################################################################

users_item_views_rec_u2i_per_users_all_main_pages:
  title: u2i_viewers_per_visitors
  description: "Conversion from unique visitors to uniqie viewers on main page recommendations"
  tags: [i3, bx, rec, main, ratio]
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant]
  denominator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_item_views_rec_i2i_per_users_item_views:
  title: i2i_viewers_per_visitors
  description: "Conversion from unique visitors to uniqie viewers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant]
  denominator:
    observations: [item_views]
    groupby: [participant]

users_contacts_rec_u2i_per_users_all_main_pages:
  title: u2i_buyers_per_visitors
  description: "Conversion from unique visitors to uniqie buyers on main page recommendations"
  tags: [i2, bx, rec, main, ratio]
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant]
  denominator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_contacts_rec_i2i_per_users_item_views:
  title: i2i_buyers_per_visitors
  description: "Conversion from unique visitors to uniqie buyers on item page recommendations"
  tags: [i2, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant]
  denominator:
    observations: [item_views]
    groupby: [participant]

users_contacts_rec_i2i_per_users_item_views_rec_i2i:
  title: i2i_buyers_per_viewers
  description: "Conversion from unique viewers to uniqie buyers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant]
  denominator:
    observations: [item_views_rec_i2i]
    groupby: [participant]

users_contacts_rec_u2i_per_users_item_views_rec_u2i:
  title: u2i_buyers_per_viewers
  description: "Conversion from unique viewers to uniqie buyers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant]
  denominator:
    observations: [item_views_rec_u2i]
    groupby: [participant]


##     ## ########  ######   ######  ######## ##    ##  ######   ######## ########
###   ### ##       ##    ## ##    ## ##       ###   ## ##    ##  ##       ##     ##
#### #### ##       ##       ##       ##       ####  ## ##        ##       ##     ##
## ### ## ######    ######   ######  ######   ## ## ## ##   #### ######   ########
##     ## ##             ##       ## ##       ##  #### ##    ##  ##       ##   ##
##     ## ##       ##    ## ##    ## ##       ##   ### ##    ##  ##       ##    ##
##     ## ########  ######   ######  ######## ##    ##  ######   ######## ##     ##

###############################################################################
# Messenger :: Totals
###############################################################################

phone_views_in_chat:
  title: phone_views_in_chat
  tags: [i3, messenger, total]
  numerator:
    observations: [phone_views_in_chat]

phone_views_in_chat_grouped:
  title: phone_views_in_chat_grouped
  tags: [i3, messenger, total,grouped]
  numerator:
    observations: [phone_views_in_chat]
    groupby: [participant, item]

total_messages:
  title: total_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [messenger_total_messeges]

first_response_messages:
  title: first_response_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [first_response_messages]  

write_button_clicks:
  title: write_button_clicks
  tags: [i3, messenger, total]
  numerator:
    observations: [write_button_clicks]

write_button_clicks_grouped:
  title: write_button_clicks_grouped
  tags: [i3, messenger, total,grouped]
  numerator:
    observations: [write_button_clicks]
    groupby: [participant, item]

chats_deleted:
  title: chats_deleted
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_chat_deleted]

messenger_users_blocked:
  title: messenger_users_blocked
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_users_blocked]

messenger_spam_blocks:
  title: messenger_spam_blocks
  tags: [i3, messenger, total]
  numerator:
    observations: [messenger_spam_blocks]

item_views_from_messenger:
  title: item_views_from_messenger
  tags: [i3, messenger, total, web]
  numerator:
    observations: [item_views_from_messenger]
    
item_views_client_rec_from_msg:
  title: item_views_client_rec_from_msg
  tags: [i4, messenger, total, mobile]
  numerator:
    observations: [item_views_client_rec_from_msg]

chat_open_errors:
  title: chat_open_errors
  tags: [i4, messenger, total]
  numerator:
    observations: [chat_open_errors]    

messenger_geo_messages:
  title: messenger_geo_messages
  tags: [i3, messenger, total]
  numerator:
    observations: [messenger_geo_messages]

messenger_active_chats:
  title: messenger_active_chats
  tags: [i2, messenger, total]
  numerator:
    observations: [messenger_active_chats]

active_items_with_msg:
  title: active_items_with_messenger
  tags: [i2, messenger, total]
  numerator:
    observations: [active_items_with_msg]
    
messenger_first_messages:
  title: messenger_first_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [messenger_first_messages]

messenger_image_messages:
  title: messenger_image_messages
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_image_messages]

messenger_item_messages:
  title: messenger_item_messages
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_item_messages]

messenger_auto_messages:
  title: messenger_auto_messages
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_auto_messages]

messenger_text_messages:
  title: messenger_text_messages
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_text_messages]
    
messenger_links_messages:
  title: messenger_links_messages
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_links_messages]

answered_first_messages:
  title: answered_first_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [answered_first_messages]
    
answered_first_messages_1hour:
  title: answered_first_messages_1hour
  tags: [i2, messenger, total]
  numerator:
    observations: [answered_first_messages_within_1hour]
    
answered_first_messages_within_1hour_7hour:
  title: answered_first_messages_within_1hour_7hour
  tags: [i2, messenger, total]
  numerator:
    observations: [answered_first_messages_within_1hour_7hour]

answered_first_messages_within_1day:
  title: answered_first_messages_within_1day
  tags: [i2, messenger, total]
  numerator:
    observations: [answered_first_messages_within_1day]

items_closed_from_messenger:
  title: items_closed_from_messenger
  tags: [i3, messenger, total]
  numerator:
    observations: [closed_items_from_messenger]

items_sold_onavito_from_messenger:
  title: items_sold_onavito_from_messenger
  tags: [i2, messenger, total]
  numerator:
    observations: [items_sold_onavito_from_messenger]

###############################################################################
# Messenger :: Ratios
###############################################################################

write_button_clicks_per_item_views:
  title: write_button_clicks_per_item_views
  tags: [i3, messenger, ratio]
  numerator:
    observations: [write_button_clicks]
  denominator:
    observations: [item_views]

first_mess_per_write_button_clicks:
  title: first_mess_per_write_button_clicks
  tags: [i3, messenger, ratio]
  numerator:
    observations: [first_messages]
  denominator:
    observations: [write_button_clicks]
    
first_mess_per_active_items_with_msg:
  title: first_mess_per_active_items_with_msg
  tags: [i3, messenger, ratio]
  numerator:
    observations: [first_messages]
  denominator:
    observations: [active_items_with_msg]

messenger_spam_ratio:
  title: messenger_spam_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [messenger_spam_blocks]
  denominator:
    observations: [messenger_active_chats]
    
answered_first_messages_ratio:
  title: answered_first_messages_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [answered_first_messages]
  denominator:
    observations: [first_messages]
    
answered_first_messages_1hour_ratio:
  title: answered_first_messages_1hour_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [answered_first_messages_within_1hour]
  denominator:
    observations: [first_messages]
    
answered_first_messages_within_1hour_7hour_ratio:
  title: answered_first_messages_within_1hour_7hour_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [answered_first_messages_within_1hour_7hour]
  denominator:
    observations: [first_messages]

###############################################################################
# Messenger :: proportion
###############################################################################

users_first_messages:
  title: users_first_messages
  tags: [i2, messenger, user]
  numerator:
    observations: [first_messages]
    groupby: [participant]

users_first_response_messages:
  title: users_first_response_messages
  tags: [i2, messenger, user]
  numerator:
    observations: [first_response_messages]
    groupby: [participant]

users_phone_views_in_chat:
  title: users_phone_views_in_chat
  tags: [i3, messenger, user]
  numerator:
    observations: [phone_views_in_chat]
    groupby: [participant]

users_write_button_clicks:
  title: users_write_button_clicks
  tags: [i3, messenger, user]
  numerator:
    observations: [write_button_clicks]
    groupby: [participant]

messenger_visitors:
  title: messenger_visitors
  tags: [i2, messenger, user]
  numerator:
    observations: [chat_list_views, chat_views]
    groupby: [participant]

messenger_dau:
  title: messenger_dau
  tags: [i2, messenger, user]
  numerator:
    observations: [messenger_total_messeges]
    groupby: [participant]

users_chat_open_errors:
  title: users_chat_open_errors
  tags: [i4, messenger, user]
  numerator:
    observations: [chat_open_errors]
    groupby: [participant]
    
users_item_closed_from_messenger:
  title: users_item_closed_from_messenger
  tags: [i3, messenger, user]
  numerator:
    observations: [closed_items_from_messenger]
    groupby: [participant]

users_item_sold_onavito_from_messenger:
  title: users_item_sold_onavito_from_messenger
  tags: [i2, messenger, user]
  numerator:
    observations: [items_sold_onavito_from_messenger]
    groupby: [participant]

########  ######## ##       #### ##     ## ######## ########  ##    ##
##     ## ##       ##        ##  ##     ## ##       ##     ##  ##  ##
##     ## ##       ##        ##  ##     ## ##       ##     ##   ####
##     ## ######   ##        ##  ##     ## ######   ########     ##
##     ## ##       ##        ##   ##   ##  ##       ##   ##      ##
##     ## ##       ##        ##    ## ##   ##       ##    ##     ##
########  ######## ######## ####    ###    ######## ##     ##    ##

###############################################################################
# Delivery :: Totals
###############################################################################

delivery_orders_created:
  title: delivery_orders_created
  tags: [i3, bx, total]
  numerator:
    observations: [delivery_order_created]

delivery_orders_created_grouped:
  title: delivery_orders_created_grouped
  tags: [i3, bx, total, group]
  numerator:
    observations: [delivery_order_created]
    groupby: [participant, item]

buyer_delivery_orders:
  title: buyer_delivery_orders
  description: "All delivery orders by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders]

buyer_delivery_orders_with_pay:
  title: buyer_delivery_orders_with_pay
  description: "All delivery orders by buyer with pay"
  tags: [i0, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_with_pay]

buyer_delivery_orders_in_transit:
  title: buyer_delivery_orders_in_transit
  description: "All delivery orders by buyer in transit"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_in_transit]

buyer_delivery_deals:
  title: buyer_delivery_deals
  description: "All delivery deals by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_deals]

buyer_delivery_orders_expired:
  title: buyer_delivery_orders_expired
  description: "All delivery expired orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_expired]

buyer_delivery_orders_canceled:
  title: buyer_delivery_orders_canceled
  description: "All delivery canceled orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_canceled]

buyer_delivery_orders_returned:
  title: buyer_delivery_orders_returned
  description: "All delivery returned orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_returned]

seller_delivery_orders_returned:
  title: seller_delivery_orders_returned
  description: "All delivery returned order by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_returned]

seller_delivery_deals:
  title: seller_delivery_deals
  description: "All delivery deals by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_deals]

seller_delivery_orders_canceled:
  title: seller_delivery_orders_canceled
  description: "All delivery canceled orders by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_canceled]

seller_delivery_orders_expired:
  title: seller_delivery_orders_expired
  description: "All delivery expired orders by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_expired]

seller_delivery_orders_in_transit:
  title: seller_delivery_orders_in_transit
  description: "All delivery orders in transit by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_in_transit]

seller_delivery_orders_with_pay:
  title: seller_delivery_orders_with_pay
  description: "All delivery order with pay by seller"
  tags: [i0, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_with_pay]

helpdesk_vas_tag_tickets:
  title: helpdesk_vas_tag_tickets
  description: "Vas tickets"
  tags: [i2, delivery, vas, support]
  numerator:
    observations: [helpdesk_vas_tag_tickets]

helpdesk_delivery_tickets:
  title: helpdesk_delivery_tickets
  description: "Delivery tickets"
  tags: [i1, delivery, support]
  numerator:
    observations: [helpdesk_delivery_tickets]

helpdesk_delivery_vas_tickets:
  title: helpdesk_delivery_vas_tickets
  description: "Delivery vas tickets"
  tags: [i2, delivery, support,vas]
  numerator:
    observations: [helpdesk_delivery_vas_tickets]

delivery_seller_vas_spend_amount:
  title: delivery_seller_vas_spend_amount
  description: "Delivery seller vas spend amount"
  tags: [i2, delivery, vas]
  numerator:
    observations: [delivery_seller_vas_spend_amount]

items_with_delivery_soa:
  title: items_with_delivery_soa
  description: "All delivery item closed by SOA"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_with_delivery_soa]

items_with_delivery:
  title: items_with_delivery
  description: "All item with delivery"
  tags: [i1, delivery, seller]
  numerator:
    observations: [items_with_delivery]

item_off_delivery:
  title: item_off_delivery
  description: "All item off delivery"
  tags: [i1, delivery, seller]
  numerator:
    observations: [item_off_delivery]

delivery_item_view:
  title: delivery_item_view
  description: "Uniq item view of delivery item"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_item_view]

delivery_total_item_view:
  title: delivery_total_item_view
  description: "Total item view of delivery item"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_total_item_view]

delivery_click:
  title: delivery_click
  description: "Uniq delivery button click"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_click]

total_delivery_click:
  title: total_delivery_click
  description: "Total delivery button click"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_click]

delivery_widget:
  title: delivery_widget
  description: "Uniq delivery widget show"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_widget]

total_delivery_widget:
  title: total_delivery_widget
  description: "Total delivery widget show"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_widget]

delivery_confirm:
  title: delivery_confirm
  description: "Уникальные нажатия на кнопку - Продолжить оформление - в поп-апе доставке"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_confirm]

total_delivery_confirm:
  title: total_delivery_confirm
  description: "Все нажатия на кнопку - Продолжить оформление - в поп-апе доставке"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_confirm]

delivery_contact:
  title: delivery_contact
  description: "Uniq delivery contacts"
  tags: [i0, delivery, buyer]
  numerator:
    observations: [delivery_contact]

total_delivery_contact:
  title: total_delivery_contact
  description: "Total delivery contacts"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_contact]

buyer_commission_net_adj:
  title: buyer_commission_net_adj
  description: "Выручка Доставки без НДС"
  tags: [i1, delivery, seller]
  numerator:
    observations: [buyer_commission_net_adj]

buyer_commission:
  title: buyer_commission
  description: "Выручка Доставки"
  tags: [i2, delivery, seller]
  numerator:
    observations: [buyer_commission]

items_delivery_category_soa:
  title: items_delivery_category_soa
  description: "Количество объявлений SOA в доставочных категориях"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_category_soa]

users_off_delivery:
  title: users_off_delivery
  description: "Пользователи, которые отключили доставку в профиле"
  tags: [i2, delivery, seller]
  numerator:
    observations: [users_off_delivery]

items_delivery_available:
  title: items_delivery_available
  description: "Количество объявлений, которым доступна доставка"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_available]

items_delivery_wrong_available:
  title: items_delivery_wrong_available
  description: "Количество объявлений, которым ошибочно подключена доставка"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_wrong_available]

delivery_deals:
  title: delivery_deals
  description: "Количество объявлений, которые продали с доставкой"
  tags: [i2, delivery, seller]
  numerator:
    observations: [delivery_deals]

delivery_category_deals:
  title: delivery_category_deals
  description: "Количество объявлений закрытых по SOA или у которых есть заказы в статусе Delivered"
  tags: [i2, delivery, seller]
  numerator:
    observations: [delivery_category_deals]
    
helpdesk_delivery_2nd_line_tickets:
  title: helpdesk_delivery_2nd_line_tickets
  description: "Количество обращений во 2ю линию поддержки по Доставке"
  tags: [i2, delivery]
  numerator:
    observations: [helpdesk_delivery_2nd_line_tickets]
    
helpdesk_delivery_text_tickets:
  title: helpdesk_delivery_text_tickets
  description: "Количество текстовых обращений в поддержку по Доставке"
  tags: [i2, delivery]
  numerator:
    observations: [helpdesk_delivery_text_tickets]
    
helpdesk_delivery_text_2nd_line_tickets:
  title: helpdesk_delivery_text_2nd_line_tickets
  description: "Количество текстовых обращений во 2ю линию поддержки по Доставке"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_text_2nd_line_tickets]
    
helpdesk_delivery_voice_calls:
  title: helpdesk_delivery_voice_calls
  description: "Количество голосовых обращений в поддержку по Доставке"
  tags: [i2, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_calls]
    
helpdesk_delivery_voice_2nd_line_calls:
  title: helpdesk_delivery_voice_2nd_line_calls
  description: "Количество голосовых обращений во 2ю линию поддержки по Доставке"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_2nd_line_calls]
    
helpdesk_delivery_voice_answer_calls:
  title: helpdesk_delivery_voice_answer_calls
  description: "Количество отвеченных голосовых обращений в поддержку по Доставке"
  tags: [i4, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_answer_calls]
    
helpdesk_delivery_voice_2nd_line_answer_calls:
  title: helpdesk_delivery_voice_2nd_line_answer_calls
  description: "Количество отвеченных голосовых обращений во 2ю линию поддержки по Доставке"
  tags: [i4, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_2nd_line_answer_calls]   

helpdesk_delivery_claim_tickets:
  title: helpdesk_delivery_claim_tickets
  description: "Количество претензионных обращений по Доставке"
  tags: [i2, delivery]
  numerator:
    observations: [helpdesk_delivery_claim_tickets]   
    
helpdesk_delivery_voice_claim_tickets:
  title: helpdesk_delivery_voice_claim_tickets
  description: "Количество голосовых претензионных обращений по Доставке"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_claim_tickets]
 
helpdesk_delivery_text_claim_tickets:
  title: helpdesk_delivery_text_claim_tickets
  description: "Количество текстовых претензионных обращений по Доставке"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_text_claim_tickets]
    
delivery_revenue:
  title: delivery_revenue
  description: "Чистая прибыль Доставки без учёта компенсаций"
  tags: [i2, delivery]
  numerator:
    observations: [delivery_revenue]

###############################################################################
# Delivery :: Ratios
###############################################################################

buyer_delivery_in_transit_ratio:
  title: buyer_delivery_in_transit_ratio
  description: "All delivery orders in transit ratio by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_in_transit]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seller_delivery_in_transit_ratio:
  title: seller_delivery_in_transit_ratio
  description: "All delivery in transit orders ratio by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_in_transit]
  denominator:
    observations: [seller_delivery_orders_with_pay]

delivery_view_delivery_click_ratio:
  title: delivery_item_view_delivery_click_ratio
  description: "Conversion from delivery item view to delivery button by uniq user"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_click]
  denominator:
    observations: [delivery_item_view]

delivery_total_view_delivery_click_ratio:
  title: delivery_total_item_view_delivery_click_ratio
  description: "Conversion from delivery item view to delivery button"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_click]
  denominator:
    observations: [delivery_total_item_view]

delivery_click_widget_ratio:
  title: delivery_click_widget_ratio
  description: "Conversion from delivery button click to delivery widget by uniq user"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_widget]
  denominator:
    observations: [delivery_click]

delivery_total_click_widget_ratio:
  title: delivery_total_click_widget_ratio
  description: "Conversion from delivery button click to delivery widget"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_widget]
  denominator:
    observations: [total_delivery_click]

delivery_widget_contact_ratio:
  title: delivery_widget_contact_ratio
  description: "Conversion from delivery widget show to delivery contact by uniq user"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_contact]
  denominator:
    observations: [delivery_widget]

delivery_widget_confirm_ratio:
  title: delivery_widget_confirm_ratio
  description: "Conversion from delivery widget show to delivery confirm by uniq user"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_confirm]
  denominator:
    observations: [delivery_widget]

delivery_total_widget_contact_ratio:
  title: delivery_total_widget_contact_ratio
  description: "Conversion from delivery widget show to delivery contact"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_contact]
  denominator:
    observations: [total_delivery_widget]

delivery_total_widget_confirm_ratio:
  title: delivery_total_widget_confirm_ratio
  description: "Conversion from delivery widget show to delivery confirm"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_confirm]
  denominator:
    observations: [total_delivery_widget]

delivery_contact_delivery_button_ratio:
  title: delivery_contact_delivery_button_ratio
  description: "Conversion from delivery button click to delivery contact by uniq user"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_contact]
  denominator:
    observations: [delivery_click]

buyer_delivery_canceled_ratio:
  title: buyer_delivery_canceled_ratio
  description: "All delivery orders canceled ratio by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_canceled]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seler_delivery_canceled_ratio:
  title: seler_delivery_canceled_ratio
  description: "All delivery orders canceled ratio by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_canceled]
  denominator:
    observations: [seller_delivery_orders_with_pay]

buyer_delivery_expired_ratio:
  title: buyer_delivery_expired_ratio
  description: "All delivery orders expired ratio by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_expired]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seler_delivery_expired_ratio:
  title: seler_delivery_expired_ratio
  description: "All delivery orders expired ratio by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_expired]
  denominator:
    observations: [seller_delivery_orders_with_pay]

buyer_delivery_paid_order_ratio:
  title: buyer_delivery_paid_order_ratio
  description: "All delivery orders paid ratio by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_with_pay]
  denominator:
    observations: [buyer_delivery_orders]

items_delivery_wrong_available_ratio:
  title: items_delivery_wrong_available_ratio
  description: "Доля объявлений с ошибочно подключенной доставкой"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [items_delivery_wrong_available]
  denominator:
    observations: [items_with_delivery]

items_delivery_ratio:
  title: items_delivery_ratio
  description: "Доля объявлений с доставкой среди всех возможных"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [items_with_delivery]
  denominator:
    observations: [items_delivery_available]

delivery_deals_soa_share:
  title: delivery_deals_soa_share
  description: "Доля объявлений проданных с доставкой среди всех проданных на Авито"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_deals]
  denominator:
    observations: [delivery_category_deals]

delivery_revenue_per_deal:
  title: delivery_revenue_per_deal
  description: "Чистая прибыль Доставки в расчёте на 1 заказ"
  tags: [i2, delivery]
  numerator:
    observations: [delivery_revenue]
  denominator:
    observations: [buyer_delivery_deals]
 
helpdesk_delivery_tickets_per_order:
  title: helpdesk_delivery_tickets_per_order
  description: "Количество обращений в поддержку по Доставке в расчёте на один оплаченный заказ"
  tags: [i2, delivery]
  numerator:
    observations: [helpdesk_delivery_tickets]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

helpdesk_delivery_2nd_line_tickets_per_order:
  title: helpdesk_delivery_2nd_line_tickets_per_order
  description: "Количество обращений во 2ю линию поддержку по Доставке в расчёте на один оплаченный заказ"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_2nd_line_tickets]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

helpdesk_delivery_text_tickets_per_order:
  title: helpdesk_delivery_text_tickets_per_order
  description: "Количество текстовых обращений в поддержку по Доставке в расчёте на один оплаченный заказ"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_text_tickets]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

helpdesk_delivery_voice_calls_per_order:
  title: helpdesk_delivery_voice_calls_per_order
  description: "Количество голосовых обращений в поддержку по Доставке в расчёте на один оплаченный заказ"
  tags: [i3, delivery]
  numerator:
    observations: [helpdesk_delivery_voice_calls]
  denominator:
    observations: [buyer_delivery_orders_with_pay]


 ######  ##     ##  #######  ########  ########       ########  ######## ##    ## ########
##    ## ##     ## ##     ## ##     ##    ##          ##     ## ##       ###   ##    ##
##       ##     ## ##     ## ##     ##    ##          ##     ## ##       ####  ##    ##
 ######  ######### ##     ## ########     ##          ########  ######   ## ## ##    ##
      ## ##     ## ##     ## ##   ##      ##          ##   ##   ##       ##  ####    ##
##    ## ##     ## ##     ## ##    ##     ##          ##    ##  ##       ##   ###    ##
 ######  ##     ##  #######  ##     ##    ##          ##     ## ######## ##    ##    ##

###############################################################################
# Short Rent :: Totals
###############################################################################

booking_created_short_rent:
  title: booking_created_short_rent
  tags: [i4, bx, total]
  numerator:
    observations: [booking_created_short_rent]

booking_created_short_rent_grouped:
  title: booking_created_short_rent_grouped
  tags: [i4, bx, total, group]
  numerator:
    observations: [booking_created_short_rent]
    groupby: [participant, item]

buyer_str_bookings:
  title: buyer_str_bookings
  description: "All str bookings by buyer"
  tags: [i3, str, buyer]
  numerator:
    observations: [buyer_str_bookings]

buyer_str_bookings_paid:
  title: buyer_str_bookings_paid
  description: "All str paid bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_paid]

buyer_str_bookings_comfirmed:
  title: buyer_str_bookings_comfirmed
  description: "All str confirmed bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_comfirmed]

buyer_str_bookings_expired:
  title: buyer_str_bookings_expired
  description: "All str expired bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_expired]

buyer_str_bookings_canceled:
  title: buyer_str_bookings_canceled
  description: "All str canceled bookings for buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_canceled]

buyer_str_booking_cost:
  title: buyer_str_booking_cost
  description: "All buyer bookings cost, paid/not paid both"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_booking_cost]

buyer_str_paid:
  title: buyer_str_paid
  description: "Money paid for bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_paid]

buyer_str_deals:
  title: buyer_str_deals
  description: "All str deals by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_deals]

buyer_str_bookings_voided:
  title: buyer_str_bookings_voided
  description: "All str voided bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_voided]

seller_str_bookings:
  title: seller_str_bookings
  description: "All str bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings]

seller_str_bookings_paid:
  title: seller_str_bookings_paid
  description: "All str paid bookings by seller"
  tags: [i3, str, seller]
  numerator:
    observations: [seller_str_bookings_paid]

seller_str_bookings_comfirmed:
  title: seller_str_bookings_comfirmed
  description: "All str confirmed bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_comfirmed]

seller_str_bookings_canceled:
  title: seller_str_bookings_canceled
  description: "All str canceled bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_canceled]

seller_str_bookings_expired:
  title: seller_str_bookings_expired
  description: "All str expired bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_expired]

seller_str_deals:
  title: seller_str_deals
  description: "All str deals by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_deals]

seller_str_bookings_voided:
  title: seller_str_bookings_voided
  description: "All str voided bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_voided]

seller_str_payout_fee:
  title: seller_payout_fee
  description: "Money seller pay avito from booking"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_payout_fee]

seller_str_payout_amount:
  title: seller_payout_amount
  description: "Money buyer pay for booking by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_payout_amount]

helpdesk_str_tickets:
  title: helpdesk_str_tickets
  description: "Str helpdesk tickets"
  tags: [i4, str]
  numerator:
    observations: [helpdesk_str_tickets]

items_with_str:
  title: items_with_str
  description: "All item with str"
  tags: [i4, str, seller]
  numerator:
    observations: [items_with_str]

items_with_str_soa:
  title: items_with_str_soa
  description: "All str item closed with SOA"
  tags: [i4, str, seller]
  numerator:
    observations: [items_with_str_soa]
  denominator:
    observations: [seller_str_bookings_paid]

item_off_str:
  title: item_off_str
  description: "All item off str"
  tags: [i4, str, buyer]
  numerator:
    observations: [item_off_str]

str_item_view:
  title: str_item_view
  description: "Uniq item view of str item"
  tags: [i4, str, buyer]
  numerator:
    observations: [item_view]

str_total_item_view:
  title: str_total_item_view
  description: "Total item view of str item"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_item_view]

str_click:
  title: str_click
  description: "Uniq str button click"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_click]

total_str_click:
  title: total_str_click
  description: "Total str button click"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_click]

str_widget:
  title: str_widget
  description: "Uniq str widget show"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_widget]

total_str_widget:
  title: total_str_widget
  description: "Total str widget show"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_widget]

str_contact:
  title: str_contact
  description: "Uniq str contacts"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_contact]

total_str_contact:
  title: total_str_contact
  description: "Total str contacts"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_contact]

###############################################################################
# Short Rent :: Ratios
###############################################################################

buyer_str_confirmed_ratio:
  title: buyer_str_confirmed_ratio
  description: "Conversion from paid to confirmed booking buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_comfirmed]
  denominator:
    observations: [buyer_str_bookings_paid]

seller_str_confirmed_ratio:
  title: seller_str_confirmed_ratio
  description: "Conversion from paid to confirmed booking seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_comfirmed]
  denominator:
    observations: [seller_str_bookings_paid]

str_view_str_click_ratio:
  title: str_view_str_click_ratio
  description: "Conversion from str item view to str button by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_click]
  denominator:
    observations: [item_view]

str_total_view_str_click_ratio:
  title: str_total_view_str_click_ratio
  description: "Conversion from str item view to str button"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_click]
  denominator:
    observations: [total_item_view]

str_click_widget_ratio:
  title: str_click_widget_ratio
  description: "Conversion from str button click to str widget by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_widget]
  denominator:
    observations: [str_click]

str_total_click_widget_ratio:
  title: str_total_click_widget_ratio
  description: "Conversion from str button click to str widget"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_widget]
  denominator:
    observations: [total_str_click]

str_widget_contact_ratio:
  title: str_widget_contact_ratio
  description: "Conversion from str widget show to str contact by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_contact]
  denominator:
    observations: [str_widget]

str_total_widget_contact_ratio:
  title: str_total_widget_contact_ratio
  description: "Conversion from str widget show to str contact"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_contact]
  denominator:
    observations: [total_str_widget]

######## ##    ##  ######
   ##    ###   ## ##    ##
   ##    ####  ## ##
   ##    ## ## ##  ######
   ##    ##  ####       ##
   ##    ##   ### ##    ##
   ##    ##    ##  ######

###############################################################################
# TNS :: Totals
###############################################################################

forgot_password_count:
  numerator:
    observations: [forgot_password_count]

password_restore_requests:
  numerator:
    observations: [password_restore_requests]

password_restore_request_errors:
  numerator:
    observations: [password_restore_request_errors]

password_restore_count:
  numerator:
    observations: [password_restore_count]

password_restore_errors:
  numerator:
    observations: [password_restore_errors]

sign_in_count:
  numerator:
    observations: [sign_in_count]

sign_in_errors:
  numerator:
    observations: [sign_in_errors]

public_profile_views:
  description: "Количество просмотров публичного профиля на юзера (cookie)"
  tags: [i4, public_profile, tns, rar]
  numerator:
    observations: [public_profile_views]

public_profile_unique_views:
  description: "count (distint cookie_id, public_profile_user_id)"
  tags: [i4, public_profile, tns, rar]
  numerator:
    observations: [public_profile_unique_views]

public_profile_active_items_paginations:
  description: "Количество пагинаций (скролов) по активным айтемам на юзера"
  tags: [i4, public_profile, tns, rar]
  numerator:
    observations: [public_profile_active_items_paginations]

public_profile_closed_items_paginations:
  description: "Количество пагинаций(скроллов) по завершенным айтемам в ПП"
  tags: [i4, public_profile, tns, rar]
  numerator:
    observations: [public_profile_closed_items_paginations]

user_enter:
  description: "number of unique cookies with successful authorization/registration/restore, which had authorization start screen (eid=2089)"
  tags: [i2, tns, tns_bulb, enter]
  numerator:
    observations: [enter_success]

user_auth:
  description: "number of unique cookies with successful authorization (phone/email/social), which had authorization start screen"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]

user_registration:
  description: "number of unique cookies with successful registration (not social), which had authorization start screen"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]

user_password_restore:
  description: "number of unique cookies with successful password restore, which had restore start screen (including those who's changed platform while restoring by email)"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]

abuses:
  title: abuses
  tags: [tns, moderation]
  numerator:
    observations: [abuses]

reviews_added:
  title: reviews_added
  description: "Number of all reviews added"
  tags: [i2, tns, reviews, ratings]
  numerator:
    observations: [reviews_added]

users_reviews_added:
  title: users_reviews_added
  description: "Number of users added reviews"
  tags: [i2, tns, reviews, ratings]
  numerator:
    observations: [reviews_added]
    groupby: [participant]
    
created_reviews_list_open:
  title: created_reviews_list_open
  description: "Количество просмотров списка оставленных отзывов в ЛК"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [created_reviews_list_open]

user_created_reviews_list_open:
  title: created_reviews_list_open
  description: "Количество пользователей, просмотревших список оставленных отзывов в ЛК"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [created_reviews_list_open]
    groupby: [participant]
    
received_reviews_list_open:
  title: received_reviews_list_open
  description: "Количество просмотров списка отправленных отзывов в ЛК"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [received_reviews_list_open]

user_received_reviews_list_open:
  title: received_reviews_list_open
  description: "Количество пользователей, просмотревших список отправленных отзывов в ЛК"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [received_reviews_list_open]
    groupby: [participant]
    
review_add_open_page:
  title: review_add_open_page
  description: "Количество открытий страницы написания отзыва"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [review_add_open_page]

user_review_add_open_page:
  title: review_add_open_page
  description: "Количество пользователей, открывших страницу написания отзыва"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [review_add_open_page]
    groupby: [participant]

review_delete:
  title: review_delete
  description: "Количество удалений отзывов"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [review_delete]

user_review_delete:
  title: review_delete
  description: "Количество пользователей, удаливших отзыв"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [review_delete]
    groupby: [participant]

reviews_list_open:
  title: reviews_list_open
  description: "Количество просмотров списка отзывов на продавца"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [reviews_list_open]

user_reviews_list_open:
  title: reviews_list_open
  description: "Количество пользователей, просмотревишх список отзывов на продавца"
  tags: [i4, tns, reviews, ratings]
  numerator:
    observations: [reviews_list_open]
    groupby: [participant]

sellers_with_rating:
  title: sellers_with_rating
  description: "Number of sellers with any rating"
  tags: [i2, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_any]

sellers_with_rating_1:
  title: sellers_with_rating_1
  description: "Number of sellers 1-star rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_1]

sellers_with_rating_2:
  title: sellers_with_rating_2
  description: "Number of sellers 2-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_2]

sellers_with_rating_3:
  title: sellers_with_rating_3
  description: "Number of sellers 3-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_3]

sellers_with_rating_4:
  title: sellers_with_rating_4
  description: "Number of sellers 4-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_4]

sellers_with_rating_5:
  title: sellers_with_rating_5
  description: "Number of sellers 5-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_5]

items_with_rating:
  title: items_with_rating
  description: "Number of active items with any rating"
  tags: [i2, tns, reviews, ratings, items]
  numerator:
    observations: [active_items_with_rating]

buyers_on_rating_1:
  title: buyers_on_rating_1
  description: "Number of buyers on 1-star rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_1]
    groupby: [participant]

buyers_on_rating_2:
  title: buyers_on_rating_2
  description: "Number of buyers on 2-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_2]
    groupby: [participant]

buyers_on_rating_3:
  title: buyers_on_rating_3
  description: "Number of buyers on 3-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_4]
    groupby: [participant]

buyers_on_rating_4:
  title: buyers_on_rating_4
  description: "Number of buyers on 4-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_4]
    groupby: [participant]

buyers_on_rating_5:
  title: buyers_on_rating_5
  description: "Number of buyers on 5-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_5]
    groupby: [participant]

item_views_on_rating_1:
  title: item_views_on_rating_1
  description: "Item views on 1-star rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_1]

item_views_on_rating_2:
  title: item_views_on_rating_2
  description: "Item views on 2-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_2]

item_views_on_rating_3:
  title: item_views_on_rating_3
  description: "Item views on 3-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_3]

item_views_on_rating_4:
  title: item_views_on_rating_4
  description: "Item views on 4-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_4]

item_views_on_rating_5:
  title: item_views_on_rating_5
  description: "Item views on 5-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_5]

contacts_history_open_in_ratings:
  title: contacts_history_open_in_ratings
  description: "views of contacts history in ratings"
  tags: [i4, tns, ratings, tns_rar]
  numerator:
    observations: [contacts_history_open_in_ratings]


buyers_with_fs_subscriptions:
  title: buyers_with_fs_subscriptions
  description: "number of buyers with subscriptions on favourite sellers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old, favourite_sellers_subscriptions_inactive_old]
    groupby: [participant]

active_buyers_with_fs_subscriptions:
  title: active_buyers_with_fs_subscriptions
  description: "number of active (in feature) buyers with subscriptions on favourite sellers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old]
    groupby: [participant]

sellers_with_fs_subscribers:
  title: sellers_with_fs_subscribers
  description: "number of sellers with subscribers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old,
    favourite_sellers_subscribers_inactive_new, favourite_sellers_subscribers_inactive_old]
    groupby: [participant]

active_sellers_with_fs_subscribers:
  title: active_sellers_with_fs_subscribers
  description: "number of sellers with subscribers and active items"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old]
    groupby: [participant]

fs_subscriptions_per_buyer:
  title: fs_subscriptions_per_buyer
  description: "number of subscriptions per buyer"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old, favourite_sellers_subscriptions_inactive_old]
    groupby: []

fs_subscribers_per_seller:
  title: fs_subscribers_per_seller
  description: "number of subscribers per seller"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old,
    favourite_sellers_subscribers_inactive_new, favourite_sellers_subscribers_inactive_old]
    groupby: []
    
favouriteseller_adds:
  description: "number of favourite seller subscriptions per buyer"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add]
    groupby: []
        
favouriteseller_deletes:
  description: "number of favourite seller unsubscriptions per buyer"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete]
    groupby: []
        
favouriteseller_page_opens:
  description: "number of favourite seller page opens per buyer"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [user_favouritesellers_open]
    groupby: []
        
favouriteseller_notifications_ons:
  description: "number of favourite seller notifications subscriptions per buyer"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_notifications_on]
    groupby: []

favouriteseller_notifications_offs:
  description: "number of favourite seller notifications unsubscriptions per buyer"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_notifications_off]
    groupby: []
    
favouriteseller_activities:
  description: "number of favourite seller activities per buyer"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add, buyer_favouriteseller_delete, user_favouritesellers_open, buyer_favouriteseller_notifications_on, buyer_favouriteseller_notifications_off]
    groupby: []

item_views_from_fs:
  title: item_views_from_fs
  description: "number of item views from favorite sellers"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [item_views_from_fs]

buyer_favouriteseller_add_from_pp:
  title: buyer_favouriteseller_add_from_pp
  description: "favorite sellers subscriptions from public profile"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add_from_pp]

buyer_favouriteseller_add_from_fs:
  title: buyer_favouriteseller_add_from_fs
  description: "favorite sellers subscriptions from favorite sellers"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add_from_fs]

buyer_favouriteseller_add_from_shop:
  title: buyer_favouriteseller_add_from_shop
  description: "favorite sellers subscriptions from shop"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add_from_shop]

buyer_favouriteseller_add_from_subscribers_list:
  title: buyer_favouriteseller_add_from_subscribers_list
  description: "favorite sellers subscriptions from subscribers list"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add_from_subscribers_list]

buyer_favouriteseller_add_from_subscriptions_list:
  title: buyer_favouriteseller_add_from_subscriptions_list
  description: "favorite sellers subscriptions from subscriptions list"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add_from_subscriptions_list]

buyer_favouriteseller_delete_from_pp:
  title: buyer_favouriteseller_delete_from_pp
  description: "favorite sellers unsubscriptions from public profile"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete_from_pp]

buyer_favouriteseller_delete_from_fs:
  title: buyer_favouriteseller_delete_from_fs
  description: "favorite sellers unsubscriptions from favorite sellers"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete_from_fs]

buyer_favouriteseller_delete_from_shop:
  title: buyer_favouriteseller_delete_from_shop
  description: "favorite sellers unsubscriptions from shop"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete_from_shop]

buyer_favouriteseller_delete_from_subscribers_list:
  title: buyer_favouriteseller_delete_from_subscribers_list
  description: "favorite sellers unsubscriptions from subscribers list"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete_from_subscribers_list]

buyer_favouriteseller_delete_from_subscriptions_list:
  title: buyer_favouriteseller_delete_from_subscriptions_list
  description: "favorite sellers unsubscriptions from subscriptions list"
  tags: [i4, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete_from_subscriptions_list]

saved_searches_list_views:
  description: "number of saved searches list views per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_list_views]
    groupby: []
    
saved_searches_views:
  description: "number of saved searches views per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_views]
    groupby: []
    
saved_searches_removals:
  description: "number of saved searches removals per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_removals]
    groupby: []

saved_searches_notifications_ons:
  description: "number of saved searches notifications on per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_notifications_add]
    groupby: []
    
saved_searches_notifications_offs:
  description: "number of saved searches notifications off per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_notifications_delete]
    groupby: []
    
saved_searches_email_item_clicks:
  description: "number of saved searches email item clicks per buyer"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_email_item_clicks]
    groupby: []

public_profile_visit_from_fs:
  title: public_profile_visit_from_fs
  description: "public profile visits from favorite sellers"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_fs]

public_profile_visit_from_subscribers_list:
  title: public_profile_visit_from_subscribers_list
  description: "public profile visits from subscribers list"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_fs]

public_profile_visit_from_subscriptions_list:
  title: public_profile_visit_from_subscriptions_list
  description: "public profile visits from subscriptions list"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_subscriptions_list]

public_profile_visit_from_item:
  title: public_profile_visit_from_item
  description: "public profile visits from item view"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_item]

public_profile_visit_from_subscribers_messenger:
  title: public_profile_visit_from_subscribers_messenger
  description: "public profile visits from messenger"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_subscribers_messenger]

public_profile_visit_from_subscriptions_ratings:
  title: public_profile_visit_from_subscriptions_ratings
  description: "public profile visits from subcriptions ratings"
  tags: [i4, tns, tns_pppp, ratings, public_profile]
  numerator:
    observations: [public_profile_visit_from_subscriptions_ratings]

public_profile_visit_from_subscriptions_sharing:
  title: public_profile_visit_from_subscriptions_sharing
  description: "public profile visits from subscriptions sharings"
  tags: [i4, tns, tns_pppp, public_profile]
  numerator:
    observations: [public_profile_visit_from_subscriptions_sharing]


###############################################################################
# TNS :: Ratios
###############################################################################

authorized_visitors_share:
  numerator:
    observations: [page_views_authorized]
    groupby: [participant]
  denominator:
    observations: [page_views_all]
    groupby: [participant]
  description: "Доля авторизованных пользователей из активных, совершивших page view"

user_registration_cr:
  title: user_registration_conv
  description: "share of unique cookies with successful registration (not social) among those who had registration start screen"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]
  denominator:
    observations: [registration_start]

user_password_restore_cr:
  title: user_restore_conv
  description: "share of unique cookies with successful password restore among those who had restore start screen (including those who's changed platform while restoring by email)"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]
  denominator:
    observations: [restore_start]

user_auth_cr:
  title: user_auth_conv
  description: "share of unique cookies with successful authorization (phone/email/social) among those who had authorization start screen"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]
  denominator:
    observations: [auth_start]

user_enter_cr:
  title: user_enter_conv
  description: "share of unique cookies with successful authorization/registration/restore among those who had authorization start screen"
  tags: [i0, tns, tns_bulb, auth, enter]
  numerator:
    observations: [enter_success]
  denominator:
    observations: [auth_start]

auth_errors_per_user:
  description: "average number of authorization (phone/email/social) errors per cookie"
  tags: [i3, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_errors]
  denominator:
    observations: [auth_start]

registration_errors_per_user:
  description: "average number of registration (not social) errors per cookie"
  tags: [i3, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_errors]
  denominator:
    observations: [registration_start]

password_restore_errors_per_user:
  description: "average number of password restore errors per cookie"
  tags: [i4, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_errors]
  denominator:
    observations: [restore_start]

enter_errors_per_user:
  description: "average number of authorization/registration/restore errors per cookie"
  tags: [i3, tns, tns_bulb, enter]
  numerator:
    observations: [enter_errors]
  denominator:
    observations: [auth_start]

reviews_avg_score:
  description: "Reviews added average score"
  tags: [i4, tns, reviews, ratings, score]
  numerator:
    observations: [reviews_score_sum]
  denominator:
    observations: [reviews_added]

contacts_per_item_view_on_rating_1:
  description: "Contacts per item views on 1-star rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_1]
  denominator:
    observations: [itemviews_on_rating_1]

contacts_per_item_view_on_rating_2:
  description: "Contacts per item views on 2-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_2]
  denominator:
    observations: [itemviews_on_rating_2]

contacts_per_item_view_on_rating_3:
  description: "Contacts per item views on 3-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_3]
  denominator:
    observations: [itemviews_on_rating_3]

contacts_per_item_view_on_rating_4:
  description: "Contacts per item views on 4-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_4]
  denominator:
    observations: [itemviews_on_rating_4]

contacts_per_item_view_on_rating_5:
  description: "Contacts per item views on 5-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_5]
  denominator:
    observations: [itemviews_on_rating_5]

search_items_ratings_coverage:
  description: "Search items with rating per search items"
  tags: [i1, tns, reviews, ratings, search]
  numerator:
    observations: [search_items_with_rating]
  denominator:
    observations: [search_items]

searches_with_ratings_per_searches:
  description: "Searches with ratings per all searches"
  tags: [i4, tns, reviews, ratings, search]
  numerator:
    observations: [searches_with_rating]
  denominator:
    observations: [searches_serp]

active_buyers_with_fs_subscriptions_share:
  title: active_buyers_with_fs_subscriptions_share
  description: "active favsellers users with subscriptions share from total buyers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old]
    groupby: [participant]
  denominator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
    groupby: [participant]

active_sellers_with_fs_subscribers_share:
  title: active_sellers_with_fs_subscribers_share
  description: "sellers with subscriptions and active items share from sellers with active items"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old]
    groupby: [participant]
  denominator:
    observations: [active_items]
    groupby: [participant]

###############################################################################
# TNS :: User Totals
###############################################################################

daily_active_users:
  numerator:
    observations: [page_views_all]
    groupby: [participant]
  description: "Количество пользователей, совершивших хотя бы 1 page view"
  
daily_active_authorized_users:
  numerator:
    observations: [page_views_authorized]
    groupby: [participant]
  description: "Количество пользователей, совершивших хотя бы 1 page view"
  
page_views:
  numerator:
    observations: [page_views_all]
  description: "Количество page view"
  
authorized_page_views:
  numerator:
    observations: [page_views_authorized]
  description: "Количество page view в авторизованном состоянии"

password_restore_request_proportion:
  numerator:
    observations: [password_restore_requests]
    groupby: [participant]
  description: "1 если хотя бы один запрос на восстановление пароля, иначе 0"

password_restore_proportion:
  numerator:
    observations: [password_restore_count]
    groupby: [participant]

sign_in_proportion:
  numerator:
    observations: [sign_in_count]
    groupby: [participant]

public_profile_views_proportion:
  description: "Количество пользователей, заходивших в ПП"
  tags: [i2, public_profile, tns, rar]
  numerator:
    observations: [public_profile_views]
    groupby: [participant]

public_profile_active_items_paginations_proportion:
  description: "Количество пользователей, совершивших скролл по вкладке активных объявлений в ПП"
  tags: [i4, public_profile, tns, rar]  
  numerator:
    observations: [public_profile_active_items_paginations]
    groupby: [participant]

public_profile_closed_tabs_proportion:
  description: "Количество пользователей, просмотревших вкладку завершенных объявлений в ПП"
  tags: [i4, public_profile, tns, rar]  
  numerator:
    observations: [public_profile_closed_tabs]
    groupby: [participant]

public_profile_closed_items_paginations_proportion:
  description: "Количество пользователей, совершивших скролл по вкладке завершенных объявлений в ПП"
  tags: [i4, public_profile, tns, rar]  
  numerator:
    observations: [public_profile_closed_items_paginations]
    groupby: [participant]

user_auth_proportion:
  description: "share of unique cookies with successful authorization (phone/email/social) among test participants"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]
    groupby: [participant]

user_registration_proportion:
  description: "share of unique cookies with successful registration (not social) among test participants"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]
    groupby: [participant]

user_password_restore_proportion:
  description: "share of unique cookies with successful password restore among test participants"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]
    groupby: [participant]

user_enter_proportion:
  description: "share of unique cookies with successful authorization/registration/restore among test participants"
  tags: [i1, tns, tns_bulb, enter]
  numerator:
    observations: [enter_success]
    groupby: [participant]

registration_start_proportion:
  description: "share of unique cookies with registration start screen among test participants"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_start]
    groupby: [participant]

enter_start_proportion:
  description: "share of unique cookies with authorization start screen among test participants"
  tags: [critical, tns, tns_bulb, enter]
  numerator:
    observations: [auth_start]
    groupby: [participant]

restore_start_proportion:
  description: "share of unique cookies with password restore start screen among test participants"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_start]
    groupby: [participant]
    
users_favouriteseller_add:
  description: "number of participants, who subscribed on a seller"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add]
    groupby: [participant]
        
users_favouriteseller_delete:
  description: "number of participants, who unsubscribed from a seller"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_delete]
    groupby: [participant]
        
users_favouriteseller_page_open:
  description: "number of participants, who visited favourite sellers page"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [user_favouritesellers_open]
    groupby: [participant]
        
users_favouriteseller_notifications_on:
  description: "number of participants, who subscribed on favourite seller push-notifications"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_notifications_on]
    groupby: [participant]

users_favouriteseller_notifications_off:
  description: "number of participants, who unsubscribed from favourite seller push-notifications"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_notifications_off]
    groupby: [participant]
    
users_favouriteseller_activity:
  description: "number of participants, who performed any favourite seller activity"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [buyer_favouriteseller_add, buyer_favouriteseller_delete, user_favouritesellers_open, buyer_favouriteseller_notifications_on, buyer_favouriteseller_notifications_off]
    groupby: [participant]
    
users_saved_searches_list_view:
  description: "number of participants, who opened search subscriprions page"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_list_views]
    groupby: [participant]
    
users_saved_searches_view:
  description: "number of participants, who viewed a search subscriprion"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_views]
    groupby: [participant]
    
users_saved_searches_added:
  description: "number of participants, who added search subscriprion"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [saved_searches_added]
    groupby: [participant]
    
users_saved_searches_removed:
  description: "number of participants, who removed search subscriprion"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_removals]
    groupby: [participant]

users_saved_searches_notifications_on:
  description: "number of participants, who turned on search subscriprions notifications"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_notifications_add]
    groupby: [participant]
    
users_saved_searches_notifications_off:
  description: "number of participants, who turned off search subscriprions notifications"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_notifications_delete]
    groupby: [participant]
    
users_saved_searches_email_item_click:
  description: "number of participants, who clicked search subscriprions email"
  tags: [i4, tns, tns_bulb, ss]
  numerator:
    observations: [search_subscription_email_item_clicks]
    groupby: [participant]

 ######  ######## ##       ##       ######## ########
##    ## ##       ##       ##       ##       ##     ##
##       ##       ##       ##       ##       ##     ##
 ######  ######   ##       ##       ######   ########
      ## ##       ##       ##       ##       ##   ##
##    ## ##       ##       ##       ##       ##    ##
 ######  ######## ######## ######## ######## ##     ##

###############################################################################
# Seller :: Totals
###############################################################################

items_added:
  tags: [critical, sx, item_add]
  numerator:
    observations: [items_added]
  description: "Items created before payment and moderation, calculates for cookie and user"

items_add_started:
  tags: [i3, sx, item_add]
  numerator:
    observations: [items_add_started]
  description: "Item add start, calculates for cookie and user"

items_started:
  title: items_started
  tags: [sx, item_add, i1]
  numerator:
    observations: [items_started]
  description: "Items created and activated (paid)"

items_started_net:
  title: items_started_net
  tags: [sx, item_add, critical]
  numerator:
    observations: [items_started_net]
  description: "Items created, activated (paid) and allowed by moderation"

items_reactivated:
  title: items_reactivated
  tags: [sx, reactivation]
  numerator:
    observations: [items_reactivated]
  description: "Items reactivated"

items_reactivated_net:
  title: items_reactivated_net
  tags: [i1, sx, reactivation]
  numerator:
    observations: [items_reactivated_net]
  description: "Items reactivated and allowed by moderation"

items_sold_onavito:
  title: items_sold_onavito
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito]
  description: "Items closed with reason Sold on Avito by platform of last activation"

items_sold_notonavito:
  title: items_sold_notonavito
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_notonavito]
  description: "Items closed with reason Sold not on Avito by platform of last activation"

items_sold_onavito_total:
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito_total]
  description: "Items closed with reason Sold on Avito total"

items_sold_notonavito_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_notonavito_total]
  description: "Items closed with reason Sold not on Avito total"

items_sold_onavito_start_date:
  title: items_sold_onavito_start_date
  tags: [i2, user, sx, liquidity]
  numerator:
    observations: [items_sold_onavito]
  description: "Items closed with reason Sold on Avito for items created after exposure by platform of last activation"
  date_filter: [start]

items_sold_notonavito_start_date:
  title: items_sold_notonavito_start_date
  tags: [i4, user, sx, liquidity]
  numerator:
    observations: [items_sold_notonavito]
  description: "Items closed with reason Sold not on Avito for items created after exposure by platform of last activation"
  date_filter: [start]

items_sold_onavito_total_start_date:
  tags: [i2, user, sx, liquidity]
  numerator:
    observations: [items_sold_onavito_total]
  description: "Items closed with reason Sold on Avito for items created after exposure total"
  date_filter: [start]

items_sold_notonavito_total_start_date:
  tags: [i4, user, sx, liquidity]
  numerator:
    observations: [items_sold_notonavito_total]
  description: "Items closed with reason Sold not on Avito for items created after exposure total"
  date_filter: [start]

items_sold_another_reason:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason]

items_sold_another_reason_start_date:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason]   
  date_filter: [start]    

items_sold_another_reason_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason_total]

items_sold_another_reason_total_start_date:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason_total]   
  date_filter: [start]      

items_closed_no_answer:
  title: items_closed_no_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer]
  description: "Items closed without answer by platform of last activation" 
 
items_closed_no_answer_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer_total] 

items_closed_with_answer:
  title: items_closed_with_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer]
  description: "Items closed with answer by platform of last activation"

items_closed_with_answer_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer_total]  

items_closed_by_ttl:
  title: items_closed_by_ttl
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_by_ttl]
  description: "Items closed by ttl by platform of last activation"

items_closed_by_ttl_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_by_ttl_total]

items_archived:
  title: items_archived
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_archived]
  description: "Items archived (usualy new unpaid items) by platform of last activation"

items_closed_by_user:
  description: "Items closed by user by platform of last activation"
  tags: [sx, liquidity, i1]
  numerator:
    observations: [items_closed_by_user]

items_closed_by_user_total:
  description: "Items closed by user total"
  tags: [sx, liquidity, i1]
  numerator:
    observations: [items_closed_by_user_total]

active_items:
  description: "Active items by platform of last activation"
  tags: [sx, i1]
  numerator:
    observations: [active_items]

active_items_total:
  description: "Active items total"
  tags: [sx, i1]
  numerator:
    observations: [active_items_total]

seller_contacts:
  description: "Seller contacts by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]

seller_contacts_total:
  description: "Seller contacts total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts_total]

seller_contacts_start_date:
  description: "Seller contacts for items created after exposure by platfrom of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
  date_filter: [start]

seller_contacts_total_start_date:
  description: "Seller contacts for items created after exposure total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts_total]
  date_filter: [start]

lf_amount_net:
  description: "Lf amount without bonuses paid by seller"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]

lf_amount_net_start_date:
  description: "Lf amount without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
  date_filter: [start]

items_allowed:
  description: "Items allowed by moderation by platform of last activation"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed]

items_allowed_start_date:
  description: "Items created after exposure and allowed by moderation by platform of last activation"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed]
  date_filter: [start]

items_allowed_total:
  description: "Items allowed by moderation total"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed_total]

items_allowed_total_start_date:
  description: "Items created after exposure and allowed by moderation total"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed_total]
  date_filter: [start]

items_blocked_rejected:
  description: "Blocked or rejected items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected]

items_blocked_rejected_start_date:
  description: "Blocked or rejected items for items created after exposure by platfrorm of last activation"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected]
  date_filter: [start]

items_blocked_rejected_total:
  description: "Blocked or rejected items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected_total]

items_blocked_rejected_total_start_date:
  description: "Blocked or rejected items for items created after exposure total"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected_total]
  date_filter: [start]

items_blocked:
  description: "Blocked items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked]

items_blocked_total:
  description: "Blocked items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_total]

items_blocked_start_date:
  description: "Blocked items for items created after exposure by platform of last activation"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked]
  date_filter: [start]

items_blocked_total_start_date:
  description: "Blocked items total for items created after exposure"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_total]
  date_filter: [start]

items_rejected:
  description: "Rejected items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected]

items_rejected_total:
  description: "Rejected items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected_total]

items_rejected_start_date:
  description: "Rejected items created after exposure"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected]
  date_filter: [start]

items_rejected_total_start_date:
  description: "Rejected items created after exposure total"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_total]
  date_filter: [start]

items_category_changed_by_moderator:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator]  

items_category_changed_by_moderator_start_date:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator]  
  date_filter: [start]

items_category_changed_by_moderator_total:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator_total]  

items_category_changed_by_moderator_total_start_date:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator_total]  
  date_filter: [start]  

seller_favorites_added:
  description: "Favorites add"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]

seller_favorites_added_total:
  description: "Favorites add total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added_total]

seller_favorites_added_start_date:
  description: "Favorites add for items created after exposure by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
  date_filter: [start]

seller_favorites_added_start_date_total:
  description: "Favorites add for items created after exposure total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added_total]
  date_filter: [start]

seller_favorites_removed:
  description: "Favorites removed by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]

seller_favorites_removed_total:
  description: "Favorites removed total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed_total]

seller_favorites_removed_start_date:
  description: "Favorites removed for items created after exposure by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
  date_filter: [start]

item_chains_started:
  title: item_chains_started
  description: "Items add started"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_chains_started]

item_add_category_first_clicks:
  description: "Category select first click on item add"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_category_first_click]

item_add_category_last_clicks:
  description: "Category select last click on item add"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_category_last_click]

item_add_chains_form_input:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_form_input]

item_add_chains_confirm:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_confirm]    

items_created:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_item_create]    

seller_own_item_views:
  description: "Views own seller item"
  tags: [sx, i3]
  numerator:
    observations: [own_item_views]

seller_profile_views:
  description: "Views seller profile (list of his items)"
  tags: [sx, i3]
  numerator:
    observations: [seller_profile_views]

item_edits:
  description: "Items edits by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits]

item_edits_start_date:
  description: "Items edits (by platform of last activation) for items created after exposure"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits]
  date_filter: [start]

item_edit_starts:
  description: "Item edit starts by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts]

items_edit_started:
  description: "Items that started edit by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edit_started]

items_edited:
  description: "Items that edited by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited]

items_edited_start_date:
  description: "Items that edited (by platform of last activation) for items created after exposure"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited]
  date_filter: [start]

item_edit_starts_by_src:
  description: "Item edit starts by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts_by_src]

item_edits_by_src:
  description: "Item edits by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_by_src]

items_edit_started_by_src:
  description: "Items that started edit by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edit_started_by_src]

items_edited_by_src:
  description: "Items that edited by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_by_src]

helpdesk_seller_tickets:
  description: "Helpdesk tickets created by user"
  tags: [sx, support, i3]
  numerator:
    observations: [helpdesk_seller_tickets]

seller_items_favorites_added:
  description: "Items added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_items_favorites_added]

seller_items_favorites_removed:
  description: "Items removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_items_favorites_removed]

sellers_items_with_contacts:
  description: "Items with contacts by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [sellers_items_with_contacts]

sellers_items_with_contacts_total:
  description: "Items with contacts total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [sellers_items_with_contacts_total]

item_added_chains_3min:
  description: "Successful item add chains <= 3min"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_3min]

item_added_chains_3_6min:
  description: "Successful item add chains (3min,6min] long"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_3_6min]

item_added_chains_6_15min:
  description: "Successful item add chains (6min,15min] long"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_6_15min]

item_added_chains_15min:
  description: "Successful item add chains > 15min"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_15min]

items_started_free:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_free]

items_started_paid:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_paid]

items_started_wait:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_wait]    

items_reactivated_free:
  tags: [i3, sx, reactivation]
  numerator:
    observations: [items_reactivated_free]

items_reactivated_paid:
  tags: [i3, sx, reactivation]
  numerator:
    observations: [items_reactivated_paid]

items_reactivated_wait:
  tags: [i3, sx, reactivation]
  numerator:
    observations: [items_reactivated_wait]

items_blocked_user_blocked:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_user_blocked] 

items_blocked_duplicate:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_duplicate] 
    
items_rejected_phone_in_other_profile:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_phone_in_other_profile] 
    
items_rejected_wrong_cat:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_cat] 
    
items_rejected_pricelist:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_pricelist] 
    
items_rejected_wrong_item_type:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_item_type] 
    
items_rejected_contacts_in_description:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_contacts_in_description] 
    
items_rejected_wrong_vin:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_vin] 
    
items_rejected_wrong_price:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_price] 
    
items_rejected_contacts_on_photo:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_contacts_on_photo] 
    
items_rejected_year_of_issue:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_year_of_issue] 
    
items_rejected_mileage:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_mileage] 

item_edits_description:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_description]    
  
item_edits_title:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_title]    

item_edits_price:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_price]  

item_edits_photo_add:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_photo_add]

items_edited_description:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_description]

items_edited_title:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_title]

items_edited_price:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_price]

items_edited_photo_add:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_photo_add]

items_blocked_user_blocked_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_blocked_user_blocked] 
  date_filter: [start]

items_blocked_duplicate_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_blocked_duplicate] 
  date_filter: [start]
    
items_rejected_phone_in_other_profile_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_phone_in_other_profile] 
  date_filter: [start]

items_rejected_wrong_cat_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_cat] 
  date_filter: [start]

items_rejected_pricelist_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_pricelist] 
  date_filter: [start]

items_rejected_wrong_item_type_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_item_type] 
  date_filter: [start]
    
items_rejected_contacts_in_description_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_contacts_in_description] 
  date_filter: [start] 
    
items_rejected_wrong_vin_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_vin] 
  date_filter: [start]
    
items_rejected_wrong_price_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_price]
  date_filter: [start] 
    
items_rejected_contacts_on_photo_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_contacts_on_photo]
  date_filter: [start] 
    
items_rejected_year_of_issue_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_year_of_issue] 
  date_filter: [start]
    
items_rejected_mileage_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_mileage] 
  date_filter: [start]

item_edits_description_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_description]  
  date_filter: [start]  
  
item_edits_title_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_title]
  date_filter: [start]    

item_edits_price_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_price]
  date_filter: [start]  

item_edits_photo_add_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_photo_add]
  date_filter: [start]

items_edited_description_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited_description]
  date_filter: [start]

items_edited_title_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited_title]
  date_filter: [start]

items_edited_price_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited_price]
  date_filter: [start]

items_edited_photo_add_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited_photo_add]
  date_filter: [start]

###############################################################################
# Seller :: Ratios
###############################################################################

items_added_per_items_add_started:
  title: items_added_per_items_add_started
  tags: [i4, sx, ratio, item_add]
  numerator:
    observations: [items_added]
  denominator:
    observations: [items_add_started]

item_started_net_per_items_started:
  tags: [sx, item_add, ratio, i2]
  numerator:
    observations: [items_started_net]
  denominator:
    observations: [items_started]

item_started_net_per_items_add_started:
  tags: [sx, item_add, ratio,i3]
  numerator:
    observations: [items_started_net]
  denominator:
    observations: [items_add_started]

item_reactivated_net_per_items_reactivated:
  tags: [sx, reactivation, ratio, i2]
  numerator:
    observations: [items_reactivated_net]
  denominator:
    observations: [items_reactivated]

seller_contacts_per_items_started_net_start_date:
  description: "Seller contacts for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_contacts]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

items_sold_onavito_per_items_started_net_start_date:
  description: "Items closed with reason Sold on Avito for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [items_sold_onavito]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

items_closed_by_user_per_items_started_net_start_date:
  description: "Items closed by user for items created after exposure per item"
  tags: [sx, liquidity, ratio, i3]
  numerator:
    observations: [items_closed_by_user]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

seller_favorites_added_per_items_started_net_start_date:
  description: "Favorites add for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_favorites_added]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

seller_contacts_per_items_reactivated_net:
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_contacts]
  denominator:
    observations: [items_reactivated_net]

seller_favorites_added_items_reactivated_net:
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_favorites_added]
  denominator:
    observations: [items_reactivated_net]

items_sold_onavito_per_items_reactivated_net:
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [items_sold_onavito]
  denominator:
    observations: [items_reactivated_net]        

item_edits_per_items_started_net_start_date:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

item_edits_per_item_edit_starts:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits]
  denominator:
    observations: [item_edit_starts]

item_edits_per_item_edit_starts_by_src:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits_by_src]
  denominator:
    observations: [item_edit_starts_by_src]

items_edited_per_items_edit_started:
  tags: [sx, item_edit, ratio, i3]
  numerator:
    observations: [items_edited]
  denominator:
    observations: [items_edit_started]

items_edited_per_items_edit_started_by_src:
  tags: [sx, item_edit, ratio, i3]
  numerator:
    observations: [items_edited_by_src]
  denominator:
    observations: [items_edit_started_by_src]

item_added_chains_3min_share:
  tags: [sx, item_add, ratio, i4]
  numerator:
    observations: [item_added_chains_3min]
  denominator:
    observations: [item_added_chains_3min, item_added_chains_3_6min, item_added_chains_6_15min, item_added_chains_15min]

item_added_chains_3_6min_share:
  tags: [sx, item_add, ratio, i4]
  numerator:
    observations: [item_added_chains_3_6min]
  denominator:
    observations: [item_added_chains_3min, item_added_chains_3_6min, item_added_chains_6_15min, item_added_chains_15min]

item_added_chains_6_15min_share:
  tags: [sx, item_add, ratio, i4]
  numerator:
    observations: [item_added_chains_6_15min]
  denominator:
    observations: [item_added_chains_3min, item_added_chains_3_6min, item_added_chains_6_15min, item_added_chains_15min]

item_added_chains_15min_share:
  tags: [sx, item_add, ratio, i4]
  numerator:
    observations: [item_added_chains_15min]
  denominator:
    observations: [item_added_chains_3min, item_added_chains_3_6min, item_added_chains_6_15min, item_added_chains_15min]


###############################################################################
# Seller :: User Totals
###############################################################################

sellers_daily:
  title: users_item_added
  tags: [i0, sx, user, item_add]
  numerator:
    observations: [items_added]
    groupby: [participant]
  description: "Users item started"

users_item_add_started:
  title: users_item_add_started
  tags: [i3, sx, item_add]
  numerator:
    observations: [items_add_started]
    groupby: [participant]
  description: "Users item add started"

users_item_started:
  title: users_item_started
  tags: [sx, item_add, i1]
  numerator:
    observations: [items_started]
    groupby: [participant]
  description: "Users created and activated items"

items_started_net_conversion:
  title: users_item_started_net
  tags: [sx, item_add, i0]
  numerator:
    observations: [items_started_net]
    groupby: [participant]
  description: "Users created and activated (paid) items allowed by moderation"

users_item_reactivated:
  title: users_item_reactivated
  tags: [sx, reactivation, i3]
  numerator:
    observations: [items_started]
    groupby: [participant]
  description: "Users reactivated items"

items_reactivated_net_conversion:
  title: users_item_reactivated_net
  tags: [sx, reactivation, i1]
  numerator:
    observations: [items_reactivated_net]
    groupby: [participant]
  description: "Users reactivated items allowed by moderation"

items_sold_onavito_conversion:
  title: users_item_sold_onavito
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito]
    groupby: [participant]
  description: "Users closed items with reason Sold on Avito by platform of last activation"

users_item_sold_notonavito:
  title: users_item_sold_notonavito
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_notonavito]
    groupby: [participant]
  description: "Users closed items with reason Sold not on Avito by platform of last activation"

users_item_sold_onavito_total:
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito_total]
    groupby: [participant]
  description: "Users closed items with reason Sold on Avito total"

users_item_sold_notonavito_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_notonavito_total]
    groupby: [participant]
  description: "Users closed items with reason Sold not on Avito total"

users_item_sold_another_reason:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason]
    groupby: [participant]

users_item_sold_another_reason_start_date:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason]   
    groupby: [participant]
  date_filter: [start]    

users_item_sold_another_reason_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason_total]
    groupby: [participant]

users_item_sold_another_reason_total_start_date:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_sold_another_reason_total] 
    groupby: [participant]  
  date_filter: [start]    

users_item_closed_no_answer:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer]
    groupby: [participant]
  description: "Users who closed items without answer by platform of last activation"

users_item_closed_no_answer_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer_total]
    groupby: [participant]

users_item_closed_with_answer:
  title: users_item_closed_with_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer]
    groupby: [participant]
  description: "Users who closed items with answer by platform of last activation"

users_item_closed_with_answer_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer_total]
    groupby: [participant] 

users_item_closed_by_ttl:
  title: users_item_closed_by_ttl
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_by_ttl]
    groupby: [participant]
  description: "Users with items closed by ttl by platform of last activation"

users_item_closed_by_ttl_total:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_by_ttl_total]
    groupby: [participant]

users_item_archived:
  title: users_item_archived
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_archived]
    groupby: [participant]
  description: "Users with items archived (usualy new unpaid items) by platform of last activation"

users_item_closed_by_user:
  description: "Users who closed items by platfrom of last activation"
  tags: [sx, liquidity, i2]
  numerator:
    observations: [items_closed_by_user]
    groupby: [participant]

users_item_closed_by_user_total:
  description: "Users who closed items total"
  tags: [sx, liquidity, i2]
  numerator:
    observations: [items_closed_by_user_total]
    groupby: [participant]

users_active_items:
  description: "Users with active items by platform of last activation"
  tags: [sx, i2]
  numerator:
    observations: [active_items]
    groupby: [participant]

users_active_items_total:
  description: "Users with active items total"
  tags: [sx, i2]
  numerator:
    observations: [active_items_total]
    groupby: [participant]

sellers_with_contacts:
  description: "Sellers with contacted items by platform of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
    groupby: [participant]

sellers_with_contacts_total:
  description: "Sellers with contacted items total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts_total]
    groupby: [participant]

sellers_with_contacts_start_date:
  description: "Sellers with contacted items created after exposure by platfrom of last activation"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
    groupby: [participant]
  date_filter: [start]

sellers_with_contacts_total_start_date:
  description: "Sellers with contacted items created after exposure total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts_total]
    groupby: [participant]
  date_filter: [start]

users_lf:
  description: "Users paid LF"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
    groupby: [participant]

users_lf_start_date:
  description: "Users paid LF to new items"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
    groupby: [participant]
  date_filter: [start]

users_item_allowed:
  description: "Users with items allowed by moderation"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed]
    groupby: [participant]

users_item_allowed_start_date:
  description: "Users with items created after exposure and allowed by moderation"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed]
    groupby: [participant]
  date_filter: [start]

users_item_allowed_total:
  description: "Users with items allowed by moderation total"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed_total]
    groupby: [participant]

users_item_allowed_total_start_date:
  description: "Users with items created after exposure and allowed by moderation total"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed_total]
    groupby: [participant]
  date_filter: [start]

users_item_blocked_rejected:
  description: "Users with blocked or rejected items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected]
    groupby: [participant]

users_item_blocked_rejected_total:
  description: "Users with blocked or rejected items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected_total]
    groupby: [participant]

users_item_blocked_rejected_start_date:
  description: "Users with blocked or rejected items created after exposure by platfrorm of last activation"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected]
    groupby: [participant]
  date_filter: [start]

users_item_blocked_rejected_total_start_date:
  description: "Users with blocked or rejected items created after exposure total"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected_total]
    groupby: [participant]
  date_filter: [start]

users_item_blocked:
  description: "Users with blocked items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked]
    groupby: [participant]

users_item_blocked_total:
  description: "Users with blocked items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_total]
    groupby: [participant]

users_item_blocked_start_date:
  description: "Users with blocked items by platform of last activation"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked]
    groupby: [participant]
  date_filter: [start]

users_item_blocked_total_start_date:
  description: "Users with blocked items total for items created after exposure"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_total]
    groupby: [participant]
  date_filter: [start]

users_item_rejected:
  description: "Users with rejected items by platform of last activation"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected]
    groupby: [participant]

users_item_rejected_total:
  description: "Users with rejected items total"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected_total]
    groupby: [participant]

users_item_rejected_start_date:
  description: "Users with rejected items created after exposure by platform of last activation"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_total_start_date:
  description: "Users with rejected items created after exposure total"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_total]
    groupby: [participant]
  date_filter: [start]

users_item_category_changed_by_moderator:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator]
    groupby: [participant]

users_item_category_changed_by_moderator_total:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator_total]
    groupby: [participant]  

users_item_category_changed_by_moderator_start_date:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator]
    groupby: [participant]
  date_filter: [start]

users_item_category_changed_by_moderator_total_start_date:
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_category_changed_by_moderator_total]
    groupby: [participant]   
  date_filter: [start]   

users_item_chain_started:
  description: "Users started item add"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_chains_started]
    groupby: [participant]

sellers_favorite_added:
  description: "Sellers with items added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
    groupby: [participant]

sellers_favorite_added_total:
  description: "Sellers with items added to favorites total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added_total]
    groupby: [participant]

sellers_favorite_added_start_date:
  description: "Sellers with items created after exposure and added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
    groupby: [participant]
  date_filter: [start]

sellers_favorite_added_total_start_date:
  description: "Sellers with items created after exposure and added to favorites total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added_total]
    groupby: [participant]
  date_filter: [start]

sellers_favorite_removed:
  description: "Sellers with items removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
    groupby: [participant]

sellers_favorite_removed_total:
  description: "Sellers with items removed from favorites total"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed_total]
    groupby: [participant]

sellers_favorite_removed_start_date:
  description: "Sellers with items created after exposure and removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
    groupby: [participant]
  date_filter: [start]

users_item_add_category_first_click:
  description: "Users who made first click on item add category selection"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_category_first_click]
    groupby: [participant]

users_item_add_category_last_click:
  description: "Users who made last click on item add category selection"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_category_last_click]
    groupby: [participant]

users_item_add_form_input:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_form_input]
    groupby: [participant]

users_item_add_confirm:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_confirm]
    groupby: [participant]    

users_item_add_created:
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_chains_item_create]
    groupby: [participant]    

sellers_own_item_viewed:
  description: "Sellers viewed own items"
  tags: [sx, i3]
  numerator:
    observations: [own_item_views]
    groupby: [participant]

sellers_profile_viewed:
  description: "Sellers viewed profile (list of his items)"
  tags: [sx, i3]
  numerator:
    observations: [seller_profile_views]
    groupby: [participant]

users_item_edit:
  description: "Users edited items by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits]
    groupby: [participant]

users_item_edit_start_date:
  description: "Users edited items created after exposure by platform of last activation"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits]
    groupby: [participant]
  date_filter: [start]

users_item_edit_start:
  description: "Users started edit items by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts]
    groupby: [participant]

users_item_edit_start_by_src:
  description: "Item started edit items by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts_by_src]
    groupby: [participant]

users_item_edited_by_src:
  description: "Users edited items by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_by_src]
    groupby: [participant]

users_with_helpdesk_tickets:
  description: "Users created helpdesk tickets"
  tags: [sx, item_add, i4]
  numerator:
    observations: [helpdesk_seller_tickets]
    groupby: [participant]

users_with_item_added_chains_3min:
  description: "Users with successful item add chains <= 3min"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_3min]
    groupby: [participant]

users_with_item_added_chains_3_6min:
  description: "Users with successful item add chains (3min,6min] long"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_3_6min]
    groupby: [participant]

users_with_item_added_chains_6_15min:
  description: "Users with successful item add chains (6min,15min] long"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_6_15min]
    groupby: [participant]

users_with_item_added_chains_15min:
  description: "Users with successful item add chains > 15min"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_added_chains_15min]
    groupby: [participant]

users_item_started_free:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_free]
    groupby: [participant]

users_item_started_paid:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_paid]
    groupby: [participant]

users_item_started_wait:
  tags: [sx, item_add, i3]
  numerator:
    observations: [items_started_wait]
    groupby: [participant]

users_item_reactivated_free:
  tags: [sx, reactivation, i3]
  numerator:
    observations: [items_reactivated_free]
    groupby: [participant]

users_item_reactivated_paid:
  tags: [sx, reactivation, i3]
  numerator:
    observations: [items_reactivated_paid]
    groupby: [participant]

users_item_reactivated_wait:
  tags: [sx, reactivation, i3]
  numerator:
    observations: [items_reactivated_wait]
    groupby: [participant]        

users_item_blocked_user_blocked:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_user_blocked]
    groupby: [participant]

users_item_blocked_duplicate:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_duplicate]
    groupby: [participant]

users_item_rejected_phone_in_other_profile:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_phone_in_other_profile]
    groupby: [participant]

users_item_rejected_wrong_cat:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_cat]
    groupby: [participant]

users_item_rejected_pricelist:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_pricelist]
    groupby: [participant]

users_item_rejected_wrong_item_type:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_item_type]
    groupby: [participant]

users_item_rejected_contacts_in_description:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_contacts_in_description]
    groupby: [participant]

users_item_rejected_wrong_vin:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_vin]
    groupby: [participant]

users_item_rejected_wrong_price:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_wrong_price]
    groupby: [participant]

users_item_rejected_contacts_on_photo:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_contacts_on_photo]
    groupby: [participant]

users_item_rejected_year_of_issue:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_year_of_issue]
    groupby: [participant]

users_item_rejected_mileage:
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected_mileage]
    groupby: [participant]

users_item_edit_description:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_description]
    groupby: [participant]     

users_item_edit_title:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_title]
    groupby: [participant]     

users_item_edit_price:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_price]
    groupby: [participant]     

users_item_edit_photo_add:
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_photo_add]
    groupby: [participant]

users_item_blocked_user_blocked_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_blocked_user_blocked]
    groupby: [participant]
  date_filter: [start]

users_item_blocked_duplicate_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_blocked_duplicate]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_phone_in_other_profile_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_phone_in_other_profile]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_wrong_cat_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_cat]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_pricelist_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_pricelist]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_wrong_item_type_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_item_type]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_contacts_in_description_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_contacts_in_description]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_wrong_vin_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_vin]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_wrong_price_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_wrong_price]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_contacts_on_photo_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_contacts_on_photo]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_year_of_issue_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_year_of_issue]
    groupby: [participant]
  date_filter: [start]

users_item_rejected_mileage_start_date:
  tags: [sx, moderation, i4]
  numerator:
    observations: [items_rejected_mileage]
    groupby: [participant]
  date_filter: [start]

users_item_edit_description_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_description]
    groupby: [participant]  
  date_filter: [start]   

users_item_edit_title_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_title]
    groupby: [participant] 
  date_filter: [start]    

users_item_edit_price_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits_price]
    groupby: [participant]  
  date_filter: [start]   

users_item_edit_photo_add_start_date:
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited_photo_add]
    groupby: [participant]
  date_filter: [start]

##     ## ##    ## ########
###   ### ###   ##      ##
#### #### ####  ##     ##
## ### ## ## ## ##    ##
##     ## ##  ####   ##
##     ## ##   ###  ##
##     ## ##    ## ########

###############################################################################
# MNZ :: Totals
###############################################################################

listings_single_paid:
  numerator:
    observations: [listings_single_paid]

lf_revenue:
  title: lf_revenue
  description: "Listing fee revenue total recognized with bonuses"
  tags: [lf]
  numerator:
    observations: [lf_revenue]

lf_transactions_by_platform:
  title: lf_transactions_by_platform
  description: "Listing fee transactions total (single and lf from package)"
  tags: [lf]
  numerator:
    observations: [lf_transactions_by_platform]

lf_packages_item_add:
  title: lf_packages
  description: "Num of lf packages bought on item add"
  tags: [lf]
  numerator:
    observations: [lf_packs]

lf_revenue_single:
  title: lf_revenue_single
  description: "Listing fee revenue single on item add"
  tags: [lf]
  numerator:
    observations: [lf_revenue_single]

lf_transactions_single:
  title: lf_transactions_single
  description: "Listing fee single transactions"
  tags: [lf]
  numerator:
    observations: [lf_transactions_single]

express_cv_started:
  description: "Created express cv"
  tags: [cv]
  numerator:
    observations: [express_cv_started]

express_cv_started_net:
  description: "Created express cv allowed by moderation"
  tags: [cv]
  numerator:
    observations: [express_cv_started_net]

express_cv_published:
  description: "Created express cv which were not hide from employers"
  tags: [cv]
  numerator:
    observations: [express_cv_published]

express_cv_views:
  description: "Express cv views by platform of creation"
  tags: [cv]
  numerator:
    observations: [express_cv_views]

contacts_paid_express_cv:
  description: "Express cv paid contacts by platform of creation"
  tags: [cv]
  numerator:
    observations: [contacts_paid_express_cv]

contacts_paid_amount_express_cv:
  description: "Express cv paid contacts amount by platform of creation"
  tags: [cv]
  numerator:
    observations: [contacts_paid_amount_express_cv]
 
vas_amount:
  description: "Vas amount with bonuses paid by seller"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount]

vas_amount_start_date:
  description: "Vas amount with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  date_filter: [start]

vas_amount_net:
  description: "Vas amount without bonuses paid by seller"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]

vas_amount_net_start_date:
  description: "Vas amount without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  date_filter: [start]

users_vas:
  description: "Users applied VAS"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
    groupby: [participant]

users_vas_start_date:
  description: "Users applied VAS to items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
    groupby: [participant]
  date_filter: [start]

vas_transactions:
  title: vas_transactions
  description: "VAS products transactions"
  tags: [monetization, vas, i0, m42, tree]
  numerator:
    observations: [vas_transactions]

vas_transactions_start_date:
  title: vas_transactions_start_date
  description: "VAS products transactions for items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_transactions]
  date_filter: [start]

vas_amount_turbo:
  description: "vas amount (turbo) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]

vas_amount_turbo_start_date:
  description: "vas amount (turbo) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  date_filter: [start]

vas_amount_net_turbo:
  description: "vas amount (turbo) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]

vas_amount_net_turbo_start_date:
  description: "vas amount (turbo) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  date_filter: [start]

users_vas_turbo:
  description: "Users applied VAS (turbo)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
    groupby: [participant]

users_vas_turbo_start_date:
  description: "Users applied VAS (turbo) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
    groupby: [participant]
  date_filter: [start]

vas_transactions_turbo:
  title: vas_transactions_turbo
  description: "VAS (turbo) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_turbo]

vas_transactions_turbo_start_date:
  title: vas_transactions_turbo_start_date
  description: "VAS (turbo) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_amount_fast:
  description: "vas amount (fast) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]

vas_amount_fast_start_date:
  description: "vas amount (fast) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  date_filter: [start]

vas_amount_net_fast:
  description: "vas amount (fast) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]

vas_amount_net_fast_start_date:
  description: "vas amount (fast) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  date_filter: [start]

users_vas_fast:
  description: "Users applied VAS (fast)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
    groupby: [participant]

users_vas_fast_start_date:
  description: "Users applied VAS (fast) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
    groupby: [participant]
  date_filter: [start]

vas_transactions_fast:
  title: vas_transactions_fast
  description: "VAS (fast) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_fast]

vas_transactions_fast_start_date:
  title: vas_transactions_fast_start_date
  description: "VAS (fast) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_amount_pushup:
  description: "vas amount (pushup) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]

vas_amount_pushup_start_date:
  description: "vas amount (pushup) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  date_filter: [start]

vas_amount_net_pushup:
  description: "vas amount (pushup) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]

vas_amount_net_pushup_start_date:
  description: "vas amount (pushup) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  date_filter: [start]

users_vas_pushup:
  description: "Users applied VAS (pushup)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
    groupby: [participant]

users_vas_pushup_start_date:
  description: "Users applied VAS (pushup) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
    groupby: [participant]
  date_filter: [start]

vas_transactions_pushup:
  title: vas_transactions_pushup
  description: "VAS (pushup) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_pushup]

vas_transactions_pushup_start_date:
  title: vas_transactions_pushup_start_date
  description: "VAS (pushup) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_amount_premium:
  description: "vas amount (premium) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]

vas_amount_premium_start_date:
  description: "vas amount (premium) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  date_filter: [start]

vas_amount_net_premium:
  description: "vas amount (premium) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]

vas_amount_net_premium_start_date:
  description: "vas amount (premium) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  date_filter: [start]

users_vas_premium:
  description: "Users applied VAS (premium)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
    groupby: [participant]

users_vas_premium_start_date:
  description: "Users applied VAS (premium) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
    groupby: [participant]
  date_filter: [start]

vas_transactions_premium:
  title: vas_transactions_premium
  description: "VAS (premium) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_premium]

vas_transactions_premium_start_date:
  title: vas_transactions_premium_start_date
  description: "VAS (premium) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_amount_vip:
  description: "vas amount (vip) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]

vas_amount_vip_start_date:
  description: "vas amount (vip) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  date_filter: [start]

vas_amount_net_vip:
  description: "vas amount (vip) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]

vas_amount_net_vip_start_date:
  description: "vas amount (vip) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  date_filter: [start]

users_vas_vip:
  description: "Users applied VAS (vip)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
    groupby: [participant]

users_vas_vip_start_date:
  description: "Users applied VAS (vip) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
    groupby: [participant]
  date_filter: [start]

vas_transactions_vip:
  title: vas_transactions_vip
  description: "VAS (vip) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_vip]

vas_transactions_vip_start_date:
  title: vas_transactions_vip_start_date
  description: "VAS (vip) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_amount_xl:
  description: "vas amount (xl) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]

vas_amount_xl_start_date:
  description: "vas amount (xl) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  date_filter: [start]

vas_amount_net_xl:
  description: "vas amount (xl) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]

vas_amount_net_xl_start_date:
  description: "vas amount (xl) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  date_filter: [start]

users_vas_xl:
  description: "Users applied VAS (xl)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
    groupby: [participant]

users_vas_xl_start_date:
  description: "Users applied VAS (xl) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
    groupby: [participant]
  date_filter: [start]

vas_transactions_xl:
  title: vas_transactions_xl
  description: "VAS (xl) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_xl]

vas_transactions_xl_start_date:
  title: vas_transactions_xl_start_date
  description: "VAS (xl) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_amount_highlight:
  description: "vas amount (highlight) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]

vas_amount_highlight_start_date:
  description: "vas amount (highlight) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  date_filter: [start]

vas_amount_net_highlight:
  description: "vas amount (highlight) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]

vas_amount_net_highlight_start_date:
  description: "vas amount (highlight) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  date_filter: [start]

users_vas_highlight:
  description: "Users applied VAS (highlight)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
    groupby: [participant]

users_vas_highlight_start_date:
  description: "Users applied VAS (highlight) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
    groupby: [participant]
  date_filter: [start]

vas_transactions_highlight:
  title: vas_transactions_highlight
  description: "VAS (highlight) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_highlight]

vas_transactions_highlight_start_date:
  title: vas_transactions_highlight_start_date
  description: "VAS (highlight) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_amount_activation:
  description: "vas amount (activation) with bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]

vas_amount_activation_start_date:
  description: "vas amount (activation) with bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  date_filter: [start]

vas_amount_net_activation:
  description: "vas amount (activation) without bonuses paid by seller"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]

vas_amount_net_activation_start_date:
  description: "vas amount (activation) without bonuses paid by seller for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  date_filter: [start]

users_vas_activation:
  description: "Users applied VAS (activation)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
    groupby: [participant]

users_vas_activation_start_date:
  description: "Users applied VAS (activation) to items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
    groupby: [participant]
  date_filter: [start]

vas_transactions_activation:
  title: vas_transactions_activation
  description: "VAS (activation) products transactions"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_activation]

vas_transactions_activation_start_date:
  title: vas_transactions_activation_start_date
  description: "VAS (activation) products transactions for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_transactions_activation]
  date_filter: [start]


###############################################################################
# MNZ :: Ratios
###############################################################################

payment_method_pv_per_listing_type_pv:
  numerator:
    observations: [pages_payment_method]
  denominator:
    observations: [pages_listing_type]

success_payments_per_listing_type_pv:
  numerator:
    observations: [pages_success_payment]
  denominator:
    observations: [pages_listing_type]

payment_page_per_lf_show_block:
  title: payment_page_per_lf_show
  description: "Conversion from lf block show to payment page"
  tags: [lf]
  numerator:
    observations: [lf_payment_page_events]
  denominator:
    observations: [lf_block_show_events]

item_add_success_per_lf_show_block:
  title: item_add_per_lf_show
  description: "Conversion from lf block show to success item add"
  tags: [lf]
  numerator:
    observations: [final_page_events]
  denominator:
    observations: [lf_block_show_events]

express_cv_form_open_item_add_conversion:
  description: "Conversion from express cv form open to item add"
  tags: [cv]
  numerator:
    observations: [express_cv_started]
  denominator:
    observations: [express_cv_form_open]

express_cv_allowed_conversion:
  description: "Conversion from created express cv to allowed by moderation"
  tags: [cv]
  numerator:
    observations: [express_cv_started_net]
  denominator:
    observations: [express_cv_started]

vas_avo_net:
  title: vas_avo_net
  description: "Vas amount without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  denominator:
    observations: [vas_transactions]

vas_avo_net_start_date:
  title: vas_avo_net_start_date
  description: "Vas amount without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  denominator:
    observations: [vas_transactions]
  date_filter: [start]

vas_avo:
  title: vas_avo
  description: "Vas amount with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  denominator:
    observations: [vas_transactions]

vas_avo_start_date:
  title: vas_avo_start_date
  description: "Vas amount with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  denominator:
    observations: [vas_transactions]
  date_filter: [start]

vas_avo_net_turbo:
  title: vas_avo_net_turbo
  description: "vas amount (turbo) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  denominator:
    observations: [vas_transactions_turbo]

vas_avo_net_turbo_start_date:
  title: vas_avo_net_turbo_start_date
  description: "vas amount (turbo) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  denominator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_avo_turbo:
  title: vas_avo_turbo
  description: "vas amount (turbo) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  denominator:
    observations: [vas_transactions_turbo]

vas_avo_turbo_start_date:
  title: vas_avo_turbo_start_date
  description: "vas amount (turbo) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  denominator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_avo_net_fast:
  title: vas_avo_net_fast
  description: "vas amount (fast) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  denominator:
    observations: [vas_transactions_fast]

vas_avo_net_fast_start_date:
  title: vas_avo_net_fast_start_date
  description: "vas amount (fast) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  denominator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_avo_fast:
  title: vas_avo_fast
  description: "vas amount (fast) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  denominator:
    observations: [vas_transactions_fast]

vas_avo_fast_start_date:
  title: vas_avo_fast_start_date
  description: "vas amount (fast) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  denominator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_avo_net_pushup:
  title: vas_avo_net_pushup
  description: "vas amount (pushup) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  denominator:
    observations: [vas_transactions_pushup]

vas_avo_net_pushup_start_date:
  title: vas_avo_net_pushup_start_date
  description: "vas amount (pushup) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  denominator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_avo_pushup:
  title: vas_avo_pushup
  description: "vas amount (pushup) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  denominator:
    observations: [vas_transactions_pushup]

vas_avo_pushup_start_date:
  title: vas_avo_pushup_start_date
  description: "vas amount (pushup) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  denominator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_avo_net_premium:
  title: vas_avo_net_premium
  description: "vas amount (premium) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  denominator:
    observations: [vas_transactions_premium]

vas_avo_net_premium_start_date:
  title: vas_avo_net_premium_start_date
  description: "vas amount (premium) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  denominator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_avo_premium:
  title: vas_avo_premium
  description: "vas amount (premium) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  denominator:
    observations: [vas_transactions_premium]

vas_avo_premium_start_date:
  title: vas_avo_premium_start_date
  description: "vas amount (premium) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  denominator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_avo_net_vip:
  title: vas_avo_net_vip
  description: "vas amount (vip) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  denominator:
    observations: [vas_transactions_vip]

vas_avo_net_vip_start_date:
  title: vas_avo_net_vip_start_date
  description: "vas amount (vip) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  denominator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_avo_vip:
  title: vas_avo_vip
  description: "vas amount (vip) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  denominator:
    observations: [vas_transactions_vip]

vas_avo_vip_start_date:
  title: vas_avo_vip_start_date
  description: "vas amount (vip) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  denominator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_avo_net_xl:
  title: vas_avo_net_xl
  description: "vas amount (xl) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  denominator:
    observations: [vas_transactions_xl]

vas_avo_net_xl_start_date:
  title: vas_avo_net_xl_start_date
  description: "vas amount (xl) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  denominator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_avo_xl:
  title: vas_avo_xl
  description: "vas amount (xl) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  denominator:
    observations: [vas_transactions_xl]

vas_avo_xl_start_date:
  title: vas_avo_xl_start_date
  description: "vas amount (xl) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  denominator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_avo_net_highlight:
  title: vas_avo_net_highlight
  description: "vas amount (highlight) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  denominator:
    observations: [vas_transactions_highlight]

vas_avo_net_highlight_start_date:
  title: vas_avo_net_highlight_start_date
  description: "vas amount (highlight) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  denominator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_avo_highlight:
  title: vas_avo_highlight
  description: "vas amount (highlight) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  denominator:
    observations: [vas_transactions_highlight]

vas_avo_highlight_start_date:
  title: vas_avo_highlight_start_date
  description: "vas amount (highlight) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  denominator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_avo_net_activation:
  title: vas_avo_net_activation
  description: "vas amount (activation) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  denominator:
    observations: [vas_transactions_activation]

vas_avo_net_activation_start_date:
  title: vas_avo_net_activation_start_date
  description: "vas amount (activation) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  denominator:
    observations: [vas_transactions_activation]
  date_filter: [start]

vas_avo_activation:
  title: vas_avo_activation
  description: "vas amount (activation) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  denominator:
    observations: [vas_transactions_activation]

vas_avo_activation_start_date:
  title: vas_avo_activation_start_date
  description: "vas amount (activation) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  denominator:
    observations: [vas_transactions_activation]
  date_filter: [start]

  
########  #### ##       ##       #### ##    ##  ######
##     ##  ##  ##       ##        ##  ###   ## ##    ##
##     ##  ##  ##       ##        ##  ####  ## ##
########   ##  ##       ##        ##  ## ## ## ##   ####
##     ##  ##  ##       ##        ##  ##  #### ##    ##
##     ##  ##  ##       ##        ##  ##   ### ##    ##
########  #### ######## ######## #### ##    ##  ######

###############################################################################
# Billing :: Totals
###############################################################################

payment_method_page:
  title: payment_method_page
  tags: [payments]
  numerator:
    observations: [payment_method_page]
  description: "Number of started payment sessions"

payment_method_choice:
  title: payment_method_choice
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
  description: "Number of payment sessions with selected payment method"

successful_payment:
  title: successful_payment
  tags: [payments]
  numerator:
    observations: [successful_payment]
  description: "Number of successful payment sessions"

payment_method_page_cv:
  title: payment_method_page_CV
  tags: [payments]
  numerator:
    observations: [payment_method_page_CV]
  description: "Number of started CV payment sessions"

payment_method_choice_cv:
  title: payment_method_choice_CV
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
  description: "Number of CV payment sessions with selected payment method"

successful_payment_cv:
  title: successful_payment_CV
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
  description: "Number of successful CV payment sessions"

payment_method_page_services:
  title: payment_method_page_services
  tags: [payments]
  numerator:
    observations: [payment_method_page_services]
    groupby: []
  description: "Number of started payment sessions except wallet pay in"

payment_method_choice_services:
  title: payment_method_choice_services
  tags: [payments]
  numerator:
    observations: [payment_method_choice_services]
    groupby: []
  description: "Number of payment sessions with selected payment method except wallet pay in"

successful_payment_services:
  title: successful_payment_services
  tags: [payments]
  numerator: 
    observations: [successful_payment_services]
    groupby: []
  description: "Number of successful payment sessions except wallet pay in"

successful_payment_services_amount:
  title: successful_payment_services_amount
  tags: [payments]
  numerator: 
    observations: [services_amount]
    groupby: []
  description: "Amount of successful payments except wallet pay in"

###############################################################################
# Billing :: Ratios
###############################################################################

successful_payment_share:
  description: "Share of successful payments step3/step1"
  tags: [payments, m42]
  numerator:
    observations: [successful_payment]
  denominator:
    observations: [payment_method_page]

successful_payment_share_proportion:
  description: "Share of successful payments step3/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [successful_payment]
    groupby: [participant]
  denominator:
    observations: [payment_method_page]
    groupby: [participant]

selected_payment_method_share:
  description: "Share of payment sessions with selected payment method step2/step1"
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
  denominator:
    observations: [payment_method_page]

selected_payment_method_share_proportion:
  description: "Share of payment sessions with selected payment method step2/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
    groupby: [participant]
  denominator:
    observations: [payment_method_page]
    groupby: [participant]

successful_payment_share_cv:
  description: "Share of successful payments CV step3/step1"
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
  denominator:
    observations: [payment_method_page_CV]

successful_payment_share_proportion_cv:
  description: "Share of successful payments CV step3/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_CV]
    groupby: [participant]

selected_payment_method_share_cv:
  description: "Share of CV payment sessions with selected payment method step2/step1"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
  denominator:
    observations: [payment_method_page_CV]

selected_payment_method_share_proportion_cv:
  description: "Share of CV payment sessions with selected payment method step2/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_CV]
    groupby: [participant]

successful_payment_share_services:
  description: "Share of successful payments except wallet pay in step3/step1"
  tags: [payments]
  numerator:
    observations: [successful_payment_services]
    groupby: []
  denominator:
    observations: [payment_method_page_services]
    groupby: []

successful_payment_share_proportion_services:
  description: "Share of successful payments except wallet pay in step3/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [successful_payment_services]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_services]
    groupby: [participant]

selected_payment_method_share_services:
  description: "Share of payment sessions except wallet pay in with selected payment method step2/step1"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_services]
    groupby: []
  denominator:
    observations: [payment_method_page_services]
    groupby: []

selected_payment_method_share_proportion_services:
  description: "Share of payment sessions except wallet pay in with selected payment method step2/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_services]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_services]
    groupby: [participant]

main_payment_methods_share:
  description: "Share of successful payments by cards and SBOL"
  tags: [payments]
  numerator:
    observations: [successful_payment_card, successful_payment_SBOL]
  denominator:
    observations: [successful_payment]


 ######   #######   ######         ######   #######  ########  ########
##    ## ##     ## ##    ##       ##    ## ##     ## ##     ## ##
##              ## ##             ##       ##     ## ##     ## ##
##        #######  ##             ##       ##     ## ########  ######
##       ##        ##             ##       ##     ## ##   ##   ##
##    ## ##        ##    ##       ##    ## ##     ## ##    ##  ##
 ######  #########  ######         ######   #######  ##     ## ########

###############################################################################
# C2C Core :: Totals
###############################################################################

new_listers:
  title: new_listers
  tags: [i1]
  numerator:
    observations: [new_listers]
  description: "Users who started their first item in logical category. Additive across logical categories"

active_listers:
  title: active_listers
  tags: [i0, m42, tree]
  numerator:
    observations: [active_listers]
  description: "Users who have at least 1 active item in a logical category. Additive across logical_category"

activated_listers:
  title: activated_listers
  tags: [i1, m42, tree]
  numerator:
    observations: [activated_listers]
  description: "Active listers in (logical_category X user_segment) that were not active yesterday. Additive across logical_category, user_segment"

activated_listers_changed_segment:
  title: activated_listers_changed_segment
  tags: [i2, m42, tree]
  numerator:
    observations: [activated_listers_changed_segment]
  description: "Active listers in (logical_category X user_segment) that had a different user_segment in this logical_category yesterday. Additive across logical_category, user_segment"

returned_listers:
  title: returned_listers
  tags: [i2, m42, tree]
  numerator:
    observations: [returned_listers]
  description: "Activated listers in (logical_category X user_segment) that aren't new listers. Additive across logical categories"

deactivated_listers:
  title: deactivated_listers
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers]
  description: "Users who were active listers in (logical_category X user_segment) yesterday but aren't active today. Additive across logical_category, user_segment"

deactivated_listers_voluntary:
  title: deactivated_listers_voluntary
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_voluntary]
  description: "Listers that were deactivated because their last active item was closed by user. Additive across logical_category, user_segment"

deactivated_listers_involuntary:
  title: deactivated_listers_involuntary
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_involuntary]
  description: "Listers that were deactivated because their last active item was blocked/rejected. Additive across logical_category, user_segment"

deactivated_listers_changed_segment:
  title: deactivated_listers_changed_segment
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_changed_segment]
  description: "Listers that were deactivated because they changed user_segment. Additive across logical_category, user_segment"

new_buyers:
  title: new_buyers
  tags: [i1, m42, tree]
  numerator:
    observations: [new_buyers]
  description: "Cookies that made their first contact in a logical_category. Additive across logical_category"

returned_buyers:
  title: returned_buyers
  tags: [i1, m42, tree]
  numerator:
    observations: [returned_buyers]
  description: "Cookies that made contact in a logical_category that are not new buyers. Additive across logical_category"

contacts_canonical:
  title: contacts_canonical
  tags: [i1, m42, tree]
  numerator:
    observations: [contacts_csc_cannonical]
  description: "First contact of cookie per item/day. Additive across all dimensions. Source is dma.contacts_stream_observation"

buyers_canonical:
  title: buyers_canonical
  tags: [i0, m42, tree]
  numerator:
    observations: [contacts_csc_cannonical]
    groupby: [participant]
  description: "Buyers from dma.contacts_stream_observation. Source of buyers from Big10.Source is dma.contacts_stream_observation"

 ######  ##     ## ########  ########   #######  ########  ########
##    ## ##     ## ##     ## ##     ## ##     ## ##     ##    ##
##       ##     ## ##     ## ##     ## ##     ## ##     ##    ##
 ######  ##     ## ########  ########  ##     ## ########     ##
      ## ##     ## ##        ##        ##     ## ##   ##      ##
##    ## ##     ## ##        ##        ##     ## ##    ##     ##
 ######   #######  ##        ##         #######  ##     ##    ##

###############################################################################
# Support Metrics
###############################################################################

support_email_tickets_created:
  title: email_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_email_created]
    groupby: []
  description: "Number of created tickets via email"

support_email_tickets_creators:
  title: email_tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_email_created]
    groupby: [participant]
  description: "Number of users created tickets via email"

support_wizard_tickets_created:
  title: hc_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created]
    groupby: []
  description: "Number of created tickets via HelpCenter form: Desktop/MAV/iOs/Android"

support_wizard_tickets_creators:
  title: hc_tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created]
    groupby: [participant]
  description: "Number of users created tickets via HelpCenter form: Desktop/MAV/iOs/Android"

support_email_wizard_tickets_created:
  title: tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created, ticket_email_created]
    groupby: []
  description: "Number of created tickets via HelpCenter and email"

support_email_wizard_tickets_creators:
  title: tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created, ticket_email_created]
    groupby: [participant]
  description: "Number of users created tickets via HelpCenter and email"

support_ticket_with_changed_problem_rate:
  title: tickets_changed_problem
  tags: [support, other]
  numerator:
    observations: [tickets_problem_changed]
  denominator:
    observations: [ticket_wizard_created, ticket_email_created]
  description: "Ratio of tickets with changed problem"

support_callcenter_calls:
  title: callcenter_calls
  tags: [support, other]
  numerator:
    observations: [callcenter_calls]
  description: "Number of calls to Support Callcenter"

support_callcenter_callers:
  title: callcenter_callers
  tags: [support, other]
  numerator:
    observations: [callcenter_calls]
    groupby: [participant]
  description: "Number of callers to Support Callcenter"

support_helpcenter_wizard_visits:
  title: helpcenter_wizard_visits
  tags: [support, other]
  numerator:
    observations: [helpcenter_wizard_sessions]
  description: "Number of sessions in HC + Wizard"

support_helpcenter_wizard_visitors:
  title: helpcenter_wizard_visitors
  tags: [support, other]
  numerator:
    observations: [helpcenter_wizard_sessions]
    groupby: [participant]
  description: "Number of visitors in HC + Wizard"

support_wizard_visits:
  title: wizard_visits
  tags: [support, other]
  numerator:
    observations: [wizard_sessions]
  description: "Number of sessions in Wizard"

support_wizard_visitors:
  title: wizard_visitors
  tags: [support, other]
  numerator:
    observations: [wizard_sessions]
    groupby: [participant]
  description: "Number of visitors in Wizard"

support_helpcenter_article_views:
  title: helpcenter_article_views
  tags: [support, other]
  numerator:
    observations: [article_views]
  description: "Number of article views in HC & Wizard"

support_helpcenter_article_viewers:
  title: helpcenter_article_viewers
  tags: [support, other]
  numerator:
    observations: [article_views]
    groupby: [participant]
  description: "Number of article viewers in HC & Wizard"

support_web_tickets_created:
  title: hc_web_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_web_created]
    groupby: []
  description: "Number of created tickets via HelpCenter from: WEB"

support_android_tickets_created:
  title: hc_android_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_android_created]
    groupby: []
  description: "Number of created tickets via HelpCenter from: Android"

support_ios_tickets_created:
  title: hc_ios_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_ios_created]
    groupby: []
  description: "Number of created tickets via HelpCenter from: iOs"

support_mav_tickets_created:
  title: hc_mav_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_mav_created]
    groupby: []
  description: "Number of created tickets via HelpCenter from: MAV"

support_web_reject_tickets_created:
  title: hc_web_reject_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_reject_web_created]
    groupby: []
  description: "Number of created tickets moder_reject via HelpCenter from: WEB"

support_android_reject_tickets_created:
  title: hc_android_reject_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_reject_android_created]
    groupby: []
  description: "Number of created tickets moder_reject via HelpCenter from: Android"

support_ios_reject_tickets_created:
  title: hc_ios_reject_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_reject_ios_created]
    groupby: []
  description: "Number of created tickets moder_reject via HelpCenter from: iOs"

support_mav_reject_tickets_created:
  title: hc_mav_reject_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_reject_mav_created]
    groupby: []
  description: "Number of created tickets moder_reject via HelpCenter from: MAV"

support_web_block_tickets_created:
  title: hc_web_block_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_web_created]
    groupby: []
  description: "Number of created tickets moder_block via HelpCenter from: WEB"

support_android_block_tickets_created:
  title: hc_android_block_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_android_created]
    groupby: []
  description: "Number of created tickets moder_block via HelpCenter from: Android"

support_ios_block_tickets_created:
  title: hc_ios_block_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_ios_created]
    groupby: []
  description: "Number of created tickets moder_block via HelpCenter from: iOs"

support_mav_block_tickets_created:
  title: hc_mav_block_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_mav_created]
    groupby: []
  description: "Number of created tickets moder_block via HelpCenter from: MAV"

support_web_moder_tickets_created:
  title: hc_web_moder_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_web_created, ticket_item_reject_web_created]
    groupby: []
  description: "Number of created tickets moder via HelpCenter from: WEB"

support_android_moder_tickets_created:
  title: hc_android_moder_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_android_created, ticket_item_reject_android_created]
    groupby: []
  description: "Number of created tickets moder via HelpCenter from: Android"

support_ios_moder_tickets_created:
  title: hc_ios_moder_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_ios_created, ticket_item_reject_ios_created]
    groupby: []
  description: "Number of created tickets moder via HelpCenter from: iOs"

support_mav_moder_tickets_created:
  title: hc_mav_moder_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_mav_created, ticket_item_reject_mav_created]
    groupby: []
  description: "Number of created tickets moder via HelpCenter from: MAV"

support_hc_moder_tickets_created:
  title: hc_moder_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_web_created, ticket_item_reject_web_created, ticket_item_block_android_created, ticket_item_reject_android_created, ticket_item_block_ios_created, ticket_item_reject_ios_created, ticket_item_block_mav_created, ticket_item_reject_mav_created]
    groupby: []
  description: "Number of created tickets moder via HelpCenter from: WEB/MAV/iOs/Android"

support_hc_block_tickets_created:
  title: hc_block_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_block_web_created, ticket_item_block_android_created, ticket_item_block_ios_created, ticket_item_block_mav_created]
    groupby: []
  description: "Number of created tickets moder_block via HelpCenter from: WEB/MAV/iOs/Android"

support_hc_reject_tickets_created:
  title: hc_reject_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_item_reject_web_created, ticket_item_reject_android_created, ticket_item_reject_ios_created, ticket_item_reject_mav_created]
    groupby: []
  description: "Number of created tickets moder_reject via HelpCenter from: WEB/MAV/iOs/Android"

support_hc_article_like:
  title: hc_article_like
  tags: [support, other]
  numerator:
    observations: [helpcenter_article_like]
    groupby: []
  description: "Likes on HC articles"

support_hc_article_dislike:
  title: hc_article_dislike
  tags: [support, other]
  numerator:
    observations: [helpcenter_article_dislike]
    groupby: []
  description: "Dislikes on HC articles"

support_hc_article_marks:
  title: hc_article_marks
  tags: [support, other]
  numerator:
    observations: [helpcenter_article_like, helpcenter_article_dislike]
    groupby: []
  description: "Total number of likes&dislikes on HC articles"

support_hc_article_like_rate:
  title: hc_article_like_rate
  tags: [support, other]
  numerator:
    observations: [helpcenter_article_like]
    groupby: []
  denominator:
    observations: [helpcenter_article_like, helpcenter_article_dislike]
    groupby: []
  description: "Ratio of likes between all responses in HC articles"
  
support_hc_ticket_platform_created:
  title: hc_ticket_by_platform
  tags: [support, other]
  numerator:
    observations: [ticket_platform_created]
    groupby: []
  description: "HC created tickets by platform"



########   #######  ########        ######   #######  ########  ########
##     ## ##     ## ##     ##      ##    ## ##     ## ##     ## ##
##     ##        ## ##     ##      ##       ##     ## ##     ## ##
########    ##      ########       ##       ##     ## ########  ######
##     ## ##        ##     ##      ##       ##     ## ##   ##   ##
##     ## ##        ##     ##      ##    ## ##     ## ##    ##  ##
########  ######### ########        ######   #######  ##     ## ########

###############################################################################
# B2B Core :: Totals
###############################################################################

paid_contact_amount_net_adj:
  title: paid_contact_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [paid_contact_amount_net_adj]
  description: "Net revenue from paid contacts without VAT"

autoteka_amount_net_adj:
  title: autoteka_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [autoteka_amount_net_adj]
  description: "Net revenue from autoteka product without VAT"

domofond_amount_net_adj:
  title: domofond_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [domofond_amount_net_adj]
  description: "Net revenue from domofond products without VAT"

delivery_amount_net_adj:
  title: delivery_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [delivery_amount_net_adj]
  description: "Net revenue from delivery products without VAT"

advertisement_amount_net_adj:
  title: advertisement_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [advertisement_amount_net_adj]
  description: "Net revenue from advertising products without VAT"

vas_amount_net_adj:
  title: vas_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_amount_net_adj]
  description: "Net revenue from VAS products without VAT"

lf_amount_net_adj:
  title: lf_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_amount_net_adj]
  description: "Net revenue from LF products without VAT"

subs_amount_net_adj:
  title: subs_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_amount_net_adj]
  description: "Net revenue from subscription products without VAT"

extensions_amount_net_adj:
  title: extensions_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_amount_net_adj]
  description: "Net revenue from subscription extensions without VAT"

subs_w_extensions_amount_net_adj:
  title: subs_w_extensions_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_amount_net_adj, ext_amount_net_adj]
  description: "Net revenue from Subscription and extension products without VAT"

classified_amount_net_adj:
  title: classified_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  description: "Net revenue from classified products without VAT: vas,lf,subscriptions,extensions."

other_projects_amount_net_adj:
  title: other_projects_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [autoteka_amount_net_adj, delivery_amount_net_adj, domofond_amount_net_adj]
  description: "Net revenue from Other projects without VAT: autoteka, delivery, domofond."

lf_transactions:
  title: lf_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_transactions]
  description: "lf products transactions"

subs_transactions:
  title: subs_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_transactions]
  description: "Subscription products transactions"

extensions_transactions:
  title: extensions_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_transactions]
  description: "Extension products transactions"

subs_w_extensions_transactions:
  title: subs_w_extensions_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_transactions, ext_transactions]
  description: "Subscription and extension products transactions without VAT"

classified_transactions:
  title: classified_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  description: "Classified products transactions: vas,lf,subscriptions,extensions."

vas_users:
  title: vas_users
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_users]
  description: "VAS users"

lf_users:
  title: lf_users
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_users]
  description: "LF products users"

subs_users:
  title: subs_users
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_users]
  description: "Subscription products users"

extensions_users:
  title: extensions_users
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_users]
  description: "Extension products users"

classified_users:
  title: classified_users
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  description: "classified products users"

###############################################################################
# B2B Core :: Ratios
###############################################################################

vas_arpu_net_adj:
  title: vas_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "VAS average rate per user: VAS products revenue divided by total number of active listers"

lf_arpu_net_adj:
  title: lf_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "LF average rate per user: LF products revenue divided by total number of active listers"

subs_w_extensions_arpu_net_adj:
  title: subs_w_extensions_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "Subscription and extension products average rate per user: revenue divided by total number of active listers"

classified_arpu_net_adj:
  title: classified_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "Classified products revenue divided by total number of active listers: vas,lf,subscriptions,extensions."

vas_paying_users_ratio:
  title: vas_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_users]
  denominator:
    observations: [active_listers]
  description: "VAS products users divided by total number of active listers"

lf_paying_users_ratio:
  title: lf_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_users]
  denominator:
    observations: [active_listers]
  description: "LF products users divided by total number of active listers"

subs_paying_users_ratio:
  title: subs_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_users]
  denominator:
    observations: [active_listers]
  description: "Subscription users divided by total number of active listers"

extensions_paying_users_ratio:
  title: extensions_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_users]
  denominator:
    observations: [active_listers]
  description: "Extension products users divided by total number of active listers"

classified_paying_users_ratio:
  title: classified_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  denominator:
    observations: [active_listers]
  description: "Classified products users divided by total number of active listers: vas,lf,subscriptions,extensions."

vas_transactions_per_user:
  title: vas_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_transactions]
  denominator:
    observations: [vas_users]
  description: "VAS products transactions divided by number of users"

lf_transactions_per_user:
  title: lf_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_transactions]
  denominator:
    observations: [lf_users]
  description: "LF products transactions divided by number of users"

subs_transactions_per_user:
  title: subs_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_transactions]
  denominator:
    observations: [subs_users]
  description: "Subscription products transactions divided by number of users"

extensions_transactions_per_user:
  title: extensions_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_transactions]
  denominator:
    observations: [ext_users]
  description: "Extension products transactions divided by number of users"

classified_transactions_per_user:
  title: classified_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  denominator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  description: "Classified products transactions divided by number of users: vas,lf,subscriptions,extensions."

vas_price_net_adj:
  title: vas_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj]
  denominator:
    observations: [vas_transactions]
  description: "VAS products revenue divided by number of transactions"

lf_price_net_adj:
  title: lf_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_amount_net_adj]
  denominator:
    observations: [lf_transactions]
  description: "LF products revenue divided by number of transactions"

subs_price_net_adj:
  title: subs_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_amount_net_adj]
  denominator:
    observations: [subs_transactions]
  description: "Subscription products revenue divided by number of transactions"

extensions_price_net_adj:
  title: extensions_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_amount_net_adj]
  denominator:
    observations: [ext_transactions]
  description: "Extension products revenue divided by number of transactions"

classified_price_net_adj:
  title: classified_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  description: "Classified products revenue divided by number of transactionss: vas,lf,subscriptions,extensions."

advertisement_rpm_net_adj:
  title: advertisement_rpm_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [advertisement_amount_net_adj_increased_for_RPM]
  denominator:
    observations: [advertisement_page_views]
  description: "Revenue from advertisement per 1000 views"


########  ######## ########  ########  #######  ########  ##     ##    ###    ##    ##  ######  ########
##     ## ##       ##     ## ##       ##     ## ##     ## ###   ###   ## ##   ###   ## ##    ## ##
##     ## ##       ##     ## ##       ##     ## ##     ## #### ####  ##   ##  ####  ## ##       ##
########  ######   ########  ######   ##     ## ########  ## ### ## ##     ## ## ## ## ##       ######
##        ##       ##   ##   ##       ##     ## ##   ##   ##     ## ######### ##  #### ##       ##
##        ##       ##    ##  ##       ##     ## ##    ##  ##     ## ##     ## ##   ### ##    ## ##
##        ######## ##     ## ##        #######  ##     ## ##     ## ##     ## ##    ##  ######  ########
    
init_pages_loads:
  tags: [performance]
  numerator:
    observations: [initial_pages_finished_events]
    
init_page_interrupts:
  tags: [performance]
  numerator:
    observations: [initial_pages_unfinished_events] 
    
init_page_interrupts_percent:
  tags: [performance]
  numerator:
    observations: [initial_pages_unfinished_events]
  denominator:
    observations: [initial_pages_finished_events,initial_pages_unfinished_events]
    
dom_ready_dur:
  tags: [performance]
  numerator:
    observations: [time_to_dom_ready]
  denominator:
    observations: [initial_pages_finished_events]
    
first_interactive_dur:
  tags: [performance]
  numerator:
    observations: [time_to_first_interactive]
  denominator:
    observations: [initial_pages_finished_events]
    
first_byte_dur:
  tags: [performance]
  numerator:
    observations: [time_to_firstbyte]
  denominator:
    observations: [initial_pages_finished_events]

on_load_dur:
  tags: [performance]
  numerator:
    observations: [time_to_on_load]
  denominator:
    observations: [initial_pages_finished_events]

target_content_dur:
  tags: [performance]
  numerator:
    observations: [time_to_target_content]
  denominator:
    observations: [initial_pages_finished_events_main]
    
async_target_content_dur:
  tags: [performance]
  numerator:
    observations: [time_for_async_target_content]
  denominator:
    observations: [initial_pages_finished_events_main]
    
on_load_catalog_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_catalog]
  denominator:
    observations: [initial_pages_finished_events_catalog]
    
on_load_item_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_item]
  denominator:
    observations: [initial_pages_finished_events_item]
    
on_load_main_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_main]
  denominator:
    observations: [initial_pages_finished_events_main]

on_load_messenger_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_messenger]
  denominator:
    observations: [initial_pages_finished_events_messenger]

on_load_profile_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_profile]
  denominator:
    observations: [initial_pages_finished_events_profile]
    
on_load_other_dur:
  tags: [performance]
  numerator:
    observations: [time_to_load_other_pages]
  denominator:
    observations: [initial_pages_finished_events_other_pages]

###############################################################################
# Performance :: new_metrics
###############################################################################
di_percent_p25:
  tags: [performance]
  numerator:
    observations: [di_events_p25]
  denominator:
    observations: [di_events]
    
di_percent_p50:
  tags: [performance]
  numerator:
    observations: [di_events_p50]
  denominator:
    observations: [di_events]
    
di_percent_p75:
  tags: [performance]
  numerator:
    observations: [di_events_p75]
  denominator:
    observations: [di_events]
    
draw_percent_p25:
  tags: [performance]
  numerator:
    observations: [draw_events_p25]
  denominator:
    observations: [draw_events]
    
draw_percent_p50:
  tags: [performance]
  numerator:
    observations: [draw_events_p50]
  denominator:
    observations: [draw_events]
    
draw_percent_p75:
  tags: [performance]
  numerator:
    observations: [draw_events_p75]
  denominator:
    observations: [draw_events]
    
draw_percent_exceptions:
  tags: [performance]
  numerator:
    observations: [draw_exceptions]
  denominator:
    observations: [draw_exceptions, draw_events]
    
init_percent_p25:
  tags: [performance]
  numerator:
    observations: [init_events_p25]
  denominator:
    observations: [init_events]
    
init_percent_p50:
  tags: [performance]
  numerator:
    observations: [init_events_p50]
  denominator:
    observations: [init_events]
    
init_percent_p75:
  tags: [performance]
  numerator:
    observations: [init_events_p75]
  denominator:
    observations: [init_events]
    
localloading_percent_p50:
  tags: [performance]
  numerator:
    observations: [localloading_events_p50]
  denominator:
    observations: [localloading_events]
    
localloading_percent_p75:
  tags: [performance]
  numerator:
    observations: [localloading_events_p75]
  denominator:
    observations: [localloading_events]
    
prepare_percent_p50:
  tags: [performance]
  numerator:
    observations: [prepare_events_p50]
  denominator:
    observations: [prepare_events]
    
prepare_percent_p75:
  tags: [performance]
  numerator:
    observations: [prepare_events_p75]
  denominator:
    observations: [prepare_events]
    
prepare_percent_exceptions:
  tags: [performance]
  numerator:
    observations: [prepare_exceptions]
  denominator:
    observations: [prepare_exceptions, prepare_events]
    
serverloading_percent_p25:
  tags: [performance]
  numerator:
    observations: [serverloading_events_p25]
  denominator:
    observations: [serverloading_events]
    
serverloading_percent_p50:
  tags: [performance]
  numerator:
    observations: [serverloading_events_p50]
  denominator:
    observations: [serverloading_events]
    
serverloading_percent_p75:
  tags: [performance]
  numerator:
    observations: [serverloading_events_p75]
  denominator:
    observations: [serverloading_events]
    
serverloading_percent_exceptions:
  tags: [performance]
  numerator:
    observations: [serverloading_exceptions]
  denominator:
    observations: [serverloading_exceptions, serverloading_events]

draw_session_percent_sla:
  tags: [performance]
  numerator:
    observations: [draw_sessions_sla]
  denominator:
    observations: [draw_sessions]
    
init_session_percent_p50:
  tags: [performance]
  numerator:
    observations: [init_sessions_p50]
  denominator:
    observations: [init_sessions]
    
init_session_percent_p75:
  tags: [performance]
  numerator:
    observations: [init_sessions_p75]
  denominator:
    observations: [init_sessions]
    
init_session_percent_sla:
  tags: [performance]
  numerator:
    observations: [init_sessions_sla]
  denominator:
    observations: [init_sessions]

di_session_duration:
  tags: [performance]
  numerator:
    observations: [di_session_duration]
  denominator:
    observations: [di_session_duration_events]
    
draw_duration:
  tags: [performance]
  numerator:
    observations: [draw_duration]
  denominator:
    observations: [draw_duration_events]
    
draw_session_duration:
  tags: [performance]
  numerator:
    observations: [draw_session_duration]
  denominator:
    observations: [draw_session_duration_events]
    
init_session_duration:
  tags: [performance]
  numerator:
    observations: [init_session_duration]
  denominator:
    observations: [init_session_duration_events]
    
localloading_duration:
  tags: [performance]
  numerator:
    observations: [localloading_duration]
  denominator:
    observations: [localloading_duration_events]
    
localloading_session_duration:
  tags: [performance]
  numerator:
    observations: [localloading_session_duration]
  denominator:
    observations: [localloading_session_duration_events]
    
prepare_duration:
  tags: [performance]
  numerator:
    observations: [prepare_duration]
  denominator:
    observations: [prepare_duration_events]
    
prepare_session_duration:
  tags: [performance]
  numerator:
    observations: [prepare_session_duration]
  denominator:
    observations: [prepare_session_duration_events]
    
serverloading_duration:
  tags: [performance]
  numerator:
    observations: [serverloading_duration]
  denominator:
    observations: [serverloading_duration_events]
    
serverloading_session_duration:
  tags: [performance]
  numerator:
    observations: [serverloading_session_duration]
  denominator:
    observations: [serverloading_session_duration_events]  
        

 ######   #######  ##     ## ##     ## ##     ## ##    ## ####  ######     ###    ######## ####  #######  ##    ##  ######  
##    ## ##     ## ###   ### ###   ### ##     ## ###   ##  ##  ##    ##   ## ##      ##     ##  ##     ## ###   ## ##    ## 
##       ##     ## #### #### #### #### ##     ## ####  ##  ##  ##        ##   ##     ##     ##  ##     ## ####  ## ##       
##       ##     ## ## ### ## ## ### ## ##     ## ## ## ##  ##  ##       ##     ##    ##     ##  ##     ## ## ## ##  ######  
##       ##     ## ##     ## ##     ## ##     ## ##  ####  ##  ##       #########    ##     ##  ##     ## ##  ####       ## 
##    ## ##     ## ##     ## ##     ## ##     ## ##   ###  ##  ##    ## ##     ##    ##     ##  ##     ## ##   ### ##    ## 
 ######   #######  ##     ## ##     ##  #######  ##    ## ####  ######  ##     ##    ##    ####  #######  ##    ##  ######  
###############################################################################
# Communications :: Totals
###############################################################################
anonnumber_calls:
  title: anonnumber_calls
  description: "Количество незаблокированных звонков на привязанные к объявлениям номера сервиса Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls]

anonnumber_users:
  title: anonnumber_users
  description: "Количество пользователей, которым звонили через сервис Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls]
    groupby: [participant]

anonnumber_success_calls:
  title: anonnumber_success_calls
  description: "Количество звонков сервиса Анонимный Номер с длительностью соединения более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls]

anonnumber_success_users:
  title: anonnumber_success_users
  description: "Количество пользователей, которым поступали звонки через сервис Анонимный Номер с длительностью соединения более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls]
    groupby: [participant]

anonnumber_success_talks:
  title: anonnumber_success_talks
  description: "Количество звонков сервиса Анонимный Номер с длительностью разговора более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks]

anonnumber_success_talkers:
  title: anonnumber_success_talkers
  description: "Количество пользователей, которым поступали звонки через сервис Анонимный Номер с длительностью разговора более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks]
    groupby: [participant]

anonnumber_useless_talks:
  title: anonnumber_useless_talks
  description: "Количество успешных, но малополезных звонков - с длительностью разговора более 3 секунд, но менее 30 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_useless_talks]
   
anonnumber_usefull_talks:
  title: anonnumber_usefull_talks
  description: "Количество содержательных звонков - с длительностью разговора более 60 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_usefull_talks]
    
anonnumber_long_talks:
  title: anonnumber_long_talks
  description: "Количество очень длинных звонков - с длительностью разговора более 240 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_long_talks]
    
anonnumber_long_talkers:
  title: anonnumber_long_talkers
  description: "Количество долго говоривших пользователей - имели звонки длительностью более 240 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_long_talks]
    groupby: [participant]

anonnumber_calls_dur:
  title: anonnumber_calls_dur
  description: "Общая длительность (сек.) незаблокированных звонков на привязанные к объявлениям номера сервиса Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls_duration]
    
anonnumber_success_calls_dur:
  title: anonnumber_success_calls_dur
  description: "Общая длительность (сек.) успешных (с длительностью соединения более 3 секунд) незаблокированных звонков на привязанные к объявлениям номера сервиса Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls_duration]

anonnumber_talks_dur:
  title: anonnumber_talks_dur
  description: "Длительность разоворов (сек.) по звонкам на привязанные к объявлениям номера сервиса Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_talks_duration]
    
anonnumber_success_talks_dur:
  title: anonnumber_success_talks_dur
  description: "Длительность разоворов (сек.) по успешным звонкам (более 3 сек. разговора) на привязанные к объявлениям номера сервиса Анонимный Номер"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks_duration]
    
ancalls_any_type:
  title: ancalls_any_type
  description: "Число анонимных звонков, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]

users_ancalls_any_type:
  title: users_ancalls_any_type
  description: "Число юзеров, совершивших анонимный звонок, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]
    groupby: [participant]

ancalls_any_type_fav:
  title: ancalls_any_type_fav
  description: "Число анонимных звонков из избранного, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type_fav]

ancalls_any_type_rec:
  title: ancalls_any_type_rec
  description: "Число анонимных звонков с рекомендаций, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type_rec]

ancalls_any_type_serp:
  title: ancalls_any_type_serp
  description: "Число анонимных звонков с СЕРПа, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type_serp]

ancalls_any_type_map:
  title: ancalls_any_type_map
  description: "Число анонимных звонков с карты, сопоставленных любым способом (по номеру телефона и/или по времени). Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type_map]

ancalls_by_phone:
  title: ancalls_by_phone
  description: "Число анонимных звонков, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone]

users_ancalls_by_phone:
  title: users_ancalls_by_phone
  description: "Число юзеров, совершивших анонимный звонок, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone]
    groupby: [participant]

ancalls_by_phone_fav:
  title: ancalls_by_phone_fav
  description: "Число анонимных звонков из избранного, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_fav]

ancalls_by_phone_rec:
  title: ancalls_by_phone_rec
  description: "Число анонимных звонков с рекомендаций, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_rec]

ancalls_by_phone_serp:
  title: ancalls_by_phone_serp
  description: "Число анонимных звонков с СЕРПа, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_serp]

ancalls_by_phone_map:
  title: ancalls_by_phone_map
  description: "Число анонимных звонков с карты, сопоставленных по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_map]

ancalls_by_phone_uid:
  title: ancalls_by_phone_uid
  description: "Число анонимных звонков, сопоставленных по номеру телефону и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user]

users_ancalls_by_phone_uid:
  title: users_ancalls_by_phone_uid
  description: "Число юзеров, совершивших анонимный звонок, сопоставленных по номеру телефона и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user]
    groupby: [participant]

ancalls_by_phone_uid_fav:
  title: ancalls_by_phone_uid_fav
  description: "Число анонимных звонков из избранного, сопоставленных по номеру телефону и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user_fav]

ancalls_by_phone_uid_rec:
  title: ancalls_by_phone_uid_rec
  description: "Число анонимных звонков с рекомендаций, сопоставленных по номеру телефону и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user_rec]

ancalls_by_phone_uid_serp:
  title: ancalls_by_phone_uid_serp
  description: "Число анонимных звонков с СЕРПа, сопоставленных по номеру телефону и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user_serp]

ancalls_by_phone_uid_map:
  title: ancalls_by_phone_uid_map
  description: "Число анонимных звонков c карты, сопоставленных по номеру телефону и user_id. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_phone_and_user_map]

ancalls_by_time:
  title: ancalls_by_time
  description: "Число анонимных звонков, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time]

users_ancalls_by_time:
  title: users_ancalls_by_time
  description: "Число юзеров, совершивших анонимный звонок, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time]
    groupby: [participant]

ancalls_by_time_fav:
  title: ancalls_by_time_fav
  description: "Число анонимных звонков из избранного, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time_fav]

ancalls_by_time_rec:
  title: ancalls_by_time_rec
  description: "Число анонимных звонков с рекомендаций, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time_rec]

ancalls_by_time_serp:
  title: ancalls_by_time_serp
  description: "Число анонимных звонков с СЕРПа, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time_serp]

ancalls_by_time_map:
  title: ancalls_by_time_map
  description: "Число анонимных звонков с карты, сопоставленных по времени. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_by_time_map]

ancalls_both_types:
  title: ancalls_both_types
  description: "Число анонимных звонков, сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types]

users_ancalls_both_types:
  title: users_ancalls_both_types
  description: "Число юзеров, совершивших анонимный звонок,сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types]
    groupby: [participant]

ancalls_both_types_fav:
  title: ancalls_both_types_fav
  description: "Число анонимных звонков из избранного, сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types_fav]

ancalls_both_types_rec:
  title: ancalls_both_types_rec
  description: "Число анонимных звонков с рекомендаций, сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types_rec]

ancalls_both_types_serp:
  title: ancalls_both_types_serp
  description: "Число анонимных звонков с СЕРПа, сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types_serp]

ancalls_both_types_map:
  title: ancalls_both_types_map
  description: "Число анонимных звонков с карты, сопоставленных и по времени, и по номеру телефона. Подробнее https://cf.avito.ru/pages/viewpage.action?pageId=115226595"
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_both_types_map]

###############################################################################
# Communications :: Ratios
###############################################################################
anonnumber_calls_per_user:
  title: anonnumber_calls_per_user
  description: "Среднее количество звонков на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]

anonnumber_success_calls_per_user:
  title: anonnumber_success_calls_per_user
  description: "Среднее количество успешных звонков (длительность соединения больше 3 секунд) на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]

anonnumber_success_talks_per_user:
  title: anonnumber_success_talks_per_user
  description: "Среднее количество успешных разговоров (длительность разговора больше 3 секунд) на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]
    
anonnumber_useless_talks_per_user:
  title: anonnumber_useless_talks_per_user
  description: "Среднее количество успешных, но малополезных звонков на пользователя - с длительностью разговора более 3 секунд, но менее 30 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_useless_talks]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]
    
anonnumber_usefull_talks_per_user:
  title: anonnumber_usefull_talks_per_user
  description: "Среднее количество содержательных звонков на пользователя - с длительностью разговора более 60 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_usefull_talks]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]
    
anonnumber_long_talks_per_user:
  title: anonnumber_long_talks_per_user
  description: "Среднее количество очень длинных звонков на пользователя - с длительностью разговора более 240 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_long_talks]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]

anonnumber_success_calls_ratio:
  title: anonnumber_success_calls_ratio
  description: "Доля звонков сервиса Анонимный Номер с длительностью соединения более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: []

anonnumber_success_talks_ratio:
  title: anonnumber_success_talks_ratio
  description: "Доля звонков сервиса Анонимный Номер с длительностью разговора более 3 секунд"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: []

anonnumber_call_dur_per_call:
  title: anonnumber_call_dur_per_call
  description: "Средняя общая продолжительность звонка"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls_duration]
  denominator:
    observations: [anonnumber_calls]

anonnumber_call_dur_per_user:
  title: anonnumber_call_dur_per_user
  description: "Средняя общая продолжительность звонков на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_calls_duration]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]
    
anonnumber_success_calls_dur_per_user:
  title: anonnumber_success_calls_dur_per_user
  description: "Средняя продолжительность успешных звонков (соединение более 3 секунд) на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_calls_duration]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]

anonnumber_talk_dur_per_call:
  title: anonnumber_talk_dur_per_call
  description: "Средняя продолжительность разговора звонка"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_talks_duration]
  denominator:
    observations: [anonnumber_calls]

anonnumber_talk_dur_per_user:
  title: anonnumber_talk_dur_per_user
  description: "Средняя продолжительность разговоров пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_talks_duration]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]
    
anonnumber_success_talk_dur_per_user:
  title: anonnumber_success_talk_dur_per_user
  description: "Средняя продолжительность успешных разговоров (разговор более 3 секунд) на пользователя"
  tags: [comn, anonnumber]
  numerator:
    observations: [anonnumber_success_talks_duration]
    groupby: []
  denominator:
    observations: [anonnumber_calls]
    groupby: [participant]

ancalls_per_phone_view:
  title: ancalls_per_phone_view
  description: "Конверсия из 303-го в анонимный звонок (сопоставленный любым способом)."
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]
  denominator:
    observations: [phone_views_total]

users_ancall_per_phone_view_user:
  title: users_ancall_per_phone_view_user
  description: "Конверсия юзеров c 303-им событием в совершивших анонимный звонок (сопоставленный любым способом)."
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]
    groupby: [participant]
  denominator:
    observations: [phone_views_total]
    groupby: [participant]

ancalls_per_pv_btn:
  title: ancalls_per_pv_btn
  description: "Конверсия из нажатий на кнопку запроса телефона в анонимный звонок (сопоставленный любым способом)."
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]
  denominator:
    observations: [phone_view_button_clicks]

users_ancall_per_pv_btn_user:
  title: user_ancalls_per_pv_btn_user
  description: "Конверсия юзеров из нажимавших на кнопку запроса телефона в совершивших анонимный звонок (сопоставленный любым способом)."
  tags: [comn, anonnumber, bx]
  numerator:
    observations: [anon_calls_matched_any_type]
    groupby: [participant]
  denominator:
    observations: [phone_view_button_clicks]
    groupby: [participant]

########  ########   #######  
##     ## ##     ## ##     ## 
##     ## ##     ## ##     ## 
########  ########  ##     ## 
##        ##   ##   ##     ## 
##        ##    ##  ##     ## 
##        ##     ##  #######  

###############################################################################
# AvitoPro :: Totals
###############################################################################

# Mnz

subs_transactions_lk:
  description: "Количество покупок тарифов/подписок через ЛК"
  tags: [monetization]
  numerator:
    observations: [subs_transactions_lk]
    
user_subs_transactions_lk:
  description: "Количество уникальных пользователей, которые приобрели тариф/подписку через ЛК"
  tags: [monetization]
  numerator:
    observations: [subs_transactions_lk]
    groupby: [participant]
    
subs_transactions_all:
  description: "Количество покупок тарифов/подписок"
  tags: [monetization]
  numerator:
    observations: [subs_transactions_all]
    
user_subs_transactions_all:
  description: "Количество уникальных пользователей, которые приобрели тариф/подписку"
  tags: [monetization]
  numerator:
    observations: [subs_transactions_all]
    groupby: [participant]

cv_packages_transactions_lk:
  description: "Количество приобретенных пакетов контактов резюме через ЛК"
  tags: [monetization]
  numerator:
    observations: [cv_packages_transactions_lk]
    
user_cv_packages_transactions_lk:
  description: "Количество уникальных пользователей, купивших пакет с контактами резюме через ЛК"
  tags: [monetization]
  numerator:
    observations: [cv_packages_transactions_lk]
    groupby: [participant]
    
cv_packages_transactions_all:
  description: "Количество приобретенных пакетов контактов резюме"
  tags: [monetization]
  numerator:
    observations: [cv_packages_transactions_all]
    
user_cv_packages_transactions_all:
  description: "Количество уникальных пользователей, купивших пакет с контактами резюме"
  tags: [monetization]
  numerator:
    observations: [cv_packages_transactions_all]
    groupby: [participant]

lf_packages_transactions_lk:
  description: "Количество приобретенных пакетов размещений через ЛК"
  tags: [monetization]
  numerator:
    observations: [lf_packages_transactions_lk]
    
user_lf_packages_transactions_lk:
  description: "Количество уникальных пользователей, купивших пакет размещений через ЛК"
  tags: [monetization]
  numerator:
    observations: [lf_packages_transactions_lk]
    groupby: [participant]
    
lf_packages_transactions_all:
  description: "Количество приобретенных пакетов размещений"
  tags: [monetization]
  numerator:
    observations: [lf_packages_transactions_all]
    
user_lf_packages_transactions_all:
  description: "Количество уникальных пользователей, купивших пакет размещений"
  tags: [monetization]
  numerator:
    observations: [lf_packages_transactions_all]
    groupby: [participant]

# Billing 

user_payment_method_page:
  description: "Количество уникальных пользователей, которые переходили на страницу выбора способа оплаты"
  tags: [payments]
  numerator:
    observations: [payment_method_page]
    groupby: [participant]

user_payment_method_choice:
  description: "Количество уникальных пользователей, которые создавали PaymentOrder"
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
    groupby: [participant]

user_successful_payment:
  description: "Количество уникальных пользователей, которые произвели успешную оплату"
  tags: [payments]
  numerator:
    observations: [successful_payment]
    groupby: [participant]

payment_method_page_wallet:
  description: "Количество переходов на страницу выбора способа пополнения кошелька"
  tags: [payments]
  numerator:
    observations: [payment_method_page_wallet]

user_payment_method_page_wallet:
  description: "Количество уникальных пользователей, которые перешли на страницу выбора способа пополнения кошелька"
  tags: [payments]
  numerator:
    observations: [payment_method_page_wallet]
    groupby: [participant]

payment_method_choice_wallet:
  description: "Количество созданий PaymentOrder кошелька"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_wallet]

user_payment_method_choice_wallet:
  description: "Количество уникальных пользователей, которые создали PaymentOrder кошелька"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_wallet]
    groupby: [participant]

successful_payment_wallet:
  description: "Количество успешных пополнений кошелька"
  tags: [payments]
  numerator:
    observations: [successful_payment_wallet]

user_successful_payment_wallet:
  description: "Количество уникальных пользователей, которые успешно пополнили кошелек"
  tags: [payments]
  numerator:
    observations: [successful_payment_wallet]
    groupby: [participant]

bookkeeping_view_events:
  description: "Количество переходов на страницу Бухгалтерии"
  tags: [payments]
  numerator:
    observations: [bookkeeping_view_events]

user_bookkeeping_view_events:
  description: "Количество уникальных пользователей, которые перешли на страницу Бухгалтерии"
  tags: [payments]
  numerator:
    observations: [bookkeeping_view_events]
    groupby: [participant]


# T&S 

user_favorites_removed:
  description: "Количество уникальных пользователей, которые удаляли объявления из Избранного"
  tags: [tns]
  numerator:
    observations: [favorites_removed]
    groupby: [participant]

user_favorites_list_views:
  description: "Количество уникальных пользователей, которые просматривали спиcок объявлений в Избранном"
  tags: [tns]
  numerator:
    observations: [favorites_list_views]
    groupby: [participant]

# AvitoPro 

avitopro_view_events:
  description: "Количество переходов в Авито Pro со страницы ЛК"
  tags: [avitopro]
  numerator:
    observations: [avitopro_view_events]

user_avitopro_view_events:
  description: "Количество уникальных пользователей, перешедших в Авито Pro со страницы ЛК"
  tags: [avitopro]
  numerator:
    observations: [avitopro_view_events]
    groupby: [participant]

avitopro_vas_amount:
  description: "Общая выручка с продажи услуг через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_vas_amount]

user_avitopro_vas:
  description: "Количество уникальных пользователей, которые применяли услуги через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_vas_amount]
    groupby: [participant]

avitopro_vas_transactions:
  description: "Количество транзакций по услугам через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_vas_transactions]

avitopro_lf_amount:
  description: "Общая выручка с реактиваций объявлений через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_lf_amount]

user_avitopro_lf:
  description: "Количество уникальных пользователей, которые оплачивали реактивацию объявлениий через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_lf_amount]
    groupby: [participant]

avitopro_lf_transactions:
  description: "Количество реактиваций объявлений  через Авито Pro"
  tags: [avitopro, monetization]
  numerator:
    observations: [avitopro_lf_transactions]

autoload_click_load_events:
  description: "Количество нажатий «Загрузить» на странице Автозагрузки ЛК"
  tags: [avitopro]
  numerator:
    observations: [autoload_click_load_events]

user_autoload_click_load_events:
  description: "Количество уникальных пользователей, которые нажали «Загрузить» на странице Автозагрузки ЛК"
  tags: [avitopro]
  numerator:
    observations: [autoload_click_load_events]
    groupby: [participant]

# ProfileViews

my_items_view_events:
  description: "Количество переходов на страницу Мои объявления в ЛК"
  tags: [avitopro]
  numerator:
    observations: [my_items_view_events]

user_my_items_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Мои объявления в ЛК"
  tags: [avitopro]
  numerator:
    observations: [my_items_view_events]
    groupby: [participant]

rating_view_events:
  description: "Количество переходов на страницу Рейтинг и отзывы > Рейтинг в ЛК"
  tags: [avitopro]
  numerator:
    observations: [rating_view_events]

user_rating_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Рейтинг и отзывы > Рейтинг в ЛК"
  tags: [avitopro]
  numerator:
    observations: [rating_view_events]
    groupby: [participant]

reviews_view_events:
  description: "Количество переходов на страницу Рейтинг и отзывы > Мои отзывы в ЛК"
  tags: [avitopro]
  numerator:
    observations: [reviews_view_events]

user_reviews_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Рейтинг и отзывы > Мои отзывы в ЛК"
  tags: [avitopro]
  numerator:
    observations: [reviews_view_events]
    groupby: [participant]

messages_view_events:
  description: "Количество переходов на страницу Сообщения"
  tags: [avitopro]
  numerator:
    observations: [messages_view_events]

user_messages_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Сообщения"
  tags: [avitopro]
  numerator:
    observations: [messages_view_events]
    groupby: [participant]

wallet_view_events:
  description: "Количество переходов на страницу Кошелек > Пополнение кошелька в ЛК"
  tags: [avitopro]
  numerator:
    observations: [wallet_view_events]

user_wallet_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > Пополнение кошелька в ЛК"
  tags: [avitopro]
  numerator:
    observations: [wallet_view_events]
    groupby: [participant]

services_view_events:
  description: "Количество переходов на страницу Кошелек > Услуги в ЛК"
  tags: [avitopro]
  numerator:
    observations: [services_view_events]

user_services_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > Услуги в ЛК"
  tags: [avitopro]
  numerator:
    observations: [services_view_events]
    groupby: [participant]

packages_view_events:
  description: "Количество переходов на страницу Кошелек > Пакеты размещений в ЛК"
  tags: [avitopro]
  numerator:
    observations: [packages_view_events]

user_packages_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > Пакеты размещений в ЛК"
  tags: [avitopro]
  numerator:
    observations: [packages_view_events]
    groupby: [participant]

cv_contacts_view_events:
  description: "Количество переходов на страницу Кошелек > Контакты резюме в ЛК"
  tags: [avitopro]
  numerator:
    observations: [cv_contacts_view_events]

user_cv_contacts_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > Контакты резюме в ЛК"
  tags: [avitopro]
  numerator:
    observations: [cv_contacts_view_events]
    groupby: [participant]

bonuses_view_events:
  description: "Количество переходов на страницу Кошелек > Бонусы в ЛК"
  tags: [avitopro]
  numerator:
    observations: [bonuses_view_events]

user_bonuses_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > Бонусы в ЛК"
  tags: [avitopro]
  numerator:
    observations: [bonuses_view_events]
    groupby: [participant]

operations_view_events:
  description: "Количество переходов на страницу Кошелек > История операций в ЛК"
  tags: [avitopro]
  numerator:
    observations: [operations_view_events]

user_operations_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Кошелек > История операций в ЛК"
  tags: [avitopro]
  numerator:
    observations: [operations_view_events]
    groupby: [participant]

notifications_view_events:
  description: "Количество переходов на страницу Уведомления"
  tags: [avitopro]
  numerator:
    observations: [notifications_view_events]

user_notifications_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Уведомления"
  tags: [avitopro]
  numerator:
    observations: [notifications_view_events]
    groupby: [participant]

subs_view_events:
  description: "Количество переходов на страницу Для профессионалов > Тарифы (Подписки) в ЛК"
  tags: [avitopro]
  numerator:
    observations: [subs_view_events]

user_subs_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Для профессионалов > Тарифы (Подписки) в ЛК"
  tags: [avitopro]
  numerator:
    observations: [subs_view_events]
    groupby: [participant]

shop_view_events:
  description: "Количество переходов на страницу Для профессионалов > Магазин в ЛК"
  tags: [avitopro]
  numerator:
    observations: [shop_view_events]

user_shop_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Для профессионалов > Магазин в ЛК"
  tags: [avitopro]
  numerator:
    observations: [shop_view_events]
    groupby: [participant]

windows_view_events:
  description: "Количество переходов на страницу Для профессионалов > Витрины в ЛК"
  tags: [avitopro]
  numerator:
    observations: [windows_view_events]

user_windows_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Для профессионалов > Витрины в ЛК"
  tags: [avitopro]
  numerator:
    observations: [windows_view_events]
    groupby: [participant]

avitopro_landing_view_events:
  description: "Количество переходов на страницу Бизнес > Авито Pro лендинг"
  tags: [avitopro]
  numerator:
    observations: [avitopro_landing_view_events]

user_avitopro_landing_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Бизнес > Авито Pro лендинг"
  tags: [avitopro]
  numerator:
    observations: [avitopro_landing_view_events]
    groupby: [participant]

autoload_view_events:
  description: "Количество переходов на страницу Автозагрузка в ЛК"
  tags: [avitopro]
  numerator:
    observations: [autoload_view_events]

user_autoload_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Автозагрузка в ЛК"
  tags: [avitopro]
  numerator:
    observations: [autoload_view_events]
    groupby: [participant]

settings_view_events:
  description: "Количество переходов на страницу Настройки в ЛК"
  tags: [avitopro]
  numerator:
    observations: [settings_view_events]

user_settings_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Настройки в ЛК"
  tags: [avitopro]
  numerator:
    observations: [settings_view_events]
    groupby: [participant]

items_view_events:
  description: "Количество переходов на страницу Объявления"
  tags: [avitopro]
  numerator:
    observations: [items_view_events]

user_items_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Объявления"
  tags: [avitopro]
  numerator:
    observations: [items_view_events]
    groupby: [participant]

shops_view_events:
  description: "Количество переходов на страницу Магазины"
  tags: [avitopro]
  numerator:
    observations: [shops_view_events]

user_shops_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Магазины"
  tags: [avitopro]
  numerator:
    observations: [shops_view_events]
    groupby: [participant]

sub_view_events:
  description: "Количество переходов на страницу Бизнес > Подписка в ЛК"
  tags: [avitopro]
  numerator:
    observations: [sub_view_events]

user_sub_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Бизнес > Подписка в ЛК"
  tags: [avitopro]
  numerator:
    observations: [sub_view_events]
    groupby: [participant]

promo_view_events:
  description: "Количество переходов на страницу Бизнес > Медийная реклама в ЛК"
  tags: [avitopro]
  numerator:
    observations: [promo_view_events]

user_promo_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Бизнес > Медийная реклама в ЛК"
  tags: [avitopro]
  numerator:
    observations: [promo_view_events]
    groupby: [participant]

help_view_events:
  description: "Количество переходов на страницу Помощь"
  tags: [avitopro]
  numerator:
    observations: [help_view_events]

user_help_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Помощь"
  tags: [avitopro]
  numerator:
    observations: [help_view_events]
    groupby: [participant]

favorite_items_view_events:
  description: "Количество переходов на страницу Избранное > Объявления"
  tags: [avitopro]
  numerator:
    observations: [favorite_items_view_events]

user_favorite_items_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу Избранное > Объявления"
  tags: [avitopro]
  numerator:
    observations: [favorite_items_view_events]
    groupby: [participant]

favorite_search_view_events:
  description: "Количество переходов на страницу сохраненных поисков"
  tags: [avitopro]
  numerator:
    observations: [favorite_search_view_events]

user_favorite_search_view_events:
  description: "Количество уникальных пользователей, которые переходили на страницу сохраненных поисков"
  tags: [avitopro]
  numerator:
    observations: [favorite_search_view_events]
    groupby: [participant]

account_asd_click_email_asd:
  description: "Количество кликов на e-mail прикрепленного мененджера АСД в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_asd]

user_account_asd_click_email_asd:
  description: "Количество уникальных пользователей, которые кликали на e-mail прикрепленного мененджера АСД в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_asd]
    groupby: [participant]

account_asd_click_email_doc:
  description: "Количество кликов на e-mail документооборота в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_doc]

user_account_asd_click_email_doc:
  description: "Количество уникальных пользователей, которые кликали на e-mail документооборота в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_doc]
    groupby: [participant]

account_asd_click_email_support:
  description: "Количество кликов на e-mail поддержки в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_support]

user_account_asd_click_email_support:
  description: "Количество уникальных пользователей, которые кликали на e-mail поддержки в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_email_support]
    groupby: [participant]

account_asd_click_order_call:
  description: "Количество кликов на заказ звонка АСД менеджеру в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_order_call]

user_account_asd_click_order_call:
  description: "Количество уникальных пользователей, которые кликали на заказ звонка АСД менеджеру в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_order_call]
    groupby: [participant]

account_asd_click_write_review_asd:
  description: "Количество кликов на Напишите отзыв о менеджере в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_write_review_asd]

user_account_asd_click_write_review_asd:
  description: "Количество уникальных пользователей, которые кликали на Напишите отзыв о менеджере в ЛК"
  tags: [avitopro]
  numerator:
    observations: [account_asd_click_write_review_asd]
    groupby: [participant]

# Pro

avitopro_item_activate:
  description: "Количество опубликованных объявлений"
  tags: [pro]
  numerator:
    observations: [avitopro_item_activate]
    groupby: [participant]

avitopro_item_activateautopublish:
  description: "Количество включений автопубликации объявления"
  tags: [pro]
  numerator:
    observations: [avitopro_item_activateautopublish]
    groupby: [participant]

avitopro_vas_apply:
  description: "Количество применений услуги продвижения"
  tags: [pro]
  numerator:
    observations: [avitopro_vas_apply]
    groupby: [participant]

avitopro_item_priceedit:
  description: "Количество редактирований стоимости объявления"
  tags: [pro]
  numerator:
    observations: [avitopro_item_priceedit]
    groupby: [participant]

avitopro_item_edit:
  description: "Количество редактирований объявления"
  tags: [pro]
  numerator:
    observations: [avitopro_item_edit]
    groupby: [participant]

avitopro_item_delete:
  description: "Количество удалений объявления"
  tags: [pro]
  numerator:
    observations: [avitopro_item_delete]
    groupby: [participant]

avitopro_item_deactivate:
  description: "Количество раз, когда объявление было снято с публикации"
  tags: [pro]
  numerator:
    observations: [avitopro_item_deactivate]
    groupby: [participant]

avitopro_item_deactivateautopublish:
  description: "Количество отключений автопубликации объявлений"
  tags: [pro]
  numerator:
    observations: [avitopro_item_deactivateautopublish]
    groupby: [participant]

avitopro_statistic_download:
  description: "Количество скачиваний отчета XLS"
  tags: [pro]
  numerator:
    observations: [avitopro_statistic_download]
    groupby: [participant]

avitopro_items_open:
  description: "Количество просмотров страницы со списком объявлений"
  tags: [pro]
  numerator:
    observations: [avitopro_items_open]
    groupby: [participant]

avitopro_item_graph_open:
  description: "Количество открытий графика со статистикой по одному объявлению"
  tags: [pro]
  numerator:
    observations: [avitopro_item_graph_open]
    groupby: [participant]

avitopro_statistics_open:
  description: "Количество просмотров страницы с общей статистикой"
  tags: [pro]
  numerator:
    observations: [avitopro_statistics_open]
    groupby: [participant]

avitopro_calls_open:
  description: "Количество просмотров страницы со статистикой по звонкам"
  tags: [pro]
  numerator:
    observations: [avitopro_calls_open]
    groupby: [participant]

avitopro_calls_download:
  description: "Количество скачиваний отчета в Excel"
  tags: [pro]
  numerator:
    observations: [avitopro_calls_download]
    groupby: [participant]

avitopro_calls_recordplay:
  description: "Количество воспроизведений записи звонка"
  tags: [pro]
  numerator:
    observations: [avitopro_calls_recordplay]
    groupby: [participant]

avitopro_item_responsibleemployee:
  description: "Количество назначений ответственного по объявлению"
  tags: [pro]
  numerator:
    observations: [avitopro_item_responsibleemployee]
    groupby: [participant]

users_avitopro_key_actions:
  description: "Совершил ли пользователь хотябы одно из ключевых действий в АвитоПро"
  tags: [pro]
  numerator:
    observations: [users_avitopro_key_actions]
    groupby: [participant]

users_avitopro:
  description: "Совершил ли пользователь хотябы одно любое действие в АвитоПро"
  tags: [pro]
  numerator:
    observations: [users_avitopro]
    groupby: [participant]


 ######   ########  #######  
##    ##  ##       ##     ## 
##        ##       ##     ## 
##   #### ######   ##     ## 
##    ##  ##       ##     ## 
##    ##  ##       ##     ## 
 ######   ########  #######  

###############################################################################
# Geo :: Totals
###############################################################################

#смена локаций
loc_window_opens:
  title: loc_window_opens
  tags: [i3, bx, total]
  numerator:
    observations: [location_dialogue_opens]
    
loc_window_closings:
  title: loc_window_closings
  tags: [i3, bx, total]
  numerator:
    observations: [location_dialogue_closings]
    
loc_window_savings:
  title: loc_window_savings
  tags: [i3, bx, total]
  numerator:
    observations: [location_dialogue_savings]

location_text_inputs:
  title: location_text_inputs
  tags: [i4, bx, total]
  numerator:
    observations: [location_text_inputs]

users_loc_window_opens:
  title: users_loc_window_opens
  tags: [i3, bx,  user]
  numerator:
    observations: [location_dialogue_opens]
    groupby: [participant]

users_loc_suggest_clicks:
  title: users_loc_suggest_clicks
  tags: [i4, bx,  user]
  numerator:
    observations: [location_suggest_clicks]
    groupby: [participant]
       
loc_chng:
  description: "Число смен локаций"
  tags: [i1, geo]
  numerator:
    observations: [location_changings]
    
loc_bad_chng:
  description: "Т.н. плохие смены локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i1, geo]
  numerator:
    observations: [location_changings_bad]
    
loc_susp_chng:
  description: "Т.н. подозрительные смены локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_suspicious]
    
loc_neutral_chng:
  description: "Т.н. нейтральные смены локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_neutral]
    
loc_bad_susp_chng:
  description: "Т.н. плохие и подозрительные смены локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_bad, location_changings_suspicious]
    
loc_expanded_chng:
  description: "Смена локации с расширением, например с города на регион"
  title: loc_expanded_changings
  tags: [i4, geo]
  numerator:
    observations: [location_changings_expanded]
    
loc_detailed_chng:
  description: "Смена локации с сужением, например с региона на город"
  title: loc_detailed_chng
  tags: [i4, geo]
  numerator:
    observations: [location_changings_detailed]
    
loc_horizontal_chng:
  description: "Смена локации на одном уровне, например с региона на регион"
  title: loc_horizontal_chng
  tags: [i4, geo]
  numerator:
    observations: [location_changings_horizontal]
    
loc_chng_sessions:
  description: "Число сессий со сменой локации"
  tags: [i1, geo]
  numerator:
    observations: [location_changings]
    groupby: [participant, session]
    
loc_bad_chng_sessions:
  description: "Число сессий с т.н. плохими сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i1, geo]
  numerator:
    observations: [location_changings_bad]
    groupby: [participant, session]
    
loc_susp_chng_sessions:
  description: "Число сессий с т.н. подозрительными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_suspicious]
    groupby: [participant, session]
    
loc_neutral_chng_sessions:
  description: "Число сессий с т.н. нейтральными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_neutral]
    groupby: [participant, session]
    
loc_bad_and_chng_sessions:
  description: "Число сессий с т.н. плохими и подозрительными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_bad, location_changings_suspicious]
    groupby: [participant, session]
    
users_loc_chng:
  description: "Число юзеров со сменой локации"
  tags: [i1, geo]
  numerator:
    observations: [location_changings]
    groupby: [participant]
    
users_loc_bad_chng:
  description: "Число юзеров с т.н. плохими сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i1, geo]
  numerator:
    observations: [location_changings_bad]
    groupby: [participant]
    
users_loc_susp_chng:
  description: "Число юзеров с т.н. подозрительными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_suspicious]
    groupby: [participant]
    
users_loc_neutral_chng:
  description: "Число юзеров с т.н. нейтральными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_neutral]
    groupby: [participant]
    
users_loc_bad_and_chng:
  description: "Число юзеров с т.н. плохими и подозрительными сменами локаций. Подробнее см. https://cf.avito.ru/pages/viewpage.action?pageId=108636802"
  tags: [i2, geo]
  numerator:
    observations: [location_changings_bad, location_changings_suspicious]
    groupby: [participant]
    
users_loc_expanded_chng:
  description: "Число юзеров со сменой локаций на расширение"
  tags: [i4, geo]
  numerator:
    observations: [location_changings_expanded]
    groupby: [participant] 
 
users_loc_detailed_chng:
  description: "Число юзеров со сменой локаций на сужение"
  tags: [i4, geo]
  numerator:
    observations: [location_changings_detailed]
    groupby: [participant] 
    
users_loc_horizontal_chng:
  description: "Число юзеров с горизонтальными сменами локации"
  tags: [i4, geo]
  numerator:
    observations: [location_changings_horizontal]
    groupby: [participant] 
  
loc_chng_region_russia:
  tags: [other, geo]
  description: "Смена локации с уровня региона на Россию"
  numerator:
    observations: [location_changings_region_russia]
    
loc_chng_city_region:
  tags: [other, geo]
  description: "Смена локации с уровня города на регион"
  numerator:
    observations: [location_changings_city_region]
 
loc_chng_russia_region:
  tags: [other, geo]
  description: "Смена локации с уровня России на регион"
  numerator:
    observations: [location_changings_russia_region]

loc_chng_russia_city:
  tags: [other, geo]
  description: "Смена локации с уровня России на город"
  numerator:
    observations: [location_changings_russia_city]
    
loc_chng_region_city:
  tags: [other, geo]
  description: "Смена локации с уровня региона на город"
  numerator:
    observations: [location_changings_region_city]

loc_chng_region_region:
  tags: [other, geo]
  description: "Смена локации с уровня региона на регион"
  numerator:
    observations: [location_changings_region_region]

loc_chng_city_city:
  tags: [other, geo]
  description: "Смена локации с уровня города на город"
  numerator:
    observations: [location_changings_city_city]
    
loc_chng_bad_russia:
  tags: [other, geo]
  description: "Плохие смены локации с уровня Россия"
  numerator:
    observations: [location_changings_bad_russia]
    
loc_chng_bad_region:
  tags: [other, geo]
  description: "Плохие смены локации с уровня региона"
  numerator:
    observations: [location_changings_bad_regions]
    
loc_chng_bad_city:
  tags: [other, geo]
  description: "Плохие смены локации с уровня города"
  numerator:
    observations: [location_changings_bad_city]
    
loc_chng_suspicious_russia:
  tags: [other, geo]
  description: "Подозрительные смены локации с уровня России"
  numerator:
    observations: [location_changings_suspicious_russia]

loc_chng_suspicious_region:
  tags: [other, geo]
  description: "Подозрительные смены локации с уровня региона"
  numerator:
    observations: [location_changings_suspicious_regions]

loc_chng_suspicious_city:
  tags: [other, geo]
  description: "Подозрительные смены локации с уровня города"
  numerator:
    observations: [location_changings_suspicious_city]

loc_chng_neutral_russia:
  tags: [other, geo]
  description: "Нейтральные смены локации с уровня России"
  numerator:
    observations: [location_changings_neutral_russia]

loc_chng_neutral_region:
  tags: [other, geo]
  description: "Нейтральные смены локации с уровня региона"
  numerator:
    observations: [location_changings_neutral_regions]

loc_chng_neutral_city:
  tags: [other, geo]
  description: "Нейтральные смены локации с уровня города"
  numerator:
    observations: [location_changings_neutral_city]

#тултип
default_loc_tooltip_shows:
  tags: [i3, geo]
  numerator: 
    observations: [tooltip_opens]

users_default_loc_tooltip:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_opens]
    groupby: [participant]

default_loc_tooltip_accepts:
  tags: [i3, geo]
  numerator:
    observations: [tooltip_accepts]

users_default_loc_tooltip_accepts:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_accepts]
    groupby: [participant]

default_loc_tooltip_declines:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_not_accepts]

users_default_loc_tooltip_declines:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_not_accepts]
    groupby: [participant]

default_loc_tooltip_accepts_russia:
  tags: [other, geo]
  description: "Принятие тултипа по всей России"
  numerator:
    observations: [tooltip_accepts_russia]
    groupby: [participant]

default_loc_tooltip_declines_russia:
  tags: [other, geo]
  description: "Отклонение тултипа по всей России"
  numerator:
    observations: [tooltip_not_accepts_russia]
    groupby: [participant]

default_loc_tooltip_accepts_region:
  tags: [other, geo]
  description: "Принятие тултипа уровня регион"
  numerator:
    observations: [tooltip_accepts_region]
    groupby: [participant]

default_loc_tooltip_declines_region:
  tags: [other, geo]
  description: "Отклонение тултипа  уровня регион"
  numerator:
    observations: [tooltip_not_accepts_region]
    groupby: [participant]

default_loc_tooltip_accepts_city:
  tags: [other, geo]
  description: "Принятие тултипа уровня город"
  numerator:
    observations: [tooltip_accepts_city]
    groupby: [participant]

default_loc_tooltip_declines_city:
  tags: [other, geo]
  description: "Отклонение тултипа  уровня город"
  numerator:
    observations: [tooltip_not_accepts_city]
    groupby: [participant]

default_loc_tooltip_shows_russia:
  tags: [other, geo]
  numerator: 
    observations: [tooltip_opens_russia]

default_loc_tooltip_shows_region:
  tags: [other, geo]
  numerator: 
    observations: [tooltip_opens_region]

default_loc_tooltip_shows_city:
  tags: [other, geo]
  numerator: 
    observations: [tooltip_opens_city]
    
#целевые действия с поисков     
searches_metro:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_metro]
    
searches_district:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_district]

searches_road:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_road]
    
searches_local_geo:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_metro,searches_district,searches_road]
    
searches_radius:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_radius]  

searches_metro_with_item_view:
  tags: [i4, geo, bx]
  title: searches_metro_iv
  numerator: 
    observations: [searches_metro_with_item_view]
    
searches_district_with_item_view:
  tags: [i4, geo, bx]
  title: searches_district_iv
  numerator: 
    observations: [searches_district_with_item_view]
    
searches_road_with_item_view:
  tags: [i4, geo, bx]
  title: searches_road_iv
  numerator: 
    observations: [searches_road_with_item_view]

searches_radius_with_item_view:
  tags: [i4, geo, bx]
  title: searches_radius_iv
  numerator: 
    observations: [searches_radius_with_item_view]

searches_metro_with_contact:
  tags: [i4, geo, bx]
  title: searches_metro_c
  numerator: 
    observations: [searches_metro_with_contact]
    
searches_district_with_contact:
  tags: [i4, geo, bx]
  title: searches_district_c
  numerator: 
    observations: [searches_district_with_contact]
    
searches_road_with_contact:
  tags: [i4, geo, bx]
  title: searches_road_c
  numerator: 
    observations: [searches_road_with_contact]

searches_radius_with_contact:
  tags: [i4, geo, bx]
  title: searches_radius_c
  numerator: 
    observations: [searches_radius_with_contact]
    
searches_metro_with_btc:
  tags: [i4, geo, bx]
  title: searches_metro_btc
  numerator: 
    observations: [searches_metro_with_btc]
    
searches_district_with_btc:
  tags: [i4, geo, bx]
  title: searches_district_btc
  numerator: 
    observations: [searches_district_with_btc]
    
searches_road_with_btc:
  tags: [i4, geo, bx]
  title: searches_road_btc
  numerator: 
    observations: [searches_road_with_btc]

searches_radius_with_btc:
  tags: [i4, geo, bx]
  title: searches_radius_btc
  numerator: 
    observations: [searches_radius_with_btc]    
    
item_views_serp_metro:
  tags: [i4, geo, bx]
  title: iv_serp_metro
  numerator: 
    observations: [item_views_serp_metro]
    
item_views_serp_district:
  tags: [i4, geo, bx]
  title: iv_serp_district
  numerator: 
    observations: [item_views_serp_district]

item_views_serp_road:
  tags: [i4, geo, bx]
  title: iv_serp_road
  numerator: 
    observations: [item_views_serp_road]

item_views_serp_radius:
  tags: [i4, geo, bx]
  title: iv_serp_radius
  numerator: 
    observations: [item_views_serp_radius]
    
contacts_serp_metro:
  tags: [i4, geo, bx]
  title: c_serp_metro
  numerator: 
    observations: [contacts_serp_metro]
    
contacts_serp_district:
  tags: [i4, geo, bx]
  title: c_serp_district
  numerator: 
    observations: [contacts_serp_district]

contacts_serp_road:
  tags: [i4, geo, bx]
  title: c_serp_road
  numerator: 
    observations: [contacts_serp_road]

contacts_serp_radius:
  tags: [i4, geo, bx]
  title: c_serp_radius
  numerator: 
    observations: [contacts_serp_radius]
    
fav_added_serp_metro:
  tags: [i4, geo, bx]
  title: fav_added_serp_metro
  numerator: 
    observations: [fav_added_serp_metro]
    
fav_added_serp_district:
  tags: [i4, geo, bx]
  title: fav_added_serp_district
  numerator: 
    observations: [fav_added_serp_district]

fav_added_serp_road:
  tags: [i4, geo, bx]
  title: fav_added_serp_road
  numerator: 
    observations: [fav_added_serp_road]

fav_added_serp_radius:
  tags: [i4, geo, bx]
  title: fav_added_serp_radius
  numerator: 
    observations: [fav_added_serp_radius]
    
buyer_target_clicks_serp_metro:
  tags: [i4, geo, bx]
  title: btc_serp_metro
  numerator: 
    observations: [buyer_target_clicks_serp_metro]
    
buyer_target_clicks_serp_district:
  tags: [i4, geo, bx]
  title: btc_serp_district
  numerator: 
    observations: [buyer_target_clicks_serp_district]

buyer_target_clicks_serp_road:
  tags: [i4, geo, bx]
  title: btc_serp_road
  numerator: 
    observations: [buyer_target_clicks_serp_road]

buyer_target_clicks_serp_radius:
  tags: [i4, geo, bx]
  title: btc_serp_radius
  numerator: 
    observations: [buyer_target_clicks_serp_radius]
    
#целевые действия с поисков по юзерам 
users_searches_metro:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_metro]
    groupby: [participant]
    
users_searches_district:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_district]
    groupby: [participant]
    
users_searches_road:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_road]
    groupby: [participant]
    
users_searches_radius:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_radius]
    groupby: [participant]
    
users_searches_local_geo:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_metro,searches_district,searches_road]
    groupby: [participant]
    
users_item_views_serp_metro:
  tags: [i4, geo, bx, user]
  title: users_iv_serp_metro
  numerator: 
    observations: [item_views_serp_metro]
    groupby: [participant]
    
users_item_views_serp_district:
  tags: [i4, geo, bx, user]
  title: users_iv_serp_district
  numerator: 
    observations: [item_views_serp_district]
    groupby: [participant]
    
users_item_views_serp_road:
  tags: [i4, geo, bx, user]
  title: users_iv_serp_road
  numerator: 
    observations: [item_views_serp_road]
    groupby: [participant]
    
users_item_views_serp_radius:
  tags: [i4, geo, bx, user]
  title: users_iv_serp_radius
  numerator: 
    observations: [item_views_serp_radius]
    groupby: [participant]
    
users_contacts_serp_metro:
  tags: [i2, geo, bx, user]
  title: buyers_serp_metro
  numerator: 
    observations: [contacts_serp_metro]
    groupby: [participant]
    
users_contacts_serp_district:
  tags: [i2, geo, bx, user]
  title:  buyers_serp_district
  numerator: 
    observations: [contacts_serp_district]
    groupby: [participant]
    
users_contacts_serp_road:
  tags: [i2, geo, bx, user]
  title: buyers_serp_road
  numerator: 
    observations: [contacts_serp_road]
    groupby: [participant]
    
users_contacts_serp_local_geo:
  tags: [i2, geo, bx, user]
  title:  buyers_local_geo
  numerator: 
    observations: [contacts_serp_district, contacts_serp_metro, contacts_serp_road]
    groupby: [participant]
    
users_contacts_serp_radius:
  tags: [i2, geo, bx, user]
  title: buyers_serp_radius
  numerator: 
    observations: [contacts_serp_radius]
    groupby: [participant]
    
users_buyer_target_clicks_serp_metro:
  tags: [i4, geo, bx, user]
  title: users_btc_serp_metro
  numerator: 
    observations: [buyer_target_clicks_serp_metro]
    groupby: [participant]
    
users_buyer_target_clicks_serp_district:
  tags: [i4, geo, bx, user]
  title: users_btc_serp_district
  numerator: 
    observations: [buyer_target_clicks_serp_district]
    groupby: [participant]
    
users_buyer_target_clicks_serp_road:
  tags: [i4, geo, bx, user]
  title: users_btc_serp_road
  numerator: 
    observations: [buyer_target_clicks_serp_road]
    groupby: [participant]
    
users_buyer_target_clicks_serp_radius:
  tags: [i4, geo, bx, user]
  title: users_btc_serp_radius
  numerator: 
    observations: [buyer_target_clicks_serp_radius]
    groupby: [participant]
    
#целевые действия с поисков по сессиям
sess_metro:
  tags: [i3, geo, bx]
  numerator: 
    observations: [searches_metro]
    groupby: [participant, session]
    
sess_searches_district:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_district]
    groupby: [participant, session]
    
sess_searches_road:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_road]
    groupby: [participant, session]
    
sess_searches_radius:
  tags: [i3, geo, bx, user]
  numerator: 
    observations: [searches_radius]
    groupby: [participant, session]    

###############################################################################
# Geo :: Ratios
###############################################################################

#смены локаций
loc_chng_sessions_per_s_session:
  tags: [i2, geo]
  numerator:
    observations: [location_changings]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
    
loc_bad_chng_sessions_per_s_sessions:
  tags: [i2, geo]
  numerator:
    observations: [location_changings_bad]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]

loc_bad__susp_chng_sessions_per_s_sessions:
  tags: [i2, geo]
  numerator:
    observations: [location_changings_bad, location_changings_suspicious]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
    
loc_window_saves_per_opens:
  title: loc_window_saves_per_opens
  tags: [i3, bx, total]
  numerator:
    observations: [location_dialogue_savings]
  denominator:
    observations: [location_dialogue_opens]

loc_suggests_per_text_inputs:
  title: loc_suggests_per_text_inputs
  tags: [i4, bx, total]
  numerator:
    observations: [location_suggest_clicks]
  denominator:
    observations: [location_text_inputs]

#тултип
default_loc_tooltip_accepts_per_shows:
  tags: [i3, geo]
  numerator:
    observations: [tooltip_accepts]
  denominator:
    observations: [tooltip_opens]
    
default_loc_tooltip_declines_per_shows:
  tags: [i3, geo]
  numerator:
    observations: [tooltip_not_accepts]
  denominator:
    observations: [tooltip_opens]
    
default_loc_tooltip_russia_share:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_opens_russia]
  denominator:
    observations: [tooltip_opens]   
    
default_loc_tooltip_region_share:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_opens_region]
  denominator:
    observations: [tooltip_opens]   

default_loc_tooltip_city_share:
  tags: [i4, geo]
  numerator:
    observations: [tooltip_opens_city]
  denominator:
    observations: [tooltip_opens]   

#целевые действия с поисков  
searches_metro_per_search:
  tags: [i4, geo, bx]
  title: s_metro_per_s
  numerator: 
    observations: [searches_metro]
  denominator:
    observations: [searches]
    
searches_district_per_search:
  tags: [i4, geo, bx]
  title: s_district_per_s
  numerator: 
    observations: [searches_district]
  denominator:
    observations: [searches]

searches_road_per_search:
  tags: [i4, geo, bx]
  title: s_road_per_s
  numerator: 
    observations: [searches_road]
  denominator:
    observations: [searches]   
    
searches_local_geo_per_search:
  tags: [i3, geo, bx]
  title: s_local_geo_per_s
  numerator: 
    observations: [searches_metro,searches_district,searches_road]
  denominator:
    observations: [searches]   
    
searches_radius_per_search:
  tags: [i4, geo, bx]
  title: s_radius_per_s
  numerator: 
    observations: [searches_radius]  
  denominator:
    observations: [searches]
    
searches_metro_with_item_view_per_search_metro:
  tags: [i4, geo, bx]
  title: s_metro_iv_per_s_metro
  numerator: 
    observations: [searches_metro_with_item_view]
  denominator:
    observations: [searches_metro]
    
searches_district_with_item_view_per_search_district:
  tags: [i4, geo, bx]
  title: s_district_iv_per_s_district
  numerator: 
    observations: [searches_district_with_item_view]
  denominator:
    observations: [searches_district]
    
searches_road_with_item_view_per_search_road:
  tags: [i4, geo, bx]
  title: s_road_iv_per_s_road
  numerator: 
    observations: [searches_road_with_item_view]
  denominator:
    observations: [searches_road]
    
searches_radius_with_item_view_per_search_radius:
  tags: [i4, geo, bx]
  title: s_radius_iv_per_s_radius
  numerator: 
    observations: [searches_radius_with_item_view]
  denominator:
    observations: [searches_radius]
    
searches_metro_with_contact_per_search_metro:
  tags: [i4, geo, bx]
  title: s_metro_c_per_s_metro
  numerator: 
    observations: [searches_metro_with_contact]
  denominator:
    observations: [searches_metro]
    
searches_district_with_contact_per_search_district:
  tags: [i4, geo, bx]
  title: s_district_c_per_s_district
  numerator: 
    observations: [searches_district_with_contact]
  denominator:
    observations: [searches_district]
    
searches_road_with_contact_per_search_road:
  tags: [i4, geo, bx]
  title: s_road_c_per_s_road
  numerator: 
    observations: [searches_road_with_contact]
  denominator:
    observations: [searches_road]
    
searches_radius_with_contact_per_search_radius:
  tags: [i4, geo, bx]
  title: s_radius_c_per_s_radius
  numerator: 
    observations: [searches_radius_with_contact]
  denominator:
    observations: [searches_radius]
    
searches_metro_with_btc_per_search_metro:
  tags: [i4, geo, bx]
  title: s_metro_btc_per_s_metro
  numerator: 
    observations: [searches_metro_with_btc]
  denominator:
    observations: [searches_metro]
    
searches_district_with_btc_per_search_district:
  tags: [i4, geo, bx]
  title: s_district_btc_per_s_district
  numerator: 
    observations: [searches_district_with_btc]
  denominator:
    observations: [searches_district]
    
searches_road_with_btc_per_search_road:
  tags: [i4, geo, bx]
  title: s_road_btc_per_s_road
  numerator: 
    observations: [searches_road_with_btc]
  denominator:
    observations: [searches_road]
    
searches_radius_with_btc_per_search_radius:
  tags: [i4, geo, bx]
  title: s_radius_btc_per_s_radius
  numerator: 
    observations: [searches_radius_with_btc]
  denominator:
    observations: [searches_radius] 
    
item_views_serp_metro_per_search_metro:
  tags: [i4, geo, bx]
  title: iv_metro_per_s_metro
  numerator: 
    observations: [item_views_serp_metro]
  denominator:
    observations: [searches_metro] 
    
item_views_serp_district_per_search_district:
  tags: [i4, geo, bx]
  title: iv_district_per_s_district
  numerator: 
    observations: [item_views_serp_district]
  denominator:
    observations: [searches_district] 

item_views_serp_road_per_search_road:
  tags: [i4, geo, bx]
  title: iv_road_per_s_road
  numerator: 
    observations: [item_views_serp_road]
  denominator:
    observations: [searches_road] 
    
item_views_serp_radius_per_search_radius:
  tags: [i4, geo, bx]
  title: iv_radius_per_s_radius
  numerator: 
    observations: [item_views_serp_radius]
  denominator:
    observations: [searches_radius] 
    
contacts_serp_metro_per_search_metro:
  tags: [i4, geo, bx]
  title: c_metro_per_s_metro
  numerator: 
    observations: [contacts_serp_metro]
  denominator:
    observations: [searches_metro] 
    
contacts_serp_district_per_search_district:
  tags: [i4, geo, bx]
  title: c_district_per_s_district
  numerator: 
    observations: [contacts_serp_district]
  denominator:
    observations: [searches_district] 

contacts_serp_road_per_search_road:
  tags: [i4, geo, bx]
  title: c_road_per_s_road
  numerator: 
    observations: [contacts_serp_road]
  denominator:
    observations: [searches_road] 
    
contacts_serp_radius_per_search_radius:
  tags: [i4, geo, bx]
  title: c_radius_per_s_radius
  numerator: 
    observations: [contacts_serp_radius]
  denominator:
    observations: [searches_radius] 
            
buyer_target_clicks_serp_metro_per_search_metro:
  tags: [i4, geo, bx]
  title: btc_metro_per_s_metro
  numerator: 
    observations: [buyer_target_clicks_serp_metro]
  denominator:
    observations: [searches_metro] 
    
buyer_target_clicks_serp_district_per_search_district:
  tags: [i4, geo, bx]
  title: btc_district_per_s_district
  numerator: 
    observations: [buyer_target_clicks_serp_district]
  denominator:
    observations: [searches_district] 

buyer_target_clicks_serp_road_per_search_road:
  tags: [i4, geo, bx]
  title: btc_road_per_s_road
  numerator: 
    observations: [buyer_target_clicks_serp_road]
  denominator:
    observations: [searches_road] 
    
buyer_target_clicks_serp_radius_per_search_radius:
  tags: [i4, geo, bx]
  title: btc_radius_per_s_radius
  numerator: 
    observations: [buyer_target_clicks_serp_radius]
  denominator:
    observations: [searches_radius] 
    
#целевые действия с поисков по юзерам 
users_searches_metro_per_users_search:
  tags: [i4, geo, bx]
  title: users_metro_per_users_search
  numerator: 
    observations: [searches_metro]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]
    
users_searches_district_per_users_search:
  tags: [i4, geo, bx]
  title: users_district_per_users_search
  numerator: 
    observations: [searches_district]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_searches_road_per_users_search:
  tags: [i4, geo, bx]
  title: users_road_per_users_search
  numerator: 
    observations: [searches_road]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]
    
users_searches_local_geo_per_users_search:
  tags: [i4, geo, bx]
  title: users_local_geo_per_users_search
  numerator: 
    observations: [searches_metro, searches_district, searches_road]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]
    
users_searches_radius_per_users_search:
  tags: [i4, geo, bx]
  title: users_radius_per_users_search
  numerator: 
    observations: [searches_radius]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_item_views_serp_metro_per_users_metro:
  tags: [i4, geo, bx, user]
  title: users_iv_metro_per_users_metro
  numerator: 
    observations: [item_views_serp_metro]
    groupby: [participant]
  denominator:
    observations: [searches_metro]
    groupby: [participant]
  
users_item_views_serp_district_per_users_district:
  tags: [i4, geo, bx, user]
  title: users_iv_district_per_users_district
  numerator: 
    observations: [item_views_serp_district]
    groupby: [participant]
  denominator:
    observations: [searches_district]
    groupby: [participant]
    
users_item_views_serp_road_per_users_road:
  tags: [i4, geo, bx, user]
  title: users_iv_road_per_users_road
  numerator: 
    observations: [item_views_serp_road]
    groupby: [participant]
  denominator:
    observations: [searches_road]
    groupby: [participant]
    
users_item_views_serp_radius_per_users_radius:
  tags: [i4, geo, bx, user]
  title: users_iv_radius_per_users_radius
  numerator: 
    observations: [item_views_serp_radius]
    groupby: [participant]
  denominator:
    observations: [searches_radius]
    groupby: [participant]
    
users_contacts_serp_metro_per_users_metro:
  tags: [i3, geo, bx, user]
  title: buyers_metro_per_users_metro
  numerator: 
    observations: [contacts_serp_metro]
    groupby: [participant]
  denominator: 
    observations: [searches_metro]
    groupby: [participant]
    
users_contacts_serp_district_per_users_district:
  tags: [i3, geo, bx, user]
  title: buyers_district_per_users_district
  numerator: 
    observations: [contacts_serp_district]
    groupby: [participant]
  denominator: 
    observations: [searches_district]
    groupby: [participant]
    
users_contacts_serp_road_per_users_road:
  tags: [i3, geo, bx, user]
  title: buyers_road_per_users_road
  numerator: 
    observations: [contacts_serp_road]
    groupby: [participant]
  denominator: 
    observations: [searches_road]
    groupby: [participant]

users_contacts_serp_radius_per_users_radius:
  tags: [i3, geo, bx, user]
  title: buyers_radius_per_users_radius
  numerator: 
    observations: [contacts_serp_radius]
    groupby: [participant]
  denominator: 
    observations: [searches_radius]
    groupby: [participant]
 
users_btc_serp_metro_per_users_metro:
  tags: [i3, geo, bx, user]
  title: users_btc_metro_per_users_metro
  numerator: 
    observations: [buyer_target_clicks_serp_metro]
    groupby: [participant]
  denominator: 
    observations: [searches_metro]
    groupby: [participant]
    
users_btc_serp_district_per_users_district:
  tags: [i3, geo, bx, user]
  title: users_btc_district_per_users_district
  numerator: 
    observations: [buyer_target_clicks_serp_district]
    groupby: [participant]
  denominator: 
    observations: [searches_district]
    groupby: [participant]
    
users_btc_serp_road_per_users_road:
  tags: [i3, geo, bx, user]
  title: users_btc_road_per_users_road
  numerator: 
    observations: [buyer_target_clicks_serp_road]
    groupby: [participant]
  denominator: 
    observations: [searches_road]
    groupby: [participant]
    
users_btc_serp_radius_per_users_radius:
  tags: [i3, geo, bx, user]
  title: users_btc_radius_per_users_radius
  numerator: 
    observations: [buyer_target_clicks_serp_radius]
    groupby: [participant]
  denominator: 
    observations: [searches_radius]
    groupby: [participant]


##     ##    ###    ########  
###   ###   ## ##   ##     ## 
#### ####  ##   ##  ##     ## 
## ### ## ##     ## ########  
##     ## ######### ##        
##     ## ##     ## ##        
##     ## ##     ## ##        

###############################################################################
# Map :: Totals
###############################################################################

map_searches:
  title: map_searches
  tags: [i3, bx, total, map]
  numerator:
    observations: [map_searches]

pin_clicks:
  title: pin_clicks
  tags: [i3, bx, total, map]
  numerator:
    observations: [pin_clicks]
    
map_searches_sessions:
  title: sess_map
  tags: [i3, bx, total, map]
  numerator:
    observations: [map_searches]    
    groupby: [participant, session]
     
pin_clicks_sessions:
  title: sess_pin
  tags: [i3, bx, total, map]
  numerator:
    observations: [pin_clicks]    
    groupby: [participant, session]
          
map_users:
  tags: [i3, bx, user, map]
  numerator:
    observations: [map_searches]
    groupby: [participant]

pin_clickers:
  tags: [i3, bx, user, map]
  numerator:
    observations: [pin_clicks]
    groupby: [participant]
    
map_searches_with_item_view:
  title: map_search_iv
  tags: [i3, bx, user, map]
  numerator:
    observations: [map_searches_with_item_view]
    
map_searches_with_contact:
  title: map_search_c
  tags: [i3, bx, user, map]
  numerator:
    observations: [map_searches_with_contact]
   
map_searches_with_btc:
  title: map_search_btc
  tags: [i3, bx, user, map]
  numerator:
    observations: [map_searches_with_btc]
    
buyer_target_clicks_from_map:
  title: btc_map
  tags: [i3, bx, user, map]
  numerator:
    observations: [buyer_target_clicks_from_map]
    
item_views_from_map:
  title: iv_map
  tags: [i3, bx, user, map]
  numerator:
    observations: [item_views_from_map]
    
contacts_from_map:
  title: contacts_map
  tags: [i3, bx, user, map]
  numerator:
    observations: [contacts_from_map]
    
fav_added_from_map:
  title: fav_map
  tags: [i3, bx, user, map]
  numerator:
    observations: [fav_added_from_map]

users_buyer_target_click_from_map:
  title: users_btc_map
  tags: [i2, bx, user, map]
  numerator:
    observations: [buyer_target_clicks_from_map]
    groupby: [participant]
    
users_item_views_from_map:
  title: users_iv_map
  tags: [i2, bx, user, map]
  numerator:
    observations: [item_views_from_map]  
    groupby: [participant]
    
buyers_from_map:
  title: buyers_map
  tags: [i2, bx, user, map]
  numerator:
    observations: [contacts_from_map]  
    groupby: [participant]
    
users_fav_from_map:
  title: users_fav_map
  tags: [i2, bx, user, map]
  numerator:
    observations: [fav_added_from_map]  
    groupby: [participant]
    
contact_sessions_from_map:
  title: sess_c_map
  tags: [i3, bx, total, map]
  numerator:
    observations: [contacts_from_map]    
    groupby: [participant, session]
    
btc_sessions_from_map:
  title: sess_btc_map
  tags: [i3, bx, total, map]
  numerator:
    observations: [buyer_target_clicks_from_map]    
    groupby: [participant, session]

iv_sessions_from_map:
  title: sess_iv_map
  tags: [i3, bx, total, map]
  numerator:
    observations: [item_views_from_map]    
    groupby: [participant, session]    
 
    
###############################################################################
# Map :: Ratios
###############################################################################


map_searches_per_search:
  title: map_s_per_s
  tags: [other, bx,  map]
  description: "Отношение поисков на карте к обычным поискам"
  numerator:
    observations: [map_searches]
  denominator:
    observations: [searches]
    
pins_per_map_s:
  title: pins_per_map
  tags: [i3, bx,  map]
  description: "Отношение кликов на пин к поискам по карте"
  numerator:
    observations: [pin_clicks]
  denominator:
    observations: [map_searches]
    
pin_clickers_per_map_serchers:
  title: users_pin_per_users_map
  tags: [i3, bx,  map]
  description: "Отношение пиннеров к мапперам"
  numerator:
    observations: [pin_clicks]
    groupby: [participant]
  denominator:
    observations: [map_searches]
    groupby: [participant]
    
map_buyers_per_map_serchers:
  title: buyers_map_per_users_map
  tags: [i2, bx,  map]
  description: "Отношение баеров с карты к мапперам"
  numerator:
    observations: [contacts_from_map]
    groupby: [participant]
  denominator:
    observations: [map_searches]
    groupby: [participant]
    
map_item_viewers_per_map_serchers:
  title: users_iv_map_per_users_map
  tags: [i3, bx,  map]
  description: "Отношение item viewers с карты к мапперам"
  numerator:
    observations: [item_views_from_map]
    groupby: [participant]
  denominator:
    observations: [map_searches]
    groupby: [participant]

map_btc_users_per_map_serchers:
  title: users_btc_map_per_users_map
  tags: [i3, bx,  map]
  description: "Отношение бтц юзеров с карты к мапперам"
  numerator:
    observations: [buyer_target_clicks_from_map]
    groupby: [participant]
  denominator:
    observations: [map_searches]
    groupby: [participant]

contacts_from_map_per_map_search:
  title: contacts_map_per_map_s
  tags: [i3, bx,  map]
  description: "Контакты с карты к поискам по карте"
  numerator:
    observations: [contacts_from_map]
  denominator:
    observations: [map_searches]
    
item_views_from_map_per_map_search:
  title: iv_map_per_map_s
  tags: [i3, bx,  map]
  description: "IV с карты к поискам по карте"
  numerator:
    observations: [item_views_from_map]
  denominator:
    observations: [map_searches]
    
btc_from_map_per_map_search:
  title: btc_map_per_map_s
  tags: [i3, bx,  map]
  description: "IV с карты к поискам по карте"
  numerator:
    observations: [buyer_target_clicks_from_map]
  denominator:
    observations: [map_searches]
    
fav_added_from_map_per_map_search:
  title: fav_map_per_map_s
  tags: [i3, bx,  map]
  description: "Добавление в избранное с карты к поискам по карте"
  numerator:
    observations: [fav_added_from_map]
  denominator:
    observations: [map_searches]
    
sess_c_map_per_sess_map:
  title: sess_c_map_per_sess_map
  tags: [i3, bx,  map]
  description: "Сессии с контактом с карты к сессиям с поисками по карте"
  numerator:
    observations: [contacts_from_map]
    groupby: [participant, session]
  denominator:
    observations: [map_searches]
    groupby: [participant, session]
    
sess_btc_map_per_sess_map:
  title: sess_btc_map_per_sess_map
  tags: [i3, bx,  map]
  description: "Сессии с BTC с карты к сессиям с поисками по карте"
  numerator:
    observations: [buyer_target_clicks_from_map]
    groupby: [participant, session]
  denominator:
    observations: [map_searches]
    groupby: [participant, session]
    
sess_iv_map_per_sess_map:
  title: sess_iv_map_per_sess_map
  tags: [i3, bx,  map]
  description: "Сессии с IV с карты к сессиям с поисками по карте"
  numerator:
    observations: [item_views_from_map]
    groupby: [participant, session]
  denominator:
    observations: [map_searches]
    groupby: [participant, session]
    
sess_pin_per_sess_map:
  title: sess_pin_per_sess_map
  tags: [i3, bx,  map]
  description: "Сессии с кликами по пину с карты к сессиям с поисками по карте"
  numerator:
    observations: [pin_clicks]
    groupby: [participant, session]
  denominator:
    observations: [map_searches]
    groupby: [participant, session]