# Headers generator — http://patorjk.com/software/taag/#p=display&f=Banner3&t=buyer

########  ##     ## ##    ## ######## ########
##     ## ##     ##  ##  ##  ##       ##     ##
##     ## ##     ##   ####   ##       ##     ##
########  ##     ##    ##    ######   ########
##     ## ##     ##    ##    ##       ##   ##
##     ## ##     ##    ##    ##       ##    ##
########   #######     ##    ######## ##     ##

###############################################################################
# Buyer :: Totals
###############################################################################

item_views:
  title: item_views
  tags: [i2, bx, total]
  numerator:
    observations: [item_views]

item_views_grouped:
  title: item_views_grouped
  tags: [i2, bx, total, grouped]
  numerator:
    observations: [item_views_net]

contacts:
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
  tags: [i1, bx, total]

contacts_grouped:
  title:   contacts_groupped
  numerator:
    observations: [contacts_net]
  tags: [i1, bx, total, grouped]

advertisement_page_views:
  title: advertisement_page_views
  tags: [critical, rise, ad, total]
  numerator:
    observations: [advertisement_page_views]

phone_views_snippet:
  title: phone_views_snippet
  tags: [i3, bx, total]
  numerator:
    observations: [phone_views_snippet, phone_views_snippet_xlvas]

phone_views:
  title: phone_views
  tags: [i2, bx, total]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top]

phone_views_grouped:
  title: phone_views_grouped
  tags: [i3, bx, total,grouped]
  numerator:
    observations: [phone_views_total_net]

phone_views_total:
  title: phone_views_total
  tags: [i3, bx, total]
  numerator:
    observations: [phone_views_total]

favorites_added:
  title: favorites_added
  tags: [i2, bx, fav, total]
  numerator:
    observations: [favorites_added]

first_messages:
  title: first_messages
  tags: [i2, bx, mes, total]
  numerator:
    observations: [first_messages]

all_main_pages:
  title: all_main_pages
  tags: [i2, bx, rec, main, total]
  numerator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]

head_main_pages:
  title: head_main_pages
  tags: [i2, bx, rec, main, total]
  numerator:
    observations: [head_main_pages]

vertical_main_pages:
  title: vertical_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [transport_main_pages, re_main_pages, services_main_pages]

transport_main_pages:
  title: transport_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [transport_main_pages]

re_main_pages:
  title: re_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [re_main_pages]

services_main_pages:
  title: services_main_pages
  tags: [i4, bx, rec, main, total]
  numerator:
    observations: [services_main_pages]

bt_clicks:
  title: bt_clicks
  tags: [i1, bx, total]
  numerator:
    observations: [phone_views_total, first_messages, delivery_order_created, booking_created_short_rent, favorites_added,write_button_clicks]

bt_clicks_grouped:
  title: bt_clicks_grouped
  tags: [i1, bx, total, group]
  numerator:
    observations: [phone_views_total_net, first_messages, delivery_order_created_net, booking_created_short_rent_net, favorites_added,write_button_clicks_net]

map_searches:
  title: map_searches
  tags: [i3, bx, total, map]
  numerator:
    observations: [map_searches]

pin_clicks:
  title: pin_clicks
  tags: [i3, bx, total, map]
  numerator:
    observations: [pin_clicks]

ad_clicks:
  tags: [critical, bx]
  numerator:
    observations: [ad_clicks]

ad_successes:
  tags: [i1, bx]
  numerator:
    observations: [ad_successes]

ad_fails:
  tags: [i1, bx]
  numerator:
    observations: [ad_fails]

###############################################################################
# Buyer :: Ratios
###############################################################################

phone_views_per_item_view:
  title: phone_views_per_item_view
  tags: [i3, bx, ratio]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top]
  denominator:
    observations: [item_views]

contacts_per_item_view:
  title: contacts_per_item_view
  tags: [i2, bx, ratio]
  numerator:
    observations: [phone_views_item_right, phone_views_item_top, booking_created_short_rent, first_messages, delivery_order_created]
  denominator:
    observations: [item_views]

delivery_orders_per_flow_begining:
  numerator:
    observations: [delivery_order_created]
  denominator:
    observations: [delivery_flow_beginings]

###############################################################################
# Buyer :: User Totals
###############################################################################

users_active_daily:
  title: users_active
  tags: [critical, bx, user]
  numerator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
    groupby: [participant]

users_item_view_daily:
  title: users_item_view
  tags: [i1, bx, user]
  numerator:
    observations: [item_views]
    groupby: [participant]

buyers:
  title: buyers
  tags: [i0, bx, user]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
    groupby: [participant]

users_all_main_page_daily:
  title: users_main_page
  tags: [i2, bx, rec, main, user]
  numerator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_head_main_page_daily:
  title: users_head_main_page
  tags: [i2, bx, rec, main, user]
  numerator:
    observations: [head_main_pages]
    groupby: [participant]

users_transport_main_page_daily:
  title: users_transport_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [transport_main_pages]
    groupby: [participant]

users_re_main_page_daily:
  title: users_re_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [re_main_pages]
    groupby: [participant]

users_services_main_page_daily:
  title: users_services_main_page
  tags: [i4, bx, rec, main, user]
  numerator:
    observations: [services_main_pages]
    groupby: [participant]

users_vertical_main_page_daily:
  title: users_vertical_main_page
  tags: [i3, bx, rec, main, user]
  numerator:
    observations: [transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_bt_click_daily:
  title: users_bt_click
  tags: [i0, bx, user]
  numerator:
    observations: [phone_views_total, first_messages, booking_created_short_rent, delivery_order_created, favorites_added]
    groupby: [participant]

users_favorites:
  title: users_favorites
  tags: [i2, bx, user]
  numerator:
    observations: [favorites_added]
    groupby: [participant]

map_users:
  title: map_users
  tags: [i3, bx, user, map]
  numerator:
    observations: [map_searches]
    groupby: [participant]

pin_clickers:
  title: pin_clickers
  tags: [i3, bx, user, map]
  numerator:
    observations: [pin_clicks]
    groupby: [participant]

###############################################################################
# Buyer :: User Ratios
###############################################################################

buyers_per_users:
  title: buyers_per_users
  tags: [i0, bx, ratio]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
    groupby: [participant]

users_item_view_per_users:
  title: users_item_view_per_users
  tags: [i1, bx, ratio]
  numerator:
    observations: [item_views]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
    groupby: [participant]

users_bt_click_per_users:
  title: users_bt_click_per_users
  tags: [i1, bx, ratio]
  numerator:
    observations: [phone_views_total, first_messages, booking_created_short_rent, delivery_order_created, favorites_added]
    groupby: [participant]
  denominator:
    observations:
      - item_views
      - phone_views_total
      - first_messages
      - booking_created_short_rent
      - delivery_flow_beginings
      - delivery_order_created
      - searches_without_query
      - searches_with_query
      - favorites_added
    groupby: [participant]

buyers_per_users_favorites:
  title: buyers_per_users_favorites
  tags: [bx, ratio]
  numerator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
    groupby: [participant]
  denominator:
    observations: [favorites_added]
    groupby: [participant]

###############################################################################
# Buyer :: Other
###############################################################################

favorites_removed:
  title: favorites_removed
  tags: [i4, bx, fav, total]
  numerator:
    observations: [favorites_removed]

favorites_list_views:
  title: favorites_list_views
  tags: [i4, bx, fav, total]
  numerator:
    observations: [favorites_list_views]

saved_searches_added:
  title: saved_searches_added
  tags: [i4, bx, ss, total]
  numerator:
    observations: [saved_searches_added]

loc_window_opens:
  title: loc_window_opens
  tags: [i4, bx, total]
  numerator:
    observations: [location_window_displays]

location_text_inputs:
  title: location_text_inputs
  tags: [i4, bx, total]
  numerator:
    observations: [location_text_inputs]

loc_window_saves_per_opens:
  title: loc_window_saves_per_opens
  tags: [i4, bx, total]
  numerator:
    observations: [location_window_save_clicks]
  denominator:
    observations: [location_window_displays]

loc_suggests_per_text_inputs:
  title: loc_suggests_per_text_inputs
  tags: [i4, bx, total]
  numerator:
    observations: [location_suggest_clicks]
  denominator:
    observations: [location_text_inputs]

users_loc_window_opens:
  title: users_loc_window_opens
  tags: [i4, bx,  user]
  numerator:
    observations: [location_window_displays]
    groupby: [participant]

users_loc_suggest_clicks:
  title: users_loc_suggest_clicks
  tags: [i4, bx,  user]
  numerator:
    observations: [location_suggest_clicks]
    groupby: [participant]

searches_and_item_views_to_contact:
  title: siv_to_contact
  tags: [i3, bx]
  numerator:
    observations: [searches_and_iv_to_contact]

ad_pages_to_contact:
  title: ad_pages_to_contact
  tags: [i3, bx]
  numerator:
    observations: [ad_pages_to_contact]

item_views_to_contact:
  title: iv_to_contact
  tags: [i3, bx]
  numerator:
    observations: [item_views_to_contact]

searches_to_contact:
  title: searches_to_contact
  tags: [i3, bx]
  numerator:
    observations: [searches_to_contact]

###############################################################################
# Buyer :: Performance (Time To Content) Ratios
###############################################################################

mean_time_to_content_item_screen:
  tags: [bx, performance, item, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_item]
  denominator:
    observations: [performance_measures_count_item]

mean_time_to_content_serp_screen:
  tags: [bx, performance, serp, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_serp]
  denominator:
    observations: [performance_measures_count_serp]

mean_time_to_content_main_screen:
  tags: [bx, performance, main, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_main]
  denominator:
    observations: [performance_measures_count_main]

mean_time_to_content_channel_screen:
  tags: [bx, performance, channel, ttc, ratio]
  description: "mean time to content evaluation for chatting screen"
  numerator:
    observations: [performance_time_to_content_channel]
  denominator:
    observations: [performance_measures_count_channel]

mean_time_to_content_channels_screen:
  tags: [bx, performance, channels, ttc, ratio]
  description: "mean time to content evaluation for screen with list of chats"
  numerator:
    observations: [performance_time_to_content_channels]
  denominator:
    observations: [performance_measures_count_channels]

mean_time_to_content_public_profile_screen:
  tags: [bx, performance, public_profile, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_public_profile]
  denominator:
    observations: [performance_measures_count_public_profile]

mean_time_to_content_profile_item_screen:
  tags: [bx, performance, profile_item, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_profile_item]
  denominator:
    observations: [performance_measures_count_profile_item]

mean_time_to_content_account_screen:
  tags: [bx, performance, account, ttc, ratio]
  description: "mean time to content evaluation for screen with list of users items"
  numerator:
    observations: [performance_time_to_content_account]
  denominator:
    observations: [performance_measures_count_account]

mean_time_to_content_favorite_items_screen:
  tags: [bx, performance, favorite_items, ttc, ratio]
  numerator:
    observations: [performance_time_to_content_favorite_items]
  denominator:
    observations: [performance_measures_count_favorite_items]

mean_time_to_content_other_screen:
  tags: [bx, performance, other, ttc, ratio]
  numerator:
    observations: [
      performance_time_to_content_publish_wizard,
      performance_time_to_content_edit_item,
      performance_time_to_content_authorization,
      performance_time_to_content_shop_info,
      performance_time_to_content_profile,
      performance_time_to_content_shops_list]
  denominator:
    observations: [
      performance_measures_count_publish_wizard,
      performance_measures_count_edit_item,
      performance_measures_count_authorization,
      performance_measures_count_shop_info,
      performance_measures_count_profile,
      performance_measures_count_shops_list]

mean_screen_exception_proba:
  tags: [bx, performance, exception, ttc, ratio]
  numerator:
    observations: [
      performance_exceptions_count_item,
      performance_exceptions_count_serp,
      performance_exceptions_count_main,
      performance_exceptions_count_channel,
      performance_exceptions_count_channels,
      performance_exceptions_count_public_profile,
      performance_exceptions_count_profile_item,
      performance_exceptions_count_account,
      performance_exceptions_count_publish_wizard,
      performance_exceptions_count_edit_item,
      performance_exceptions_count_authorization,
      performance_exceptions_count_shop_info,
      performance_exceptions_count_profile,
      performance_exceptions_count_shops_list]
  denominator:
    observations: [
      performance_events_count_item,
      performance_events_count_serp,
      performance_events_count_main,
      performance_events_count_channel,
      performance_events_count_channels,
      performance_events_count_public_profile,
      performance_events_count_profile_item,
      performance_events_count_account,
      performance_events_count_publish_wizard,
      performance_events_count_edit_item,
      performance_events_count_authorization,
      performance_events_count_shop_info,
      performance_events_count_profile,
      performance_events_count_shops_list]

 ######  ########    ###    ########   ######  ##     ##
##    ## ##         ## ##   ##     ## ##    ## ##     ##
##       ##        ##   ##  ##     ## ##       ##     ##
 ######  ######   ##     ## ########  ##       #########
      ## ##       ######### ##   ##   ##       ##     ##
##    ## ##       ##     ## ##    ##  ##    ## ##     ##
 ######  ######## ##     ## ##     ##  ######  ##     ##

###############################################################################
# Search :: Totals
###############################################################################

misspell_replace:
  title: misspell_replace
  tags: [misspell]
  numerator:
    observations: [misspell_replace]

misspell_suggest:
  title: misspell_suggest
  tags: [misspell]
  numerator:
    observations: [misspell_suggest]

teleport_replace:
  title: teleport_replace
  tags: [misspell]
  numerator:
    observations: [teleport_replace]

teleport_suggest:
  title: teleport_suggest
  tags: [misspell]
  numerator:
    observations: [teleport_suggest]

search_redirect_replace:
  title: search_redirect_replace
  tags: [misspell]
  numerator:
    observations: [search_redirect_replace]

search_redirect_suggest:
  title: search_redirect_suggest
  tags: [misspell]
  numerator:
    observations: [search_redirect_suggest]

geo_redirect_replace:
  title: geo_redirect_replace
  tags: [misspell]
  numerator:
    observations: [geo_redirect_replace]

geo_redirect_suggest:
  title: geo_redirect_suggest
  tags: [misspell]
  numerator:
    observations: [geo_redirect_suggest]

typo_replace:
  title: typo_replace
  tags: [misspell]
  numerator:
    observations: [typo_replace]

typo_suggest:
  title: typo_suggest
  tags: [misspell]
  numerator:
    observations: [typo_suggest]

keyboard_replace:
  title: keyboard_replace
  tags: [misspell]
  numerator:
    observations: [keyboard_replace]

keyboard_suggest:
  title: keyboard_suggest
  tags: [misspell]
  numerator:
    observations: [keyboard_suggest]

wordbreaker_replace:
  title: wordbreaker_replace
  tags: [misspell]
  numerator:
    observations: [wordbreaker_replace]

wordbreaker_suggest:
  title: wordbreaker_suggest
  tags: [misspell]
  numerator:
    observations: [wordbreaker_suggest]

wordbreaker_digit_replace:
  title: wordbreaker_digit_replace
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_replace]

wordbreaker_digit_suggest:
  title: wordbreaker_digit_suggest
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_suggest]

misspell_disabled:
  title: misspell_disabled
  tags: [misspell]
  numerator:
    observations: [misspell_disabled]

misspell_suggest_disabled:
  title: misspell_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [misspell_suggest_disabled]

teleport_disabled:
  title: teleport_disabled
  tags: [misspell]
  numerator:
    observations: [teleport_disabled]

teleport_suggest_disabled:
  title: teleport_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [teleport_suggest_disabled]

search_redirect_disabled:
  title: search_redirect_disabled
  tags: [misspell]
  numerator:
    observations: [search_redirect_disabled]

search_redirect_suggest_disabled:
  title: search_redirect_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [search_redirect_suggest_disabled]

geo_redirect_disabled:
  title: geo_redirect_disabled
  tags: [misspell]
  numerator:
    observations: [geo_redirect_disabled]

geo_redirect_suggest_disabled:
  title: geo_redirect_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [geo_redirect_suggest_disabled]

typo_disabled:
  title: typo_disabled
  tags: [misspell]
  numerator:
    observations: [typo_disabled]

typo_suggest_disabled:
  title: typo_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [typo_suggest_disabled]

keyboard_disabled:
  title: keyboard_disabled
  tags: [misspell]
  numerator:
    observations: [keyboard_disabled]

keyboard_suggest_disabled:
  title: keyboard_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [keyboard_suggest_disabled]

wordbreaker_disabled:
  title: wordbreaker_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_disabled]

wordbreaker_suggest_disabled:
  title: wordbreaker_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_suggest_disabled]

wordbreaker_digit_disabled:
  title: wordbreaker_digit_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_disabled]

wordbreaker_digit_suggest_disabled:
  title: wordbreaker_digit_suggest_disabled
  tags: [misspell]
  numerator:
    observations: [wordbreaker_digit_suggest_disabled]

searches_date_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_date_sort]

searches_price_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_price_sort]

searches_default_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_default_sort]

searches_with_query_date_sort:
  tags: [i3, bx, total]
  numerator:
    observations: [searches_with_query_date_sort]

searches_with_query:
  title: searches_with_query
  tags: [i3, bx, total]
  numerator:
    observations: [searches_with_query]

searches_without_query:
  title: searches_without_query
  tags: [i3, bx, total]
  numerator:
    observations: [searches_without_query]

searches:
  title: searches
  tags: [i2, bx, total]
  numerator:
    observations: [searches]
  description: only first page

searches_new:
  title: searches_new
  tags: [i2, bx, total]
  numerator:
    observations: [searches]
  description: only first page

searches_serp:
  title: searches_serp
  tags: [i2, bx, total]
  numerator:
    observations: [searches_serp]
  description: all pages included

serp_empty:
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_empty]

serp_small:
  title: serp_small
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_small]
  
serp_with_query_empty:
  title: serp_with_query_empty
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_with_query_empty]
  
serp_with_query_small:
  title: serp_with_query_small
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_with_query_small]
  
serp_without_query_empty:
  title: serp_no_query_empty
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_without_query_empty]
  
serp_without_query_small:
  title: serp_no_query_small
  tags: [i2, bx, serp, total]
  numerator:
    observations: [serp_without_query_small]

searches_item_view_vip:
  title: searches_item_view_vip
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_vip]

searches_item_view_premium:
  title: searches_item_view_premium
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_premium]

searches_item_view_push:
  title: searches_item_view_push
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_push]

searches_item_view_vas:
  title: searches_item_view_vas
  tags: [i3, bx, serp, vas, has]
  numerator:
    observations: [searches_item_view_vas]

searches_item_view_serp:
  title: searches_item_view_serp
  tags: [i3, bx, serp, has]
  numerator:
    observations: [searches_item_view_serp]

shows_item_view_recblock:
  title: shows_item_view_recblock
  tags: [i3, bx, rec, has]
  numerator:
    observations: [shows_item_view_recblock]

searches_contact_vip:
  title: searches_contact_vip
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_vip]

searches_contact_premium:
  title: searches_contact_premium
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_premium]

searches_contact_push:
  title: searches_contact_push
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_push]

searches_contact_vas:
  title: searches_contact_vas
  tags: [i4, bx, serp, vas, has]
  numerator:
    observations: [searches_contact_vas]

searches_contact_serp:
  title: searches_contact_serp
  tags: [i4, bx, serp, has]
  numerator:
    observations: [searches_contact_serp]

shows_contact_recblock:
  title: shows_contact_recblock
  tags: [i3, bx, rec, has]
  numerator:
    observations: [shows_contact_recblock]

item_views_vip:
  title: item_views_vip
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_vip]

item_views_premium:
  title: item_views_premium
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_premium]

item_views_push:
  title: item_views_push
  tags: [bx, vas, total]
  numerator:
    observations: [item_views_push]

item_views_vas:
  title: item_views_vas
  tags: [critical, bx, vas, total]
  numerator:
    observations: [item_views_vas]

item_views_serp:
  title: item_views_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [item_views_serp]

contacts_vip:
  title: contacts_vip
  tags: [bx, vas, total]
  numerator:
    observations: [contacts_vip]

contacts_premium:
  title: contacts_premium
  tags: [bx, vas, total]
  numerator:
    observations: [contacts_premium]

contacts_push:
  title: contacts_push
  tags: [i4, bx, vas, total]
  numerator:
    observations: [contacts_push]

contacts_vas:
  title: contacts_vas
  tags: [i3, bx, vas, total]
  numerator:
    observations: [contacts_vas]

contacts_serp:
  title: contacts_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [contacts_serp]

contacts_rec:
  title: contacts_rec
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec]

fav_added_vip:
  title: fav_added_vip
  tags: [bx, vas, fav, total]
  numerator:
    observations: [fav_added_vip]

fav_added_premium:
  title: fav_added_premium
  tags: [bx, vas, fav, total]
  numerator:
    observations: [fav_added_premium]

fav_added_push:
  title: fav_added_push
  tags: [i4, bx, vas, fav, total]
  numerator:
    observations: [fav_added_push]

fav_added_vas:
  title: fav_added_vas
  tags: [i4, bx, vas, fav, total]
  numerator:
    observations: [fav_added_vas]

fav_added_serp:
  title: fav_added_serp
  tags: [i2, bx, serp, fav, total]
  numerator:
    observations: [fav_added_serp]

fav_added_rec:
  title: fav_added_rec
  tags: [i2, bx, rec, fav, total]
  numerator:
    observations: [fav_added_rec]

buyer_target_clicks_vip:
  title: bt_clicks_vip
  tags: [i4, bx, serp, vas, total]
  numerator:
    observations: [buyer_target_clicks_vip]

buyer_target_clicks_premium:
  title: bt_clicks_premium
  tags: [bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_premium]

buyer_target_clicks_push:
  title: bt_clicks_push
  tags: [bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_push]

buyer_target_clicks_vas:
  title: bt_clicks_vas
  tags: [critical, bx, vas, total]
  numerator:
    observations: [buyer_target_clicks_vas]

buyer_target_clicks_serp:
  title: bt_clicks_serp
  tags: [i2, bx, serp, total]
  numerator:
    observations: [buyer_target_clicks_serp]

buyer_target_clicks_rec:
  title: bt_clicks_rec
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec]

suggest_buyers:
  description: "Buyers, who use suggest"
  tags: [ss, sgt]
  numerator:
    observations: [queries_no_redirect_contact]
    groupby: [participant]

share_suggest_buyers_to_all_users:
  description: "Buyers, who use suggest"
  tags: [ss, sgt]
  numerator:
    observations: [sessions_with_suggest_click_and_contact]
    groupby: [participant]

###############################################################################
# Search :: Ratios
###############################################################################

misspell_replace_ctr_disable:
  title: misspell_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [misspell_disabled]
  denominator:
    observations: [misspell_replace]

misspell_suggest_ctr_disable:
  title: misspell_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [misspell_suggest_disabled]
  denominator:
    observations: [misspell_suggest]

teleport_replace_ctr_disable:
  title: teleport_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [teleport_disabled]
  denominator:
    observations: [teleport_replace]

teleport_suggest_ctr_disable:
  title: teleport_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [teleport_suggest_disabled]
  denominator:
    observations: [teleport_suggest]

search_redirect_replace_ctr_disable:
  title: search_redirect_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [search_redirect_disabled]
  denominator:
    observations: [search_redirect_replace]

search_redirect_suggest_ctr_disable:
  title: search_redirect_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [search_redirect_suggest_disabled]
  denominator:
    observations: [search_redirect_suggest]

geo_redirect_replace_ctr_disable:
  title: geo_redirect_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [geo_redirect_disabled]
  denominator:
    observations: [geo_redirect_replace]

geo_redirect_suggest_ctr_disable:
  title: geo_redirect_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [geo_redirect_suggest_disabled]
  denominator:
    observations: [geo_redirect_suggest]

typo_replace_ctr_disable:
  title: typo_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [typo_disabled]
  denominator:
    observations: [typo_replace]

typo_suggest_ctr_disable:
  title: typo_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [typo_suggest_disabled]
  denominator:
    observations: [typo_suggest]

keyboard_replace_ctr_disable:
  title: keyboard_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [keyboard_disabled]
  denominator:
    observations: [keyboard_replace]

keyboard_suggest_ctr_disable:
  title: keyboard_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [keyboard_suggest_disabled]
  denominator:
    observations: [keyboard_suggest]

wordbreaker_replace_ctr_disable:
  title: wordbreaker_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_disabled]
  denominator:
    observations: [wordbreaker_replace]

wordbreaker_suggest_ctr_disable:
  title: wordbreaker_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_suggest_disabled]
  denominator:
    observations: [wordbreaker_suggest]

wordbreaker_digit_replace_ctr_disable:
  title: wordbreaker_digit_replace_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_disabled]
  denominator:
    observations: [wordbreaker_digit_replace]

wordbreaker_digit_suggest_ctr_disable:
  title: wordbreaker_digit_suggest_ctr_disable
  tags: [ratio, misspell]
  numerator:
    observations: [wordbreaker_digit_suggest_disabled]
  denominator:
    observations: [wordbreaker_digit_suggest]

item_views_vip_per_search:
  title: item_views_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_vip]
  denominator:
    observations: [searches_serp]

item_views_premium_per_search:
  title: item_views_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_premium]
  denominator:
    observations: [searches_serp]

item_views_push_per_search:
  title: item_views_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [item_views_push]
  denominator:
    observations: [searches_serp]

item_views_vas_per_search:
  title: item_views_vas_per_search
  tags: [i4, bx, serp, vas, ratio]
  numerator:
    observations: [item_views_vas]
  denominator:
    observations: [searches_serp]

item_views_serp_per_search:
  title: item_views_serp_per_search
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [item_views_serp]
  denominator:
    observations: [searches_serp]

item_views_rec_per_rec_block:
  title: item_views_rec_per_recblock
  tags: [i4, bx, rec, ratio]
  numerator:
    observations: [item_views_rec]
  denominator:
    observations: [recblock_shows]

contacts_vip_per_search:
  title: contacts_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_vip]
  denominator:
    observations: [searches_serp]

contacts_premium_per_search:
  title: contacts_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_premium]
  denominator:
    observations: [searches_serp]

contacts_push_per_search:
  title: contacts_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_push]
  denominator:
    observations: [searches_serp]

contacts_vas_per_search:
  title: contacts_vas_per_search
  tags: [i4, bx, serp, vas, ratio]
  numerator:
    observations: [contacts_vas]
  denominator:
    observations: [searches_serp]

contacts_serp_per_search:
  title: contacts_serp_per_search
  tags: [i3, bx, serp, ratio]
  numerator:
    observations: [contacts_serp]
  denominator:
    observations: [searches_serp]

fav_added_vip_per_search:
  title: fav_added_vip_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_vip]
  denominator:
    observations: [searches_serp]

fav_added_premium_per_search:
  title: fav_added_premium_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_premium]
  denominator:
    observations: [searches_serp]

fav_added_push_per_search:
  title: fav_added_push_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_push]
  denominator:
    observations: [searches_serp]

fav_added_vas_per_search:
  title: fav_added_vas_per_search
  tags: [bx, vas, fav, ratio]
  numerator:
    observations: [fav_added_vas]
  denominator:
    observations: [searches_serp]

fav_added_serp_per_search:
  title: fav_added_serp_per_search
  tags: [i4, bx, serp, fav, ratio]
  numerator:
    observations: [fav_added_serp]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_vip_per_search:
  title: bt_clicks_vip_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_vip]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_premium_per_search:
  title: bt_clicks_premium_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_premium]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_push_per_search:
  title: bt_clicks_push_per_search
  tags: [bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_push]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_vas_per_search:
  title: bt_clicks_vas_per_search
  tags: [i4, bx, vas, ratio]
  numerator:
    observations: [buyer_target_clicks_vas]
  denominator:
    observations: [searches_serp]

buyer_target_clicks_serp_per_search:
  title: bt_clicks_serp_per_search
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [buyer_target_clicks_serp]
  denominator:
    observations: [searches_serp]

contacts_vip_per_item_views_vip:
  title: contacts_vip_per_item_views_vip
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_vip]
  denominator:
    observations: [item_views_vip]

contacts_premium_per_item_views_premium:
  title: contacts_premium_per_item_views_premium
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_premium]
  denominator:
    observations: [item_views_premium]

contacts_push_per_item_views_push:
  title: contacts_push_per_item_views_push
  tags: [bx, vas, ratio]
  numerator:
    observations: [contacts_push]
  denominator:
    observations: [item_views_push]

contacts_vas_per_item_views_vas:
  title: contacts_vas_per_item_views_vas
  tags: [i4, bx, vas, ratio]
  numerator:
    observations: [contacts_vas]
  denominator:
    observations: [item_views_vas]

contacts_serp_per_item_views_serp:
  title: contacts_serp_per_item_views_serp
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [contacts_serp]
  denominator:
    observations: [item_views_serp]

searches_item_view_serp_per_searches_serp:
  title: searches_item_view_serp_per_searches
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_serp]
  denominator:
    observations: [searches]

searches_with_suggest_share:
  description: "Share of searches with suggest"
  tags: [ss, ratio, sgt]
  numerator:
    observations: [queries_with_suggest]
  denominator:
    observations: [queries_no_redirect]

share_suggest_searches_to_all:
  description: "Share of searches with suggest"
  tags: [ss, ratio, sgt]
  numerator:
    observations: [search_suggest_clicks]
  denominator:
    observations: [session_searches_with_uniq_query]

s_iv_per_s_date_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_date_sort]
  denominator:
    observations: [searches_date_sort]

s_iv_per_s_price_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_price_sort]
  denominator:
    observations: [searches_price_sort]

s_iv_per_s_default_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_item_view_default_sort]
  denominator:
    observations: [searches_default_sort]

s_iv_per_s_query:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_query_item_view]
  denominator:
    observations: [searches_with_query]

s_iv_per_s_noquery:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_noquery_item_view]
  denominator:
    observations: [searches_without_query]

s_btc_per_s_date_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_date_sort]
  denominator:
    observations: [searches_date_sort]

s_btc_per_s_price_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_price_sort]
  denominator:
    observations: [searches_price_sort]

s_btc_per_s_default_sort:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_default_sort]
  denominator:
    observations: [searches_default_sort]

s_btc_per_s_query:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_query]
  denominator:
    observations: [searches_with_query]

s_btc_per_s_noquery:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [search_btc_noquery]
  denominator:
    observations: [searches_without_query]

s_query_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_with_query]
  denominator:
    observations: [searches]

s_pages_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_serp]
  denominator:
    observations: [searches]

s_date_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_date_sort]
  denominator:
    observations: [searches]

s_price_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_price_sort]
  denominator:
    observations: [searches]

s_default_sort_per_s:
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [searches_default_sort]
  denominator:
    observations: [searches]

serp_empty_per_s:
  title: serp_empty_per_s
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [serp_empty]
  denominator:
    observations: [searches]

serp_small_per_s:
  title: serp_small_per_s
  tags: [i2, bx, serp, ratio]
  numerator:
    observations: [serp_small]
  denominator:
    observations: [searches]
  
serp_wq_empty_per_s_wq:
  title: serp_wq_empty_per_s_wq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_with_query_empty]
  denominator:
    observations: [searches_with_query]
  
serp_wq_small_per_s_wq:
  title: serp_wq_small_per_s_wq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_with_query_small]
  denominator:
    observations: [searches_with_query]
  
serp_noq_empty_per_s_noq:
  title: serp_noq_empty_per_s_noq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_without_query_empty]
  denominator:
    observations: [searches_without_query]
  
serp_noq_small_per_s_noq:
  title: serp_noq_small_per_s_noq
  tags: [i4, bx, serp, ratio]
  numerator:
    observations: [serp_without_query_small]
  denominator:
    observations: [searches_without_query]

###############################################################################
# Session :: Totals
###############################################################################

sessions_active:
  numerator:
    observations: [searches, recblock_shows, item_views_serp, item_views_rec, buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [critical, bx, session]

sessions_iv:
  numerator:
    observations: [item_views_serp, item_views_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_btc:
  numerator:
    observations: [buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c:
  numerator:
    observations: [contacts_serp, contacts_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

###

sessions_iv_s:
  numerator:
    observations: [item_views_serp]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s:
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_iv_s_q:
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s_q:
  numerator:
    observations: [search_btc_query]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_iv_s_noq:
  numerator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_s_noq:
  numerator:
    observations: [search_btc_noquery]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  tags: [i4, bx, session]

###

sessions_iv_r:
  numerator:
    observations: [item_views_rec]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r:
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_c_r:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  tags: [i3, bx, session]

sessions_iv_r_u2i:
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r_u2i:
  numerator:
    observations: [buyer_target_clicks_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_r_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_iv_r_i2i:
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_btc_r_i2i:
  numerator:
    observations: [buyer_target_clicks_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]

sessions_c_r_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  tags: [i4, bx, session]


###############################################################################
# Session :: Ratios
###############################################################################

sessions_iv_per_active:
  numerator:
    observations: [item_views_serp, item_views_rec]
    groupby: [participant, session]
  denominator:
    observations: [searches, recblock_shows, item_views_serp, item_views_rec, buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_per_active:
  numerator:
    observations: [buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  denominator:
    observations: [searches, recblock_shows, item_views_serp, item_views_rec, buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_per_active:
  numerator:
    observations: [contacts_serp, contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [searches, recblock_shows, item_views_serp, item_views_rec, buyer_target_clicks_serp, buyer_target_clicks_rec]
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_iv_s_per_s:
  numerator:
    observations: [item_views_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_per_s:
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_per_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  denominator:
    observations: [searches]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_s_q_per_s_q:
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_q_per_s_q:
  numerator:
    observations: [search_btc_query]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_q_per_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_with_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_s_noq_per_s_noq:
  numerator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_s_noq_per_s_noq:
  numerator:
    observations: [search_btc_noquery]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_noq_per_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_without_query]
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_iv_r_per_r:
  numerator:
    observations: [item_views_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_per_r:
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_per_r:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_r_u2i_per_r_u2i:
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_u2i_per_r_u2i:
  numerator:
    observations: [buyer_target_clicks_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_u2i_per_r_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_iv_r_i2i_per_r_i2i:
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_btc_r_i2i_per_r_i2i:
  numerator:
    observations: [buyer_target_clicks_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_r_i2i_per_r_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [recblock_shows_i2i]
    groupby: [participant, session]
  tags: [bx, session]

###

sessions_c_per_iv:
  numerator:
    observations: [contacts_serp, contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [item_views_serp, item_views_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_per_iv_s:
  numerator:
    observations: [contacts_serp]
    groupby: [participant, session]
  denominator:
    observations: [item_views_serp]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_q_per_iv_s_q:
  numerator:
    observations: [searches_query_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_query_item_view]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_s_noq_per_iv_s_noq:
  numerator:
    observations: [searches_noquery_contact]
    groupby: [participant, session]
  denominator:
    observations: [searches_noquery_item_view]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_per_iv_rec:
  numerator:
    observations: [contacts_rec]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_u2i_per_iv_rec_u2i:
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec_u2i]
    groupby: [participant, session]
  tags: [bx, session]

sessions_c_rec_i2i_per_iv_rec_i2i:
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant, session]
  denominator:
    observations: [item_views_rec_i2i]
    groupby: [participant, session]
  tags: [bx, session]


###############################################################################
# Search :: User Totals
###############################################################################

users_search:
  title: users_search
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches]
    groupby: [participant]

users_search_new:
  title: users_search_new
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches]
    groupby: [participant]

users_search_session_new:
  title: users_search_session_new
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches]
    groupby: [participant, session]

users_search_query:
  title: users_search_query
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_with_query]
    groupby: [participant]

users_item_view_serp_daily:
  title: users_search_item_view
  tags: [i2, bx, serp, user]
  numerator:
    observations: [item_views_serp]
    groupby: [participant]

users_item_view_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant]

users_contact_serp_daily:
  title: users_search_contact
  tags: [i1, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]

users_buyer_target_click_serp_daily:
  title: users_search_bt_click
  tags: [i1, bx, serp, user]
  numerator:
    observations: [buyer_target_clicks_serp]
    groupby: [participant]

users_contact_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_contact]
    groupby: [participant]

search_suggest_clicks:
  description: "Clicks on search suggest"
  tags: [ss, sgt]
  numerator:
    observations: [search_suggest_clicks]
    groupby: [participant]

###############################################################################
# Search :: User Ratios
###############################################################################

users_item_view_per_search:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [item_views_serp]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_contact_per_search:
  tags: [i1, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_contact_per_item_view_search:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [contacts_serp]
    groupby: [participant]
  denominator:
    observations: [item_views_serp]
    groupby: [participant]

users_item_view_per_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_item_view]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

users_contact_per_search_query:
  tags: [i2, bx, serp, user]
  numerator:
    observations: [searches_query_contact]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

users_s_btc_per_s:
  tags: [i1, bx, serp, ratio, user]
  numerator:
    observations: [search_btc]
    groupby: [participant]
  denominator:
    observations: [searches]
    groupby: [participant]

users_s_btc_per_s_query:
  tags: [i2, bx, serp, ratio, user]
  numerator:
    observations: [search_btc_query]
    groupby: [participant]
  denominator:
    observations: [searches_with_query]
    groupby: [participant]

suggest_users_share:
  description: "Share of cookies, who use suggest"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [queries_with_suggest]
    groupby: [participant]
  denominator:
    observations: [queries_no_redirect]
    groupby: [participant]

suggest_buyers_share:
  description: "Share of buyers, who use suggest, to cookies, who use suggest"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [queries_no_redirect_contact]
    groupby: [participant]
  denominator:
    observations: [queries_with_suggest]
    groupby: [participant]

share_suggest_users_to_users_with_search:
  description: "Share of cookies, who use suggest, to users with query, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [search_suggest_clicks]
    groupby: [participant]
  denominator:
    observations: [session_searches_with_uniq_query]
    groupby: [participant]

share_suggest_buyers_to_suggest_users:
  description: "Share of buyers, who use suggest, to cookies, who use suggest, based on 2443 event"
  tags: [ss, sgt, ratio]
  numerator:
    observations: [sessions_with_suggest_click_and_contact]
    groupby: [participant]
  denominator:
    observations: [search_suggest_clicks]
    groupby: [participant]

########  ########  ######
##     ## ##       ##    ##
##     ## ##       ##
########  ######   ##
##   ##   ##       ##
##    ##  ##       ##    ##
##     ## ########  ######

###############################################################################
# Rec :: Totals
###############################################################################

recblock_shows:
  numerator:
    observations: [recblock_shows]

item_views_rec:
  title: item_views_rec
  tags: [i2, bx, rec, total]
  numerator:
    observations: [item_views_rec]

item_views_rec_i2i:
  title: item_views_rec_i2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [item_views_rec_i2i]

item_views_rec_u2i:
  title: item_views_rec_u2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [item_views_rec_u2i]

contacts_rec_i2i:
  title: contacts_rec_i2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec_i2i]

contacts_rec_u2i:
  title: contacts_rec_u2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [contacts_rec_u2i]

fav_added_rec_i2i:
  title: fav_added_rec_i2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [fav_added_rec_i2i]

fav_added_rec_u2i:
  title: fav_added_rec_u2i
  tags: [i3, bx, rec, total]
  numerator:
    observations: [fav_added_rec_u2i]

buyer_target_clicks_rec_i2i:
  title: bt_clicks_rec_i2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec_i2i]

buyer_target_clicks_rec_u2i:
  title: bt_clicks_rec_u2i
  tags: [i2, bx, rec, total]
  numerator:
    observations: [buyer_target_clicks_rec_u2i]

###############################################################################
# Rec :: Ratios
###############################################################################

contacts_rec_per_rec_block:
  title: contacts_rec_per_recblock
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec]
  denominator:
    observations: [recblock_shows]

fav_added_rec_per_rec_block:
  title: fav_added_rec_per_recblock
  tags: [i4, bx, rec, fav, ratio]
  numerator:
    observations: [fav_added_rec]
  denominator:
    observations: [recblock_shows]

buyer_target_clicks_rec_per_rec_block:
  title: bt_clicks_rec_per_recblock
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [buyer_target_clicks_rec]
  denominator:
    observations: [recblock_shows]

contacts_rec_per_item_views_rec:
  title: contacts_rec_per_item_views_rec
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec]
  denominator:
    observations: [item_views_rec]

shows_item_view_recblock_per_recblock_shows:
  title: shows_item_view_recblock_per_recblock_shows
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [shows_item_view_recblock]
  denominator:
    observations: [recblock_shows]

###############################################################################
# Rec :: User Totals
###############################################################################

users_item_view_rec_daily:
  title: users_item_view_rec
  tags: [i3, bx, rec, user]
  numerator:
    observations: [item_views_rec]
    groupby: [participant]

users_contact_rec_daily:
  title: users_contact_rec
  tags: [i1, bx, rec, user]
  numerator:
    observations: [contacts_rec]
    groupby: [participant]

users_buyer_target_click_rec_daily:
  title: users_bt_click_rec
  tags: [i2, bx, rec, user]
  numerator:
    observations: [buyer_target_clicks_rec]
    groupby: [participant]

users_contact_rec_i2i:
  title: users_contact_rec_i2i
  tags: [i2, bx, rec, user]
  numerator:
    observations: [contacts_rec_i2i]
    groupby: [participant]

users_contact_rec_u2i:
  title: users_contact_rec_u2i
  tags: [i2, bx, rec, user]
  numerator:
    observations: [contacts_rec_u2i]
    groupby: [participant]

users_item_view_rec_i2i:
  title: users_item_view_rec_i2i
  tags: [i3, bx, rec, user]
  numerator:
    observations: [item_views_rec_i2i]
    groupby: [participant]

users_item_view_rec_u2i:
  title: users_item_view_rec_u2i
  tags: [i3, bx, rec, user]
  numerator:
    observations: [item_views_rec_u2i]
    groupby: [participant]

###############################################################################
# Rec :: User Ratios
###############################################################################

users_item_views_rec_u2i_per_users_all_main_pages:
  title: u2i_viewers_per_visitors
  description: "Conversion from unique visitors to uniqie viewers on main page recommendations"
  tags: [i3, bx, rec, main, ratio]
  numerator:
    observations: [item_views_rec_u2i]
  denominator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_item_views_rec_i2i_per_users_item_views:
  title: i2i_viewers_per_visitors
  description: "Conversion from unique visitors to uniqie viewers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [item_views_rec_i2i]
  denominator:
    observations: [item_views]
    groupby: [participant]

users_contacts_rec_u2i_per_users_all_main_pages:
  title: u2i_buyers_per_visitors
  description: "Conversion from unique visitors to uniqie buyers on main page recommendations"
  tags: [i2, bx, rec, main, ratio]
  numerator:
    observations: [contacts_rec_u2i]
  denominator:
    observations: [head_main_pages, transport_main_pages, re_main_pages, services_main_pages]
    groupby: [participant]

users_contacts_rec_i2i_per_users_item_views:
  title: i2i_buyers_per_visitors
  description: "Conversion from unique visitors to uniqie buyers on item page recommendations"
  tags: [i2, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_i2i]
  denominator:
    observations: [item_views]
    groupby: [participant]

users_contacts_rec_i2i_per_users_item_views_rec_i2i:
  title: i2i_buyers_per_viewers
  description: "Conversion from unique viewers to uniqie buyers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_i2i]
  denominator:
    observations: [item_views_rec_i2i]
    groupby: [participant]

users_contacts_rec_u2i_per_users_item_views_rec_u2i:
  title: u2i_buyers_per_viewers
  description: "Conversion from unique viewers to uniqie buyers on item page recommendations"
  tags: [i3, bx, rec, ratio]
  numerator:
    observations: [contacts_rec_u2i]
  denominator:
    observations: [item_views_rec_u2i]
    groupby: [participant]


##     ## ########  ######   ######  ######## ##    ##  ######   ######## ########
###   ### ##       ##    ## ##    ## ##       ###   ## ##    ##  ##       ##     ##
#### #### ##       ##       ##       ##       ####  ## ##        ##       ##     ##
## ### ## ######    ######   ######  ######   ## ## ## ##   #### ######   ########
##     ## ##             ##       ## ##       ##  #### ##    ##  ##       ##   ##
##     ## ##       ##    ## ##    ## ##       ##   ### ##    ##  ##       ##    ##
##     ## ########  ######   ######  ######## ##    ##  ######   ######## ##     ##

###############################################################################
# Messenger :: Totals
###############################################################################

phone_views_in_chat:
  title: phone_views_in_chat
  tags: [i3, messenger, total]
  numerator:
    observations: [phone_views_in_chat]

phone_views_in_chat_grouped:
  title: phone_views_in_chat_grouped
  tags: [i3, messenger, total,grouped]
  numerator:
    observations: [phone_views_in_chat_net]

total_messages:
  title: total_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [messenger_total_messeges]

first_response_messages:
  title: first_response_messages
  tags: [i2, messenger, total]
  numerator:
    observations: [first_response_messages]

write_button_clicks:
  title: write_button_clicks
  tags: [i3, messenger, total]
  numerator:
    observations: [write_button_clicks]

write_button_clicks_grouped:
  title: write_button_clicks_grouped
  tags: [i3, messenger, total,grouped]
  numerator:
    observations: [write_button_clicks_net]

chats_deleted:
  title: chats_deleted
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_chat_deleted]

messenger_users_blocked:
  title: messenger_users_blocked
  tags: [i4, messenger, total]
  numerator:
    observations: [messenger_users_blocked]

messenger_spam_blocks:
  title: messenger_spam_blocks
  tags: [i3, messenger, total]
  numerator:
    observations: [messenger_spam_blocks]

item_views_from_messenger:
  title: item_views_from_messenger
  tags: [i3, messenger, total, web]
  numerator:
    observations: [item_views_from_messenger]

messenger_geo_messages:
  title: messenger_geo_messages
  tags: [i3, messenger, total]
  numerator:
    observations: [messenger_geo_messages]

messenger_active_chats:
  title: messenger_active_chats
  tags: [i2, messenger, total]
  numerator:
    observations: [messenger_active_chats]

###############################################################################
# Messenger :: Ratios
###############################################################################

write_button_clicks_per_item_views:
  title: write_button_clicks_per_item_views
  tags: [i3, messenger, ratio]
  numerator:
    observations: [write_button_clicks]
  denominator:
    observations: [item_views]

messenger_geo_conversion:
  title: messenger_geo_conversion
  tags: [i4, messenger, ratio, apps]
  numerator:
    observations: [geo_button_clicks]
  denominator:
    observations: [attach_button_clicks]

messenger_send_text_conversion:
  title: messenger_send_text_conversion
  tags: [i4, messenger, ratio, web]
  numerator:
    observations: [total_text_send_button_clicks]
  denominator:
    observations: [message_start_writing]

first_mess_per_write_button_clicks:
  title: first_mess_per_write_button_clicks
  tags: [i3, messenger, ratio]
  numerator:
    observations: [first_messages]
  denominator:
    observations: [write_button_clicks]

messenger_response_ratio:
  title: messenger_response_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [first_response_messages]
  denominator:
    observations: [first_messages]

messenger_spam_ratio:
  title: messenger_spam_ratio
  tags: [i2, messenger, ratio]
  numerator:
    observations: [messenger_spam_blocks]
  denominator:
    observations: [messenger_active_chats]

###############################################################################
# Messenger :: proportion
###############################################################################

users_first_messages:
  title: users_first_messages
  tags: [i2, messenger, user]
  numerator:
    observations: [first_messages]
    groupby: [participant]

users_first_response_messages:
  title: users_first_response_messages
  tags: [i2, messenger, user]
  numerator:
    observations: [first_response_messages]
    groupby: [participant]

users_phone_views_in_chat:
  title: users_phone_views_in_chat
  tags: [i3, messenger, user]
  numerator:
    observations: [phone_views_in_chat]
    groupby: [participant]

users_write_button_clicks:
  title: users_write_button_clicks
  tags: [i3, messenger, user]
  numerator:
    observations: [write_button_clicks]
    groupby: [participant]

users_messenger_geo_messages:
  title: users_messenger_geo_messages
  tags: [i3, messenger, user]
  numerator:
    observations: [messenger_geo_messages]
    groupby: [participant]

users_messenger_geo_button_clicks:
  title: users_messenger_geo_messages
  tags: [i4, messenger, user]
  numerator:
    observations: [geo_button_clicks]
    groupby: [participant]

messenger_visitors:
  title: messenger_visitors
  tags: [i2, messenger, user]
  numerator:
    observations: [chat_list_views, chat_views]
    groupby: [participant]

messenger_dau:
  title: messenger_dau
  tags: [i2, messenger, user]
  numerator:
    observations: [messenger_total_messeges]
    groupby: [participant]

########  ######## ##       #### ##     ## ######## ########  ##    ##
##     ## ##       ##        ##  ##     ## ##       ##     ##  ##  ##
##     ## ##       ##        ##  ##     ## ##       ##     ##   ####
##     ## ######   ##        ##  ##     ## ######   ########     ##
##     ## ##       ##        ##   ##   ##  ##       ##   ##      ##
##     ## ##       ##        ##    ## ##   ##       ##    ##     ##
########  ######## ######## ####    ###    ######## ##     ##    ##

###############################################################################
# Delivery :: Totals
###############################################################################

delivery_orders_created:
  title: delivery_orders_created
  tags: [i3, bx, total]
  numerator:
    observations: [delivery_order_created]

delivery_orders_created_grouped:
  title: delivery_orders_created_grouped
  tags: [i3, bx, total, group]
  numerator:
    observations: [delivery_order_created_net]

buyer_delivery_orders:
  title: buyer_delivery_orders
  description: "All delivery orders by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders]

buyer_delivery_orders_with_pay:
  title: buyer_delivery_orders_with_pay
  description: "All delivery orders by buyer with pay"
  tags: [i0, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_with_pay]

buyer_delivery_orders_in_transit:
  title: buyer_delivery_orders_in_transit
  description: "All delivery orders by buyer in transit"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_in_transit]

buyer_delivery_deals:
  title: buyer_delivery_deals
  description: "All delivery deals by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_deals]

buyer_delivery_orders_expired:
  title: buyer_delivery_orders_expired
  description: "All delivery expired orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_expired]

buyer_delivery_orders_canceled:
  title: buyer_delivery_orders_canceled
  description: "All delivery canceled orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_canceled]

buyer_delivery_orders_returned:
  title: buyer_delivery_orders_returned
  description: "All delivery returned orders by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_returned]

seller_delivery_orders_returned:
  title: seller_delivery_orders_returned
  description: "All delivery returned order by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_returned]

seller_delivery_deals:
  title: seller_delivery_deals
  description: "All delivery deals by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_deals]

seller_delivery_orders_canceled:
  title: seller_delivery_orders_canceled
  description: "All delivery canceled orders by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_canceled]

seller_delivery_orders_expired:
  title: seller_delivery_orders_expired
  description: "All delivery expired orders by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_expired]

seller_delivery_orders_in_transit:
  title: seller_delivery_orders_in_transit
  description: "All delivery orders in transit by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_in_transit]

seller_delivery_orders_with_pay:
  title: seller_delivery_orders_with_pay
  description: "All delivery order with pay by seller"
  tags: [i0, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_with_pay]

helpdesk_vas_tag_tickets:
  title: helpdesk_vas_tag_tickets
  description: "Vas tickets"
  tags: [i2, delivery, vas, support]
  numerator:
    observations: [helpdesk_vas_tag_tickets]

helpdesk_delivery_tickets:
  title: helpdesk_delivery_tickets
  description: "Delivery tickets"
  tags: [i1, delivery, support]
  numerator:
    observations: [helpdesk_delivery_tickets]

helpdesk_delivery_vas_tickets:
  title: helpdesk_delivery_vas_tickets
  description: "Delivery vas tickets"
  tags: [i2, delivery, support,vas]
  numerator:
    observations: [helpdesk_delivery_vas_tickets]

delivery_seller_vas_spend_amount:
  title: delivery_seller_vas_spend_amount
  description: "Delivery seller vas spend amount"
  tags: [i2, delivery, vas]
  numerator:
    observations: [delivery_seller_vas_spend_amount]

items_with_delivery_soa:
  title: items_with_delivery_soa
  description: "All delivery item closed by SOA"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_with_delivery_soa]

items_with_delivery:
  title: items_with_delivery
  description: "All item with delivery"
  tags: [i1, delivery, seller]
  numerator:
    observations: [items_with_delivery]

item_off_delivery:
  title: item_off_delivery
  description: "All item off delivery"
  tags: [i1, delivery, seller]
  numerator:
    observations: [item_off_delivery]

delivery_item_view:
  title: delivery_item_view
  description: "Uniq item view of delivery item"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_item_view]

delivery_total_item_view:
  title: delivery_total_item_view
  description: "Total item view of delivery item"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_total_item_view]

delivery_click:
  title: delivery_click
  description: "Uniq delivery button click"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_click]

total_delivery_click:
  title: total_delivery_click
  description: "Total delivery button click"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_click]

delivery_widget:
  title: delivery_widget
  description: "Uniq delivery widget show"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_widget]

total_delivery_widget:
  title: total_delivery_widget
  description: "Total delivery widget show"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_widget]

delivery_contact:
  title: delivery_contact
  description: "Uniq delivery contacts"
  tags: [i0, delivery, buyer]
  numerator:
    observations: [delivery_contact]

total_delivery_contact:
  title: total_delivery_contact
  description: "Total delivery contacts"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [total_delivery_contact]

buyer_commission_net_adj:
  title: buyer_commission_net_adj
  description: "Выручка Доставки без НДС"
  tags: [i1, delivery, seller]
  numerator:
    observations: [buyer_commission_net_adj]

buyer_commission:
  title: buyer_commission
  description: "Выручка Доставки"
  tags: [i2, delivery, seller]
  numerator:
    observations: [buyer_commission]

items_delivery_category_soa:
  title: items_delivery_category_soa
  description: "Количество объявлений SOA в доставочных категориях"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_category_soa]

users_off_delivery:
  title: users_off_delivery
  description: "Пользователи, которые отключили доставку в профиле"
  tags: [i2, delivery, seller]
  numerator:
    observations: [users_off_delivery]

items_delivery_available:
  title: items_delivery_available
  description: "Количество объявлений, которым доступна доставка"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_available]

items_delivery_wrong_available:
  title: items_delivery_wrong_available
  description: "Количество объявлений, которым ошибочно подключена доставка"
  tags: [i2, delivery, seller]
  numerator:
    observations: [items_delivery_wrong_available]

delivery_deals:
  title: delivery_deals
  description: "Количество объявлений, которые продали с доставкой"
  tags: [i2, delivery, seller]
  numerator:
    observations: [delivery_deals]

delivery_category_deals:
  title: delivery_category_deals
  description: "Количество объявлений закрытых по SOA или у которых есть заказы в статусе Delivered"
  tags: [i2, delivery, seller]
  numerator:
    observations: [delivery_category_deals]

###############################################################################
# Delivery :: Ratios
###############################################################################

buyer_delivery_in_transit_ratio:
  title: buyer_delivery_in_transit_ratio
  description: "All delivery orders in transit ratio by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_in_transit]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seller_delivery_in_transit_ratio:
  title: seller_delivery_in_transit_ratio
  description: "All delivery in transit orders ratio by seller"
  tags: [i1, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_in_transit]
  denominator:
    observations: [seller_delivery_orders_with_pay]

delivery_view_delivery_click_ratio:
  title: delivery_item_view_delivery_click_ratio
  description: "Conversion from delivery item view to delivery button by uniq user"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_click]
  denominator:
    observations: [item_view]

delivery_total_view_delivery_click_ratio:
  title: delivery_total_item_view_delivery_click_ratio
  description: "Conversion from delivery item view to delivery button"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_click]
  denominator:
    observations: [total_item_view]

delivery_click_widget_ratio:
  title: delivery_click_widget_ratio
  description: "Conversion from delivery button click to delivery widget by uniq user"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_widget]
  denominator:
    observations: [delivery_click]

delivery_total_click_widget_ratio:
  title: delivery_total_click_widget_ratio
  description: "Conversion from delivery button click to delivery widget"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_widget]
  denominator:
    observations: [total_delivery_click]

delivery_widget_contact_ratio:
  title: delivery_widget_contact_ratio
  description: "Conversion from delivery widget show to delivery contact by uniq user"
  tags: [i3, delivery, buyer]
  numerator:
    observations: [delivery_contact]
  denominator:
    observations: [delivery_widget]

delivery_total_widget_contact_ratio:
  title: delivery_total_widget_contact_ratio
  description: "Conversion from delivery widget show to delivery contact"
  tags: [i4, delivery, buyer]
  numerator:
    observations: [total_delivery_contact]
  denominator:
    observations: [total_delivery_widget]

delivery_contact_delivery_button_ratio:
  title: delivery_contact_delivery_button_ratio
  description: "Conversion from delivery button click to delivery contact by uniq user"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [delivery_contact]
  denominator:
    observations: [delivery_click]

buyer_delivery_canceled_ratio:
  title: buyer_delivery_canceled_ratio
  description: "All delivery orders canceled ratio by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_canceled]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seler_delivery_canceled_ratio:
  title: seler_delivery_canceled_ratio
  description: "All delivery orders canceled ratio by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_canceled]
  denominator:
    observations: [seller_delivery_orders_with_pay]

buyer_delivery_expired_ratio:
  title: buyer_delivery_expired_ratio
  description: "All delivery orders expired ratio by buyer"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_expired]
  denominator:
    observations: [buyer_delivery_orders_with_pay]

seler_delivery_expired_ratio:
  title: seler_delivery_expired_ratio
  description: "All delivery orders expired ratio by seller"
  tags: [i2, delivery, seller]
  numerator:
    observations: [seller_delivery_orders_expired]
  denominator:
    observations: [seller_delivery_orders_with_pay]

buyer_delivery_paid_order_ratio:
  title: buyer_delivery_paid_order_ratio
  description: "All delivery orders paid ratio by buyer"
  tags: [i1, delivery, buyer]
  numerator:
    observations: [buyer_delivery_orders_with_pay]
  denominator:
    observations: [buyer_delivery_orders]

items_delivery_wrong_available_ratio:
  title: items_delivery_wrong_available_ratio
  description: "Доля объявлений с ошибочно подключенной доставкой"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [items_delivery_wrong_available]
  denominator:
    observations: [items_with_delivery]

items_delivery_ratio:
  title: items_delivery_ratio
  description: "Доля объявлений с доставкой среди всех возможных"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [items_with_delivery]
  denominator:
    observations: [items_delivery_available]

delivery_deals_soa_share:
  title: delivery_deals_soa_share
  description: "Доля объявлений проданных с доставкой среди всех проданных на Авито"
  tags: [i2, delivery, buyer]
  numerator:
    observations: [delivery_deals]
  denominator:
    observations: [delivery_category_deals]


 ######  ##     ##  #######  ########  ########       ########  ######## ##    ## ########
##    ## ##     ## ##     ## ##     ##    ##          ##     ## ##       ###   ##    ##
##       ##     ## ##     ## ##     ##    ##          ##     ## ##       ####  ##    ##
 ######  ######### ##     ## ########     ##          ########  ######   ## ## ##    ##
      ## ##     ## ##     ## ##   ##      ##          ##   ##   ##       ##  ####    ##
##    ## ##     ## ##     ## ##    ##     ##          ##    ##  ##       ##   ###    ##
 ######  ##     ##  #######  ##     ##    ##          ##     ## ######## ##    ##    ##

###############################################################################
# Short Rent :: Totals
###############################################################################

booking_created_short_rent:
  title: booking_created_short_rent
  tags: [i4, bx, total]
  numerator:
    observations: [booking_created_short_rent]

booking_created_short_rent_grouped:
  title: booking_created_short_rent_grouped
  tags: [i4, bx, total, group]
  numerator:
    observations: [booking_created_short_rent_net]

buyer_str_bookings:
  title: buyer_str_bookings
  description: "All str bookings by buyer"
  tags: [i3, str, buyer]
  numerator:
    observations: [buyer_str_bookings]

buyer_str_bookings_paid:
  title: buyer_str_bookings_paid
  description: "All str paid bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_paid]

buyer_str_bookings_comfirmed:
  title: buyer_str_bookings_comfirmed
  description: "All str confirmed bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_comfirmed]

buyer_str_bookings_expired:
  title: buyer_str_bookings_expired
  description: "All str expired bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_expired]

buyer_str_bookings_canceled:
  title: buyer_str_bookings_canceled
  description: "All str canceled bookings for buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_canceled]

buyer_str_booking_cost:
  title: buyer_str_booking_cost
  description: "All buyer bookings cost, paid/not paid both"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_booking_cost]

buyer_str_paid:
  title: buyer_str_paid
  description: "Money paid for bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_paid]

buyer_str_deals:
  title: buyer_str_deals
  description: "All str deals by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_deals]

buyer_str_bookings_voided:
  title: buyer_str_bookings_voided
  description: "All str voided bookings by buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_voided]

seller_str_bookings:
  title: seller_str_bookings
  description: "All str bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings]

seller_str_bookings_paid:
  title: seller_str_bookings_paid
  description: "All str paid bookings by seller"
  tags: [i3, str, seller]
  numerator:
    observations: [seller_str_bookings_paid]

seller_str_bookings_comfirmed:
  title: seller_str_bookings_comfirmed
  description: "All str confirmed bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_comfirmed]

seller_str_bookings_canceled:
  title: seller_str_bookings_canceled
  description: "All str canceled bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_canceled]

seller_str_bookings_expired:
  title: seller_str_bookings_expired
  description: "All str expired bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_expired]

seller_str_deals:
  title: seller_str_deals
  description: "All str deals by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_deals]

seller_str_bookings_voided:
  title: seller_str_bookings_voided
  description: "All str voided bookings by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_voided]

seller_str_payout_fee:
  title: seller_payout_fee
  description: "Money seller pay avito from booking"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_payout_fee]

seller_str_payout_amount:
  title: seller_payout_amount
  description: "Money buyer pay for booking by seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_payout_amount]

helpdesk_str_tickets:
  title: helpdesk_str_tickets
  description: "Str helpdesk tickets"
  tags: [i4, str]
  numerator:
    observations: [helpdesk_str_tickets]

items_with_str:
  title: items_with_str
  description: "All item with str"
  tags: [i4, str, seller]
  numerator:
    observations: [items_with_str]

items_with_str_soa:
  title: items_with_str_soa
  description: "All str item closed with SOA"
  tags: [i4, str, seller]
  numerator:
    observations: [items_with_str_soa]
  denominator:
    observations: [seller_str_bookings_paid]

item_off_str:
  title: item_off_str
  description: "All item off str"
  tags: [i4, str, buyer]
  numerator:
    observations: [item_off_str]

str_item_view:
  title: str_item_view
  description: "Uniq item view of str item"
  tags: [i4, str, buyer]
  numerator:
    observations: [item_view]

str_total_item_view:
  title: str_total_item_view
  description: "Total item view of str item"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_item_view]

str_click:
  title: str_click
  description: "Uniq str button click"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_click]

total_str_click:
  title: total_str_click
  description: "Total str button click"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_click]

str_widget:
  title: str_widget
  description: "Uniq str widget show"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_widget]

total_str_widget:
  title: total_str_widget
  description: "Total str widget show"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_widget]

str_contact:
  title: str_contact
  description: "Uniq str contacts"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_contact]

total_str_contact:
  title: total_str_contact
  description: "Total str contacts"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_contact]

###############################################################################
# Short Rent :: Ratios
###############################################################################

buyer_str_confirmed_ratio:
  title: buyer_str_confirmed_ratio
  description: "Conversion from paid to confirmed booking buyer"
  tags: [i4, str, buyer]
  numerator:
    observations: [buyer_str_bookings_comfirmed]
  denominator:
    observations: [buyer_str_bookings_paid]

seller_str_confirmed_ratio:
  title: seller_str_confirmed_ratio
  description: "Conversion from paid to confirmed booking seller"
  tags: [i4, str, seller]
  numerator:
    observations: [seller_str_bookings_comfirmed]
  denominator:
    observations: [seller_str_bookings_paid]

str_view_str_click_ratio:
  title: str_view_str_click_ratio
  description: "Conversion from str item view to str button by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_click]
  denominator:
    observations: [item_view]

str_total_view_str_click_ratio:
  title: str_total_view_str_click_ratio
  description: "Conversion from str item view to str button"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_click]
  denominator:
    observations: [total_item_view]

str_click_widget_ratio:
  title: str_click_widget_ratio
  description: "Conversion from str button click to str widget by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_widget]
  denominator:
    observations: [str_click]

str_total_click_widget_ratio:
  title: str_total_click_widget_ratio
  description: "Conversion from str button click to str widget"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_widget]
  denominator:
    observations: [total_str_click]

str_widget_contact_ratio:
  title: str_widget_contact_ratio
  description: "Conversion from str widget show to str contact by uniq user"
  tags: [i4, str, buyer]
  numerator:
    observations: [str_contact]
  denominator:
    observations: [str_widget]

str_total_widget_contact_ratio:
  title: str_total_widget_contact_ratio
  description: "Conversion from str widget show to str contact"
  tags: [i4, str, buyer]
  numerator:
    observations: [total_str_contact]
  denominator:
    observations: [total_str_widget]

######## ##    ##  ######
   ##    ###   ## ##    ##
   ##    ####  ## ##
   ##    ## ## ##  ######
   ##    ##  ####       ##
   ##    ##   ### ##    ##
   ##    ##    ##  ######

###############################################################################
# TNS :: Totals
###############################################################################

forgot_password_count:
  numerator:
    observations: [forgot_password_count]

password_restore_requests:
  numerator:
    observations: [password_restore_requests]

contacts_public_profile_per_unique_user:
  numerator:
    observations: [contacts_public_profile]
  denominator:
    observations: [public_profile_unique_views]

password_restore_request_errors:
  numerator:
    observations: [password_restore_request_errors]

password_restore_count:
  numerator:
    observations: [password_restore_count]

password_restore_errors:
  numerator:
    observations: [password_restore_errors]

sign_in_count:
  numerator:
    observations: [sign_in_count]

sign_in_errors:
  numerator:
    observations: [sign_in_errors]

public_profile_views:
  numerator:
    observations: [public_profile_views]

public_profile_unique_views:
  numerator:
    observations: [public_profile_unique_views]

contacts_public_profile:
  numerator:
    observations: [contacts_public_profile]

public_profile_active_items_paginations:
  numerator:
    observations: [public_profile_active_items_paginations]

public_profile_closed_items_paginations:
  numerator:
    observations: [public_profile_closed_items_paginations]

user_enter:
  description: "number of unique cookies with successful authorization/registration/restore, which had authorization start screen (eid=2089)"
  tags: [i2, tns, tns_bulb, enter]
  numerator:
    observations: [enter_success]

user_auth:
  description: "number of unique cookies with successful authorization (phone/email/social), which had authorization start screen"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]

user_registration:
  description: "number of unique cookies with successful registration (not social), which had authorization start screen"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]

user_password_restore:
  description: "number of unique cookies with successful password restore, which had restore start screen (including those who's changed platform while restoring by email)"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]

abuses:
  title: abuses
  tags: [tns, moderation]
  numerator:
    observations: [abuses]

reviews_added:
  title: reviews_added
  description: "Number of all reviews added"
  tags: [i1, tns, reviews, ratings]
  numerator:
    observations: [reviews_added]

users_reviews_added:
  title: users_reviews_added
  description: "Number of users added reviews"
  tags: [i1, tns, reviews, ratings]
  numerator:
    observations: [reviews_added]
    groupby: [participant]

sellers_with_rating:
  title: sellers_with_rating
  description: "Number of sellers with any rating"
  tags: [i1, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_any]

sellers_with_rating_1:
  title: sellers_with_rating_1
  description: "Number of sellers 1-star rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_1]

sellers_with_rating_2:
  title: sellers_with_rating_2
  description: "Number of sellers 2-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_2]

sellers_with_rating_3:
  title: sellers_with_rating_3
  description: "Number of sellers 3-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_3]

sellers_with_rating_4:
  title: sellers_with_rating_4
  description: "Number of sellers 4-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_4]

sellers_with_rating_5:
  title: sellers_with_rating_5
  description: "Number of sellers 5-stars rating"
  tags: [i4, tns, reviews, ratings, sellers]
  numerator:
    observations: [seller_has_rating_5]

items_with_rating:
  title: items_with_rating
  description: "Number of active items with any rating"
  tags: [i2, tns, reviews, ratings, items]
  numerator:
    observations: [active_items_with_rating]

buyers_on_rating_1:
  title: buyers_on_rating_1
  description: "Number of buyers on 1-star rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_1]
    groupby: [participant]

buyers_on_rating_2:
  title: buyers_on_rating_2
  description: "Number of buyers on 2-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_2]
    groupby: [participant]

buyers_on_rating_3:
  title: buyers_on_rating_3
  description: "Number of buyers on 3-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_4]
    groupby: [participant]

buyers_on_rating_4:
  title: buyers_on_rating_4
  description: "Number of buyers on 4-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_4]
    groupby: [participant]

buyers_on_rating_5:
  title: buyers_on_rating_5
  description: "Number of buyers on 5-stars rating"
  tags: [i4, tns, reviews, ratings, buyers]
  numerator:
    observations: [contacts_on_rating_5]
    groupby: [participant]

item_views_on_rating_1:
  title: item_views_on_rating_1
  description: "Item views on 1-star rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_1]

item_views_on_rating_2:
  title: item_views_on_rating_2
  description: "Item views on 2-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_2]

item_views_on_rating_3:
  title: item_views_on_rating_3
  description: "Item views on 3-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_3]

item_views_on_rating_4:
  title: item_views_on_rating_4
  description: "Item views on 4-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_4]

item_views_on_rating_5:
  title: item_views_on_rating_5
  description: "Item views on 5-stars rating"
  tags: [i4, tns, reviews, ratings, item_views]
  numerator:
    observations: [itemviews_on_rating_5]

buyers_with_fs_subscriptions:
  title: buyers_with_fs_subscriptions
  description: "number of buyers with subscriptions on favourite sellers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old,
    favourite_sellers_subscriptions_inactive_new, favourite_sellers_subscriptions_inactive_old]
    groupby: [participant]

active_buyers_with_fs_subscriptions:
  title: active_buyers_with_fs_subscriptions
  description: "number of active (in feature) buyers with subscriptions on favourite sellers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old]
    groupby: [participant]

sellers_with_fs_subscribers:
  title: sellers_with_fs_subscribers
  description: "number of sellers with subscribers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old,
    favourite_sellers_subscribers_inactive_new, favourite_sellers_subscribers_inactive_old]
    groupby: [participant]

active_sellers_with_fs_subscribers:
  title: active_sellers_with_fs_subscribers
  description: "number of sellers with subscribers and active items"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old]
    groupby: [participant]

fs_subscriptions_per_buyer:
  title: fs_subscriptions_per_buyer
  description: "number of subscriptions per buyer"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old,
    favourite_sellers_subscriptions_inactive_new, favourite_sellers_subscriptions_inactive_old]
    groupby: []

fs_subscribers_per_seller:
  title: fs_subscribers_per_seller
  description: "number of subscribers per seller"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old,
    favourite_sellers_subscribers_inactive_new, favourite_sellers_subscribers_inactive_old]
    groupby: []

###############################################################################
# TNS :: Ratios
###############################################################################

user_registration_cr:
  title: user_registration_conv
  description: "share of unique cookies with successful registration (not social) among those who had registration start screen"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]
  denominator:
    observations: [registration_start]

user_password_restore_cr:
  title: user_restore_conv
  description: "share of unique cookies with successful password restore among those who had restore start screen (including those who's changed platform while restoring by email)"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]
  denominator:
    observations: [restore_start]

user_auth_cr:
  title: user_auth_conv
  description: "share of unique cookies with successful authorization (phone/email/social) among those who had authorization start screen"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]
  denominator:
    observations: [auth_start]

user_enter_cr:
  title: user_enter_conv
  description: "share of unique cookies with successful authorization/registration/restore among those who had authorization start screen"
  tags: [i0, tns, tns_bulb, auth, enter]
  numerator:
    observations: [enter_success]
  denominator:
    observations: [auth_start]

auth_errors_per_user:
  description: "average number of authorization (phone/email/social) errors per cookie"
  tags: [i3, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_errors]
  denominator:
    observations: [auth_start]

registration_errors_per_user:
  description: "average number of registration (not social) errors per cookie"
  tags: [i3, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_errors]
  denominator:
    observations: [registration_start]

password_restore_errors_per_user:
  description: "average number of password restore errors per cookie"
  tags: [i4, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_errors]
  denominator:
    observations: [restore_start]

enter_errors_per_user:
  description: "average number of authorization/registration/restore errors per cookie"
  tags: [i3, tns, tns_bulb, enter]
  numerator:
    observations: [enter_errors]
  denominator:
    observations: [auth_start]

reviews_avg_score:
  description: "Reviews added average score"
  tags: [i3, tns, reviews, ratings, score]
  numerator:
    observations: [reviews_score_sum]
  denominator:
    observations: [reviews_added]

contacts_per_item_view_on_rating_1:
  description: "Contacts per item views on 1-star rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_1]
  denominator:
    observations: [itemviews_on_rating_1]

contacts_per_item_view_on_rating_2:
  description: "Contacts per item views on 2-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_2]
  denominator:
    observations: [itemviews_on_rating_2]

contacts_per_item_view_on_rating_3:
  description: "Contacts per item views on 3-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_3]
  denominator:
    observations: [itemviews_on_rating_3]

contacts_per_item_view_on_rating_4:
  description: "Contacts per item views on 4-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_4]
  denominator:
    observations: [itemviews_on_rating_4]

contacts_per_item_view_on_rating_5:
  description: "Contacts per item views on 5-stars rating"
  tags: [i4, tns, reviews, ratings, contacts]
  numerator:
    observations: [contacts_on_rating_5]
  denominator:
    observations: [itemviews_on_rating_5]

search_items_ratings_coverage:
  description: "Search items with rating per search items"
  tags: [i1, tns, reviews, ratings, search]
  numerator:
    observations: [search_items_with_rating]
  denominator:
    observations: [search_items]

searches_with_ratings_per_searches:
  description: "Searches with ratings per all searches"
  tags: [i4, tns, reviews, ratings, search]
  numerator:
    observations: [searches_with_rating]
  denominator:
    observations: [searches_serp]

active_buyers_with_fs_subscriptions_share:
  title: active_buyers_with_fs_subscriptions_share
  description: "active favsellers users with subscriptions share from total buyers"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscriptions_active_new, favourite_sellers_subscriptions_active_old]
  denominator:
    observations: [phone_views_total, booking_created_short_rent, first_messages, delivery_order_created]
    groupby: [participant]

active_sellers_with_fs_subscribers_share:
  title: active_sellers_with_fs_subscribers_share
  description: "sellers with subscriptions and active items share from sellers with active items"
  tags: [i3, tns, tns_bulb, favsellers]
  numerator:
    observations: [favourite_sellers_subscribers_active_new, favourite_sellers_subscribers_active_old]
  denominator:
    observations: [active_items]
    groupby: [participant]

###############################################################################
# TNS :: User Totals
###############################################################################

password_restore_request_proportion:
  numerator:
    observations: [password_restore_requests]
    groupby: [participant]
  description: "1 если хотя бы один запрос на восстановление пароля, иначе 0"

password_restore_proportion:
  numerator:
    observations: [password_restore_count]
    groupby: [participant]

sign_in_proportion:
  numerator:
    observations: [sign_in_count]
    groupby: [participant]

public_profile_views_proportion:
  numerator:
    observations: [public_profile_views]
    groupby: [participant]

contacts_public_profile_proportion:
  numerator:
    observations: [contacts_public_profile]
    groupby: [participant]

public_profile_active_items_paginations_proportion:
  numerator:
    observations: [public_profile_active_items_paginations]
    groupby: [participant]

public_profile_closed_tabs_proportion:
  numerator:
    observations: [public_profile_closed_tabs]
    groupby: [participant]

public_profile_closed_items_paginations_proportion:
  numerator:
    observations: [public_profile_closed_items_paginations]
    groupby: [participant]

user_auth_proportion:
  description: "share of unique cookies with successful authorization (phone/email/social) among test participants"
  tags: [i2, tns, tns_bulb, auth, enter]
  numerator:
    observations: [auth_success]
    groupby: [participant]

user_registration_proportion:
  description: "share of unique cookies with successful registration (not social) among test participants"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_success]
    groupby: [participant]

user_password_restore_proportion:
  description: "share of unique cookies with successful password restore among test participants"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_success]
    groupby: [participant]

user_enter_proportion:
  description: "share of unique cookies with successful authorization/registration/restore among test participants"
  tags: [i1, tns, tns_bulb, enter]
  numerator:
    observations: [enter_success]
    groupby: [participant]

registration_start_proportion:
  description: "share of unique cookies with registration start screen among test participants"
  tags: [i2, tns, tns_bulb, reg, enter]
  numerator:
    observations: [registration_start]
    groupby: [participant]

enter_start_proportion:
  description: "share of unique cookies with authorization start screen among test participants"
  tags: [critical, tns, tns_bulb, enter]
  numerator:
    observations: [auth_start]
    groupby: [participant]

restore_start_proportion:
  description: "share of unique cookies with password restore start screen among test participants"
  tags: [i2, tns, tns_bulb, restore, enter]
  numerator:
    observations: [restore_start]
    groupby: [participant]


 ######  ######## ##       ##       ######## ########
##    ## ##       ##       ##       ##       ##     ##
##       ##       ##       ##       ##       ##     ##
 ######  ######   ##       ##       ######   ########
      ## ##       ##       ##       ##       ##   ##
##    ## ##       ##       ##       ##       ##    ##
 ######  ######## ######## ######## ######## ##     ##

###############################################################################
# Seller :: Totals
###############################################################################

items_added:
  tags: [critical, sx, total, item_add]
  numerator:
    observations: [items_added]
  description: "Items started for paticipant_type='cookie'"

items_add_started:
  tags: [i3, sx, total, item_add]
  numerator:
    observations: [items_add_started]
  description: "Items add started for paticipant_type='cookie'"

items_started:
  title: items_started
  tags: [sx, item_add, i1]
  numerator:
    observations: [items_started]
  description: "Items created and activated (paid)"

items_started_net:
  title: items_started_net
  tags: [sx, item_add, critical]
  numerator:
    observations: [items_started_net]
  description: "Items created, activated (paid) and allowed by moderation"

items_reactivated:
  title: items_reactivated
  tags: [sx, reactivation]
  numerator:
    observations: [items_reactivated]
  description: "Items reactivated"

items_reactivated_net:
  title: items_reactivated_net
  tags: [i1, sx, reactivation]
  numerator:
    observations: [items_reactivated_net]
  description: "Items reactivated and allowed by moderation"

items_sold_onavito:
  title: items_sold_onavito
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito]
  description: "Items closed with reason Sold on Avito"

items_sold_onavito_start_date:
  title: items_sold_onavito_start_date
  tags: [i2, user, sx, liquidity]
  numerator:
    observations: [items_sold_onavito]
  description: "Items closed with reason Sold on Avito for items created after exposure"
  date_filter: [start]

items_closed_no_answer:
  title: items_closed_no_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer]
  description: "Items closed without answer by platform of closing"

items_closed_with_answer:
  title: items_closed_with_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer]
  description: "Items closed with answer by platform of closing"

items_closed_by_user:
  description: "Items closed by user"
  tags: [sx, liquidity, i1]
  numerator:
    observations: [items_closed_by_user]

active_items:
  description: "Active items"
  tags: [sx, i1]
  numerator:
    observations: [active_items]

seller_contacts:
  description: "Seller contacts"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]

seller_contacts_start_date:
  description: "Seller contacts for items created after exposure"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
  date_filter: [start]

lf_amount_net:
  description: "Lf amount without bonuses paid by seller"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]

lf_amount_net_start_date:
  description: "Lf amount without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
  date_filter: [start]

items_allowed:
  description: "Items allowed by moderation"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed]

items_allowed_start_date:
  description: "Items created after exposure and allowed by moderation"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed]
  date_filter: [start]

items_blocked_rejected:
  description: "Blocked or rejected items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected]

items_blocked_rejected_start_date:
  description: "Blocked or rejected items for items created after exposure"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected]
  date_filter: [start]

items_blocked:
  description: "Blocked items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked]

items_blocked_start_date:
  description: "Blocked items"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked]
  date_filter: [start]

items_rejected:
  description: "Rejected items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected]

items_rejected_start_date:
  description: "Rejected items"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected]
  date_filter: [start]

seller_favorites_added:
  description: "Favorites add"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]

seller_favorites_added_start_date:
  description: "Favorites add for items created after exposure"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
  date_filter: [start]

seller_favorites_removed:
  description: "Favorites removed"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]

seller_favorites_removed_start_date:
  description: "Favorites removed for items created after exposure"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
  date_filter: [start]

item_chains_started:
  title: item_chains_started
  description: "Items add started"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_chains_started]

item_add_category_first_clicks:
  description: "Category select first clicks on item add"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_category_first_clicks]

item_add_category_last_clicks:
  description: "Category select last clicks on item add"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_category_last_clicks]

seller_own_item_views:
  description: "Views own seller item"
  tags: [sx, i3]
  numerator:
    observations: [own_item_views]

seller_profile_views:
  description: "Views seller profile (list of his items)"
  tags: [sx, i3]
  numerator:
    observations: [seller_profile_views]

item_edits:
  description: "Items edits by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits]

item_edits_start_date:
  description: "Items edits (by platform of last activation) for items created after exposure"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits]
  date_filter: [start]

item_edit_starts:
  description: "Item edit starts by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts]

items_edit_started:
  description: "Items that started edit by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edit_started]

items_edited:
  description: "Items that edited by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited]

items_edited_start_date:
  description: "Items that edited (by platform of last activation) for items created after exposure"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [items_edited]
  date_filter: [start]

item_edit_starts_by_src:
  description: "Item edit starts by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts_by_src]

item_edits_by_src:
  description: "Item edits by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_by_src]

items_edit_started_by_src:
  description: "Items that started edit by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edit_started_by_src]

items_edited_by_src:
  description: "Items that edited by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [items_edited_by_src]

helpdesk_seller_tickets:
  description: "Items edits"
  tags: [sx, support, i3]
  numerator:
    observations: [helpdesk_seller_tickets]

seller_items_favorites_added:
  description: "Items added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_items_favorites_added]

seller_items_favorites_removed:
  description: "Items removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_items_favorites_removed]

sellers_items_with_contacts:
  description: "Items with contacts"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [sellers_items_with_contacts]

###############################################################################
# Seller :: Ratios
###############################################################################

items_added_per_items_add_started:
  title: items_added_per_items_add_started
  tags: [i4, sx, ratio, item_add]
  numerator:
    observations: [items_added]
  denominator:
    observations: [items_add_started]

item_started_net_per_items_started:
  tags: [sx, item_add, ratio, i2]
  numerator:
    observations: [items_started_net]
  denominator:
    observations: [items_started]

item_started_net_per_items_add_started:
  tags: [sx, item_add, ratio,i3]
  numerator:
    observations: [items_started_net]
  denominator:
    observations: [items_add_started]

item_reactivated_net_per_items_reactivated:
  tags: [sx, reactivation, ratio, i2]
  numerator:
    observations: [items_reactivated_net]
  denominator:
    observations: [items_reactivated]

seller_contacts_per_items_started_net_start_date:
  description: "Seller contacts for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_contacts]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

items_sold_onavito_per_items_started_net_start_date:
  description: "Items closed with reason Sold on Avito for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [items_sold_onavito]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

items_closed_by_user_per_items_started_net_start_date:
  description: "Items closed by user for items created after exposure per item"
  tags: [sx, liquidity, ratio, i3]
  numerator:
    observations: [items_closed_by_user]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

seller_favorites_added_per_items_started_net_start_date:
  description: "Favorites add for items created after exposure per item"
  tags: [sx, liquidity, ratio, i4]
  numerator:
    observations: [seller_favorites_added]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

item_edits_per_items_started_net_start_date:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits]
  denominator:
    observations: [items_started_net]
  date_filter: [start]

item_edits_per_item_edit_starts:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits]
  denominator:
    observations: [item_edit_starts]

item_edits_per_item_edit_starts_by_src:
  tags: [sx, item_edit, ratio, i4]
  numerator:
    observations: [item_edits_by_src]
  denominator:
    observations: [item_edit_starts_by_src]

items_edited_per_items_edit_started:
  tags: [sx, item_edit, ratio, i3]
  numerator:
    observations: [items_edited]
  denominator:
    observations: [items_edit_started]

items_edited_per_items_edit_started_by_src:
  tags: [sx, item_edit, ratio, i3]
  numerator:
    observations: [items_edited_by_src]
  denominator:
    observations: [items_edit_started_by_src]

###############################################################################
# Seller :: User Totals
###############################################################################

sellers_daily:
  title: users_item_added
  tags: [i0, sx, user, item_add]
  numerator:
    observations: [items_added]
    groupby: [participant]
  description: "Users item started"

users_item_add_started:
  title: users_item_add_started
  tags: [i3, sx, item_add]
  numerator:
    observations: [items_add_started]
    groupby: [participant]
  description: "Users item add started"

users_item_started:
  title: users_item_started
  tags: [sx, item_add, i1]
  numerator:
    observations: [items_started]
    groupby: [participant]
  description: "Users created and activated items"

items_started_net_conversion:
  title: users_item_started_net
  tags: [sx, item_add, i0]
  numerator:
    observations: [items_started_net]
    groupby: [participant]
  description: "Users created and activated (paid) items allowed by moderation"

users_item_reactivated:
  title: users_item_reactivated
  tags: [sx, reactivation, i3]
  numerator:
    observations: [items_started]
    groupby: [participant]
  description: "Users reactivated items"

items_reactivated_net_conversion:
  title: users_item_reactivated_net
  tags: [sx, reactivation, i1]
  numerator:
    observations: [items_reactivated_net]
    groupby: [participant]
  description: "Users reactivated items allowed by moderation"

items_sold_onavito_conversion:
  title: users_item_sold_onavito
  tags: [sx, liquidity, i0]
  numerator:
    observations: [items_sold_onavito]
    groupby: [participant]
  description: "Users closed items with reason Sold on Avito"

users_item_closed_no_answer:
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_no_answer]
    groupby: [participant]
  description: "Users who closed items without answer by platforn of closing"

users_item_closed_with_answer:
  title: users_item_closed_with_answer
  tags: [sx, liquidity, i4]
  numerator:
    observations: [items_closed_with_answer]
    groupby: [participant]
  description: "Users who closed items with answer by platform of closing"

users_item_closed_by_user:
  description: "Users who closed items"
  tags: [sx, liquidity, i2]
  numerator:
    observations: [items_closed_by_user]
    groupby: [participant]

users_active_items:
  description: "Users with active items"
  tags: [sx, i2]
  numerator:
    observations: [active_items]
    groupby: [participant]

sellers_with_contacts:
  description: "Sellers with contacted items"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
    groupby: [participant]

sellers_with_contacts_start_date:
  description: "Sellers with contacted items created after exposure"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_contacts]
    groupby: [participant]
  date_filter: [start]

users_lf:
  description: "Users paid LF"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
    groupby: [participant]

users_lf_start_date:
  description: "Users paid LF to new items"
  tags: [sx, monetization]
  numerator:
    observations: [lf_amount_net]
    groupby: [participant]
  date_filter: [start]

users_item_allowed:
  description: "Users with items allowed by moderation"
  tags: [sx, item_add, moderation, i2]
  numerator:
    observations: [items_allowed]
    groupby: [participant]

users_item_allowed_start_date:
  description: "Users with items created after exposure and allowed by moderation"
  tags: [sx, item_add, moderation, i3]
  numerator:
    observations: [items_allowed]
    groupby: [participant]
  date_filter: [start]

users_item_blocked_rejected:
  description: "Users with blocked or rejected items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked_rejected]
    groupby: [participant]

users_item_blocked_rejected_start_date:
  description: "Users with blocked or rejected items created after exposure"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked_rejected]
    groupby: [participant]
  date_filter: [start]

users_item_blocked:
  description: "Users with blocked items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_blocked]
    groupby: [participant]

users_item_blocked_start_date:
  description: "Users with blocked items"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_blocked]
    groupby: [participant]
  date_filter: [start]

users_item_rejected:
  description: "Users with rejected items"
  tags: [sx, moderation, i2]
  numerator:
    observations: [items_rejected]
    groupby: [participant]

users_item_rejected_start_date:
  description: "Users with rejected items"
  tags: [sx, moderation, i3]
  numerator:
    observations: [items_rejected]
    groupby: [participant]
  date_filter: [start]

users_item_chain_started:
  description: "Users started item add"
  tags: [sx, item_add, i4]
  numerator:
    observations: [item_chains_started]
    groupby: [participant]

sellers_favorite_added:
  description: "Sellers with items added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
    groupby: [participant]

sellers_favorite_added_start_date:
  description: "Sellers with items created after exposure and added to favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_added]
    groupby: [participant]
  date_filter: [start]

sellers_favorite_removed:
  description: "Sellers with items removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
    groupby: [participant]

sellers_favorite_removed_start_date:
  description: "Sellers with items created after exposure and removed from favorites"
  tags: [sx, liquidity, i4]
  numerator:
    observations: [seller_favorites_removed]
    groupby: [participant]
  date_filter: [start]

users_item_add_category_first_click:
  description: "Users who made first click on item add category selection"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_category_first_clicks]
    groupby: [participant]

users_item_add_category_last_click:
  description: "Users who made last click on item add category selection"
  tags: [sx, item_add, i3]
  numerator:
    observations: [item_add_category_last_clicks]
    groupby: [participant]

sellers_own_item_viewed:
  description: "Sellers viewed own items"
  tags: [sx, i3]
  numerator:
    observations: [own_item_views]
    groupby: [participant]

sellers_profile_viewed:
  description: "Sellers viewed profile (list of his items)"
  tags: [sx, i3]
  numerator:
    observations: [seller_profile_views]
    groupby: [participant]

users_item_edit:
  description: "Users edited items by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits]
    groupby: [participant]

users_item_edit_start_date:
  description: "Users edited items created after exposure by platform of last activation"
  tags: [sx, item_edit, i4]
  numerator:
    observations: [item_edits]
    groupby: [participant]
  date_filter: [start]

users_item_edit_start:
  description: "Users started edit items by platform of last activation"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts]
    groupby: [participant]

users_item_edit_start_by_src:
  description: "Item started edit items by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edit_starts_by_src]
    groupby: [participant]

users_item_edited_by_src:
  description: "Users edited items by platform of event"
  tags: [sx, item_edit, i3]
  numerator:
    observations: [item_edits_by_src]
    groupby: [participant]

##     ## ##    ## ########
###   ### ###   ##      ##
#### #### ####  ##     ##
## ### ## ## ## ##    ##
##     ## ##  ####   ##
##     ## ##   ###  ##
##     ## ##    ## ########

###############################################################################
# MNZ :: Totals
###############################################################################

listings_single_paid:
  numerator:
    observations: [listings_single_paid]

lf_revenue:
  title: lf_revenue
  description: "Listing fee revenue total recognized with bonuses"
  tags: [lf]
  numerator:
    observations: [lf_revenue]

lf_transactions_by_platform:
  title: lf_transactions_by_platform
  description: "Listing fee transactions total (single and lf from package)"
  tags: [lf]
  numerator:
    observations: [lf_transactions_by_platform]

lf_packages_item_add:
  title: lf_packages
  description: "Num of lf packages bought on item add"
  tags: [lf]
  numerator:
    observations: [lf_packs]

lf_revenue_single:
  title: lf_revenue_single
  description: "Listing fee revenue single on item add"
  tags: [lf]
  numerator:
    observations: [lf_revenue_single]

lf_transactions_single:
  title: lf_transactions_single
  description: "Listing fee single transactions"
  tags: [lf]
  numerator:
    observations: [lf_transactions_single]

express_cv_started:
  description: "Created express cv"
  tags: [cv]
  numerator:
    observations: [express_cv_started]

express_cv_started_net:
  description: "Created express cv allowed by moderation"
  tags: [cv]
  numerator:
    observations: [express_cv_started_net]

express_cv_published:
  description: "Created express cv which were not hide from employers"
  tags: [cv]
  numerator:
    observations: [express_cv_published]

express_cv_views:
  description: "Express cv views by platform of creation"
  tags: [cv]
  numerator:
    observations: [express_cv_views]

contacts_paid_express_cv:
  description: "Express cv paid contacts by platform of creation"
  tags: [cv]
  numerator:
    observations: [contacts_paid_express_cv]

contacts_paid_amount_express_cv:
  description: "Express cv paid contacts amount by platform of creation"
  tags: [cv]
  numerator:
    observations: [contacts_paid_amount_express_cv]
 
vas_amount:
  description: "Vas amount with bonuses paid by seller"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount]

vas_amount_start_date:
  description: "Vas amount with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  date_filter: [start]

vas_amount_net:
  description: "Vas amount without bonuses paid by seller"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]

vas_amount_net_start_date:
  description: "Vas amount without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  date_filter: [start]

users_vas:
  description: "Users applied VAS"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
    groupby: [participant]

users_vas_start_date:
  description: "Users applied VAS to items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
    groupby: [participant]
  date_filter: [start]

vas_transactions:
  title: vas_transactions
  description: "VAS products transactions"
  tags: [sx, monetization, vas, i0, m42, tree]
  numerator:
    observations: [vas_transactions]

vas_transactions_start_date:
  title: vas_transactions_start_date
  description: "VAS products transactions for items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_transactions]
  date_filter: [start]

vas_amount_turbo:
  description: "vas amount (turbo) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]

vas_amount_turbo_start_date:
  description: "vas amount (turbo) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  date_filter: [start]

vas_amount_net_turbo:
  description: "vas amount (turbo) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]

vas_amount_net_turbo_start_date:
  description: "vas amount (turbo) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  date_filter: [start]

users_vas_turbo:
  description: "Users applied VAS (turbo)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
    groupby: [participant]

users_vas_turbo_start_date:
  description: "Users applied VAS (turbo) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
    groupby: [participant]
  date_filter: [start]

vas_transactions_turbo:
  title: vas_transactions_turbo
  description: "VAS (turbo) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_turbo]

vas_transactions_turbo_start_date:
  title: vas_transactions_turbo_start_date
  description: "VAS (turbo) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_amount_fast:
  description: "vas amount (fast) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]

vas_amount_fast_start_date:
  description: "vas amount (fast) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  date_filter: [start]

vas_amount_net_fast:
  description: "vas amount (fast) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]

vas_amount_net_fast_start_date:
  description: "vas amount (fast) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  date_filter: [start]

users_vas_fast:
  description: "Users applied VAS (fast)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
    groupby: [participant]

users_vas_fast_start_date:
  description: "Users applied VAS (fast) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
    groupby: [participant]
  date_filter: [start]

vas_transactions_fast:
  title: vas_transactions_fast
  description: "VAS (fast) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_fast]

vas_transactions_fast_start_date:
  title: vas_transactions_fast_start_date
  description: "VAS (fast) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_amount_pushup:
  description: "vas amount (pushup) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]

vas_amount_pushup_start_date:
  description: "vas amount (pushup) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  date_filter: [start]

vas_amount_net_pushup:
  description: "vas amount (pushup) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]

vas_amount_net_pushup_start_date:
  description: "vas amount (pushup) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  date_filter: [start]

users_vas_pushup:
  description: "Users applied VAS (pushup)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
    groupby: [participant]

users_vas_pushup_start_date:
  description: "Users applied VAS (pushup) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
    groupby: [participant]
  date_filter: [start]

vas_transactions_pushup:
  title: vas_transactions_pushup
  description: "VAS (pushup) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_pushup]

vas_transactions_pushup_start_date:
  title: vas_transactions_pushup_start_date
  description: "VAS (pushup) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_amount_premium:
  description: "vas amount (premium) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]

vas_amount_premium_start_date:
  description: "vas amount (premium) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  date_filter: [start]

vas_amount_net_premium:
  description: "vas amount (premium) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]

vas_amount_net_premium_start_date:
  description: "vas amount (premium) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  date_filter: [start]

users_vas_premium:
  description: "Users applied VAS (premium)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
    groupby: [participant]

users_vas_premium_start_date:
  description: "Users applied VAS (premium) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
    groupby: [participant]
  date_filter: [start]

vas_transactions_premium:
  title: vas_transactions_premium
  description: "VAS (premium) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_premium]

vas_transactions_premium_start_date:
  title: vas_transactions_premium_start_date
  description: "VAS (premium) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_amount_vip:
  description: "vas amount (vip) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]

vas_amount_vip_start_date:
  description: "vas amount (vip) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  date_filter: [start]

vas_amount_net_vip:
  description: "vas amount (vip) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]

vas_amount_net_vip_start_date:
  description: "vas amount (vip) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  date_filter: [start]

users_vas_vip:
  description: "Users applied VAS (vip)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
    groupby: [participant]

users_vas_vip_start_date:
  description: "Users applied VAS (vip) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
    groupby: [participant]
  date_filter: [start]

vas_transactions_vip:
  title: vas_transactions_vip
  description: "VAS (vip) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_vip]

vas_transactions_vip_start_date:
  title: vas_transactions_vip_start_date
  description: "VAS (vip) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_amount_xl:
  description: "vas amount (xl) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]

vas_amount_xl_start_date:
  description: "vas amount (xl) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  date_filter: [start]

vas_amount_net_xl:
  description: "vas amount (xl) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]

vas_amount_net_xl_start_date:
  description: "vas amount (xl) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  date_filter: [start]

users_vas_xl:
  description: "Users applied VAS (xl)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
    groupby: [participant]

users_vas_xl_start_date:
  description: "Users applied VAS (xl) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
    groupby: [participant]
  date_filter: [start]

vas_transactions_xl:
  title: vas_transactions_xl
  description: "VAS (xl) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_xl]

vas_transactions_xl_start_date:
  title: vas_transactions_xl_start_date
  description: "VAS (xl) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_amount_highlight:
  description: "vas amount (highlight) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]

vas_amount_highlight_start_date:
  description: "vas amount (highlight) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  date_filter: [start]

vas_amount_net_highlight:
  description: "vas amount (highlight) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]

vas_amount_net_highlight_start_date:
  description: "vas amount (highlight) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  date_filter: [start]

users_vas_highlight:
  description: "Users applied VAS (highlight)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
    groupby: [participant]

users_vas_highlight_start_date:
  description: "Users applied VAS (highlight) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
    groupby: [participant]
  date_filter: [start]

vas_transactions_highlight:
  title: vas_transactions_highlight
  description: "VAS (highlight) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_highlight]

vas_transactions_highlight_start_date:
  title: vas_transactions_highlight_start_date
  description: "VAS (highlight) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_amount_activation:
  description: "vas amount (activation) with bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]

vas_amount_activation_start_date:
  description: "vas amount (activation) with bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  date_filter: [start]

vas_amount_net_activation:
  description: "vas amount (activation) without bonuses paid by seller"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]

vas_amount_net_activation_start_date:
  description: "vas amount (activation) without bonuses paid by seller for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  date_filter: [start]

users_vas_activation:
  description: "Users applied VAS (activation)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
    groupby: [participant]

users_vas_activation_start_date:
  description: "Users applied VAS (activation) to items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
    groupby: [participant]
  date_filter: [start]

vas_transactions_activation:
  title: vas_transactions_activation
  description: "VAS (activation) products transactions"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_activation]

vas_transactions_activation_start_date:
  title: vas_transactions_activation_start_date
  description: "VAS (activation) products transactions for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_transactions_activation]
  date_filter: [start]


###############################################################################
# MNZ :: Ratios
###############################################################################

payment_method_pv_per_listing_type_pv:
  numerator:
    observations: [pages_payment_method]
  denominator:
    observations: [pages_listing_type]

success_payments_per_listing_type_pv:
  numerator:
    observations: [pages_success_payment]
  denominator:
    observations: [pages_listing_type]

payment_page_per_lf_show_block:
  title: payment_page_per_lf_show
  description: "Conversion from lf block show to payment page"
  tags: [lf]
  numerator:
    observations: [lf_payment_page_events]
  denominator:
    observations: [lf_block_show_events]

item_add_success_per_lf_show_block:
  title: item_add_per_lf_show
  description: "Conversion from lf block show to success item add"
  tags: [lf]
  numerator:
    observations: [final_page_events]
  denominator:
    observations: [lf_block_show_events]

express_cv_form_open_item_add_conversion:
  description: "Conversion from express cv form open to item add"
  tags: [cv]
  numerator:
    observations: [express_cv_started]
  denominator:
    observations: [express_cv_form_open]

express_cv_allowed_conversion:
  description: "Conversion from created express cv to allowed by moderation"
  tags: [cv]
  numerator:
    observations: [express_cv_started_net]
  denominator:
    observations: [express_cv_started]

vas_avo_net:
  title: vas_avo_net
  description: "Vas amount without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  denominator:
    observations: [vas_transactions]

vas_avo_net_start_date:
  title: vas_avo_net_start_date
  description: "Vas amount without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount_net]
  denominator:
    observations: [vas_transactions]
  date_filter: [start]

vas_avo:
  title: vas_avo
  description: "Vas amount with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  denominator:
    observations: [vas_transactions]

vas_avo_start_date:
  title: vas_avo_start_date
  description: "Vas amount with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i0]
  numerator:
    observations: [vas_amount]
  denominator:
    observations: [vas_transactions]
  date_filter: [start]

vas_avo_net_turbo:
  title: vas_avo_net_turbo
  description: "vas amount (turbo) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  denominator:
    observations: [vas_transactions_turbo]

vas_avo_net_turbo_start_date:
  title: vas_avo_net_turbo_start_date
  description: "vas amount (turbo) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_turbo]
  denominator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_avo_turbo:
  title: vas_avo_turbo
  description: "vas amount (turbo) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  denominator:
    observations: [vas_transactions_turbo]

vas_avo_turbo_start_date:
  title: vas_avo_turbo_start_date
  description: "vas amount (turbo) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_turbo]
  denominator:
    observations: [vas_transactions_turbo]
  date_filter: [start]

vas_avo_net_fast:
  title: vas_avo_net_fast
  description: "vas amount (fast) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  denominator:
    observations: [vas_transactions_fast]

vas_avo_net_fast_start_date:
  title: vas_avo_net_fast_start_date
  description: "vas amount (fast) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_fast]
  denominator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_avo_fast:
  title: vas_avo_fast
  description: "vas amount (fast) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  denominator:
    observations: [vas_transactions_fast]

vas_avo_fast_start_date:
  title: vas_avo_fast_start_date
  description: "vas amount (fast) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_fast]
  denominator:
    observations: [vas_transactions_fast]
  date_filter: [start]

vas_avo_net_pushup:
  title: vas_avo_net_pushup
  description: "vas amount (pushup) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  denominator:
    observations: [vas_transactions_pushup]

vas_avo_net_pushup_start_date:
  title: vas_avo_net_pushup_start_date
  description: "vas amount (pushup) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_pushup]
  denominator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_avo_pushup:
  title: vas_avo_pushup
  description: "vas amount (pushup) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  denominator:
    observations: [vas_transactions_pushup]

vas_avo_pushup_start_date:
  title: vas_avo_pushup_start_date
  description: "vas amount (pushup) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_pushup]
  denominator:
    observations: [vas_transactions_pushup]
  date_filter: [start]

vas_avo_net_premium:
  title: vas_avo_net_premium
  description: "vas amount (premium) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  denominator:
    observations: [vas_transactions_premium]

vas_avo_net_premium_start_date:
  title: vas_avo_net_premium_start_date
  description: "vas amount (premium) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_premium]
  denominator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_avo_premium:
  title: vas_avo_premium
  description: "vas amount (premium) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  denominator:
    observations: [vas_transactions_premium]

vas_avo_premium_start_date:
  title: vas_avo_premium_start_date
  description: "vas amount (premium) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_premium]
  denominator:
    observations: [vas_transactions_premium]
  date_filter: [start]

vas_avo_net_vip:
  title: vas_avo_net_vip
  description: "vas amount (vip) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  denominator:
    observations: [vas_transactions_vip]

vas_avo_net_vip_start_date:
  title: vas_avo_net_vip_start_date
  description: "vas amount (vip) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_vip]
  denominator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_avo_vip:
  title: vas_avo_vip
  description: "vas amount (vip) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  denominator:
    observations: [vas_transactions_vip]

vas_avo_vip_start_date:
  title: vas_avo_vip_start_date
  description: "vas amount (vip) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_vip]
  denominator:
    observations: [vas_transactions_vip]
  date_filter: [start]

vas_avo_net_xl:
  title: vas_avo_net_xl
  description: "vas amount (xl) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  denominator:
    observations: [vas_transactions_xl]

vas_avo_net_xl_start_date:
  title: vas_avo_net_xl_start_date
  description: "vas amount (xl) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_xl]
  denominator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_avo_xl:
  title: vas_avo_xl
  description: "vas amount (xl) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  denominator:
    observations: [vas_transactions_xl]

vas_avo_xl_start_date:
  title: vas_avo_xl_start_date
  description: "vas amount (xl) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_xl]
  denominator:
    observations: [vas_transactions_xl]
  date_filter: [start]

vas_avo_net_highlight:
  title: vas_avo_net_highlight
  description: "vas amount (highlight) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  denominator:
    observations: [vas_transactions_highlight]

vas_avo_net_highlight_start_date:
  title: vas_avo_net_highlight_start_date
  description: "vas amount (highlight) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_highlight]
  denominator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_avo_highlight:
  title: vas_avo_highlight
  description: "vas amount (highlight) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  denominator:
    observations: [vas_transactions_highlight]

vas_avo_highlight_start_date:
  title: vas_avo_highlight_start_date
  description: "vas amount (highlight) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_highlight]
  denominator:
    observations: [vas_transactions_highlight]
  date_filter: [start]

vas_avo_net_activation:
  title: vas_avo_net_activation
  description: "vas amount (activation) without bonuses paid by seller divided by number of transactions (AVO - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  denominator:
    observations: [vas_transactions_activation]

vas_avo_net_activation_start_date:
  title: vas_avo_net_activation_start_date
  description: "vas amount (activation) without bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_net_activation]
  denominator:
    observations: [vas_transactions_activation]
  date_filter: [start]

vas_avo_activation:
  title: vas_avo_activation
  description: "vas amount (activation) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  denominator:
    observations: [vas_transactions_activation]

vas_avo_activation_start_date:
  title: vas_avo_activation_start_date
  description: "vas amount (activation) with bonuses paid by seller divided by number of transactions (AVO_net - average value order)  for items created after exposure"
  tags: [sx, monetization, vas, i1]
  numerator:
    observations: [vas_amount_activation]
  denominator:
    observations: [vas_transactions_activation]
  date_filter: [start]

  
########  #### ##       ##       #### ##    ##  ######
##     ##  ##  ##       ##        ##  ###   ## ##    ##
##     ##  ##  ##       ##        ##  ####  ## ##
########   ##  ##       ##        ##  ## ## ## ##   ####
##     ##  ##  ##       ##        ##  ##  #### ##    ##
##     ##  ##  ##       ##        ##  ##   ### ##    ##
########  #### ######## ######## #### ##    ##  ######

###############################################################################
# Billing :: Totals
###############################################################################

payment_method_page:
  title: payment_method_page
  tags: [payments]
  numerator:
    observations: [payment_method_page]
  description: "Number of started payment sessions"

payment_method_choice:
  title: payment_method_choice
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
  description: "Number of payment sessions with selected payment method"

successful_payment:
  title: successful_payment
  tags: [payments]
  numerator:
    observations: [successful_payment]
  description: "Number of successful payment sessions"

payment_method_page_cv:
  title: payment_method_page_CV
  tags: [payments]
  numerator:
    observations: [payment_method_page_CV]
  description: "Number of started CV payment sessions"

payment_method_choice_cv:
  title: payment_method_choice_CV
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
  description: "Number of CV payment sessions with selected payment method"

successful_payment_cv:
  title: successful_payment_CV
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
  description: "Number of successful CV payment sessions"

###############################################################################
# Billing :: Ratios
###############################################################################

successful_payment_share:
  description: "Share of successful payments step3/step1"
  tags: [payments, m42]
  numerator:
    observations: [successful_payment]
  denominator:
    observations: [payment_method_page]

successful_payment_share_proportion:
  description: "Share of successful payments step3/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [successful_payment]
    groupby: [participant]
  denominator:
    observations: [payment_method_page]
    groupby: [participant]

selected_payment_method_share:
  description: "Share of payment sessions with selected payment method step2/step1"
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
  denominator:
    observations: [payment_method_page]

selected_payment_method_share_proportion:
  description: "Share of payment sessions with selected payment method step2/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [payment_method_choice]
    groupby: [participant]
  denominator:
    observations: [payment_method_page]
    groupby: [participant]

successful_payment_share_cv:
  description: "Share of successful payments CV step3/step1"
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
  denominator:
    observations: [payment_method_page_CV]

successful_payment_share_proportion_cv:
  description: "Share of successful payments CV step3/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [successful_payment_CV]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_CV]
    groupby: [participant]

selected_payment_method_share_cv:
  description: "Share of CV payment sessions with selected payment method step2/step1"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
  denominator:
    observations: [payment_method_page_CV]

selected_payment_method_share_proportion_cv:
  description: "Share of CV payment sessions with selected payment method step2/step1 (proportion)"
  tags: [payments]
  numerator:
    observations: [payment_method_choice_CV]
    groupby: [participant]
  denominator:
    observations: [payment_method_page_CV]
    groupby: [participant]

main_payment_methods_share:
  description: "Share of successful payments by cards and SBOL"
  tags: [payments]
  numerator:
    observations: [successful_payment_card, successful_payment_SBOL]
  denominator:
    observations: [successful_payment]


 ######   #######   ######         ######   #######  ########  ########
##    ## ##     ## ##    ##       ##    ## ##     ## ##     ## ##
##              ## ##             ##       ##     ## ##     ## ##
##        #######  ##             ##       ##     ## ########  ######
##       ##        ##             ##       ##     ## ##   ##   ##
##    ## ##        ##    ##       ##    ## ##     ## ##    ##  ##
 ######  #########  ######         ######   #######  ##     ## ########

###############################################################################
# C2C Core :: Totals
###############################################################################

new_listers:
  title: new_listers
  tags: [i1]
  numerator:
    observations: [new_listers]
  description: "Users who started their first item in logical category. Additive across logical categories"

active_listers:
  title: active_listers
  tags: [i0, m42, tree]
  numerator:
    observations: [active_listers]
  description: "Users who have at least 1 active item in a logical category. Additive across logical_category"

active_items_c2c:
  title: active_items_big10
  tags: [i0, m42, tree, big10]
  numerator:
    observations: [active_items_c2c]
  description: "Quantity of active items from lister_day. No filters."

soa_items_c2c:
  title: soa_items_big10
  tags: [i0, m42, tree, big10]
  numerator:
    observations: [soa_items_c2c]
  description: "Quantity sold on avito items. Similar to user_report"

activated_listers:
  title: activated_listers
  tags: [i1, m42, tree]
  numerator:
    observations: [activated_listers]
  description: "Active listers in (logical_category X user_segment) that were not active yesterday. Additive across logical_category, user_segment"

activated_listers_changed_segment:
  title: activated_listers_changed_segment
  tags: [i2, m42, tree]
  numerator:
    observations: [activated_listers_changed_segment]
  description: "Active listers in (logical_category X user_segment) that had a different user_segment in this logical_category yesterday. Additive across logical_category, user_segment"

returned_listers:
  title: returned_listers
  tags: [i2, m42, tree]
  numerator:
    observations: [returned_listers]
  description: "Activated listers in (logical_category X user_segment) that aren't new listers. Additive across logical categories"

deactivated_listers:
  title: deactivated_listers
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers]
  description: "Users who were active listers in (logical_category X user_segment) yesterday but aren't active today. Additive across logical_category, user_segment"

deactivated_listers_voluntary:
  title: deactivated_listers_voluntary
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_voluntary]
  description: "Listers that were deactivated because their last active item was closed by user. Additive across logical_category, user_segment"

deactivated_listers_involuntary:
  title: deactivated_listers_involuntary
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_involuntary]
  description: "Listers that were deactivated because their last active item was blocked/rejected. Additive across logical_category, user_segment"

deactivated_listers_changed_segment:
  title: deactivated_listers_changed_segment
  tags: [i2, m42, tree]
  numerator:
    observations: [deactivated_listers_changed_segment]
  description: "Listers that were deactivated because they changed user_segment. Additive across logical_category, user_segment"

new_buyers:
  title: new_buyers
  tags: [i1, m42, tree]
  numerator:
    observations: [new_buyers]
  description: "Cookies that made their first contact in a logical_category. Additive across logical_category"

returned_buyers:
  title: returned_buyers
  tags: [i1, m42, tree]
  numerator:
    observations: [returned_buyers]
  description: "Cookies that made contact in a logical_category that are not new buyers. Additive across logical_category"

contacts_canonical:
  title: contacts_canonical
  tags: [i1, m42, tree]
  numerator:
    observations: [contacts_csc_cannonical]
  description: "First contact of cookie per item/day. Additive across all dimensions. Source is dma.contacts_stream_observation"

buyers_canonical:
  title: buyers_canonical
  tags: [i0, m42, tree]
  numerator:
    observations: [contacts_csc_cannonical]
    groupby: [participant]
  description: "Buyers from dma.contacts_stream_observation. Source of buyers from Big10.Source is dma.contacts_stream_observation"

 ######  ##     ## ########  ########   #######  ########  ########
##    ## ##     ## ##     ## ##     ## ##     ## ##     ##    ##
##       ##     ## ##     ## ##     ## ##     ## ##     ##    ##
 ######  ##     ## ########  ########  ##     ## ########     ##
      ## ##     ## ##        ##        ##     ## ##   ##      ##
##    ## ##     ## ##        ##        ##     ## ##    ##     ##
 ######   #######  ##        ##         #######  ##     ##    ##

###############################################################################
# Support Metrics
###############################################################################

support_email_tickets_created:
  title: email_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_email_created]
    groupby: []
  description: "Number of created tickets via email"

support_email_tickets_creators:
  title: email_tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_email_created]
    groupby: [participant]
  description: "Number of users created tickets via email"

support_wizard_tickets_created:
  title: hc_tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created]
    groupby: []
  description: "Number of created tickets via HelpCenter form: Desktop/MAV/iOs/Android"

support_wizard_tickets_creators:
  title: hc_tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created]
    groupby: [participant]
  description: "Number of users created tickets via HelpCenter form: Desktop/MAV/iOs/Android"

support_email_wizard_tickets_created:
  title: tickets_created
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created, ticket_email_created]
    groupby: []
  description: "Number of created tickets via HelpCenter and email"

support_email_wizard_tickets_creators:
  title: tickets_creators
  tags: [support, other]
  numerator:
    observations: [ticket_wizard_created, ticket_email_created]
    groupby: [participant]
  description: "Number of users created tickets via HelpCenter and email"

support_ticket_with_changed_problem_rate:
  title: tickets_changed_problem
  tags: [support, other]
  numerator:
    observations: [tickets_problem_changed]
  denominator:
    observations: [ticket_wizard_created, ticket_email_created]
  description: "Ratio of tickets with changed problem"

support_callcenter_calls:
  title: callcenter_calls
  tags: [support, other]
  numerator:
    observations: [callcenter_calls]
  description: "Number of calls to Support Callcenter"

support_callcenter_callers:
  title: callcenter_callers
  tags: [support, other]
  numerator:
    observations: [callcenter_calls]
    groupby: [participant]
  description: "Number of callers to Support Callcenter"

support_helpcenter_wizard_visits:
  title: helpcenter_wizard_visits
  tags: [support, other]
  numerator:
    observations: [helpcenter_wizard_sessions]
  description: "Number of sessions in HC + Wizard"

support_helpcenter_wizard_visitors:
  title: helpcenter_wizard_visitors
  tags: [support, other]
  numerator:
    observations: [helpcenter_wizard_sessions]
    groupby: [participant]
  description: "Number of visitors in HC + Wizard"

support_wizard_visits:
  title: wizard_visits
  tags: [support, other]
  numerator:
    observations: [wizard_sessions]
  description: "Number of sessions in Wizard"

support_wizard_visitors:
  title: wizard_visitors
  tags: [support, other]
  numerator:
    observations: [wizard_sessions]
    groupby: [participant]
  description: "Number of visitors in Wizard"

support_helpcenter_article_views:
  title: helpcenter_article_views
  tags: [support, other]
  numerator:
    observations: [article_views]
  description: "Number of article views in HC & Wizard"

support_helpcenter_article_viewers:
  title: helpcenter_article_viewers
  tags: [support, other]
  numerator:
    observations: [article_views]
    groupby: [participant]
  description: "Number of article viewers in HC & Wizard"



########   #######  ########        ######   #######  ########  ########
##     ## ##     ## ##     ##      ##    ## ##     ## ##     ## ##
##     ##        ## ##     ##      ##       ##     ## ##     ## ##
########    ##      ########       ##       ##     ## ########  ######
##     ## ##        ##     ##      ##       ##     ## ##   ##   ##
##     ## ##        ##     ##      ##    ## ##     ## ##    ##  ##
########  ######### ########        ######   #######  ##     ## ########

###############################################################################
# B2B Core :: Totals
###############################################################################

paid_contact_amount_net_adj:
  title: paid_contact_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [paid_contact_amount_net_adj]
  description: "Net revenue from paid contacts without VAT"

autoteka_amount_net_adj:
  title: autoteka_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [autoteka_amount_net_adj]
  description: "Net revenue from autoteka product without VAT"

domofond_amount_net_adj:
  title: domofond_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [domofond_amount_net_adj]
  description: "Net revenue from domofond products without VAT"

delivery_amount_net_adj:
  title: delivery_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [delivery_amount_net_adj]
  description: "Net revenue from delivery products without VAT"

vas_amount_net_adj:
  title: vas_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_amount_net_adj]
  description: "Net revenue from VAS products without VAT"

lf_amount_net_adj:
  title: lf_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_amount_net_adj]
  description: "Net revenue from LF products without VAT"

subs_amount_net_adj:
  title: subs_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_amount_net_adj]
  description: "Net revenue from subscription products without VAT"

extensions_amount_net_adj:
  title: extensions_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_amount_net_adj]
  description: "Net revenue from subscription extensions without VAT"

subs_w_extensions_amount_net_adj:
  title: subs_w_extensions_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_amount_net_adj, ext_amount_net_adj]
  description: "Net revenue from Subscription and extension products without VAT"

classified_amount_net_adj:
  title: classified_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  description: "Net revenue from classified products without VAT: vas,lf,subscriptions,extensions."

other_projects_amount_net_adj:
  title: other_projects_amount_net_adj
  tags: [i0, m42, tree]
  numerator:
    observations: [autoteka_amount_net_adj, delivery_amount_net_adj, domofond_amount_net_adj]
  description: "Net revenue from Other projects without VAT: autoteka, delivery, domofond."

lf_transactions:
  title: lf_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_transactions]
  description: "lf products transactions"

subs_transactions:
  title: subs_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_transactions]
  description: "Subscription products transactions"

extensions_transactions:
  title: extensions_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_transactions]
  description: "Extension products transactions"

subs_w_extensions_transactions:
  title: subs_w_extensions_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_transactions, ext_transactions]
  description: "Subscription and extension products transactions without VAT"

classified_transactions:
  title: classified_transactions
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  description: "Classified products transactions: vas,lf,subscriptions,extensions."

vas_users:
  title: vas_users
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_users]
  description: "VAS users"

lf_users:
  title: lf_users
  tags: [i0, m42, tree]
  numerator:
    observations: [lf_users]
  description: "LF products users"

subs_users:
  title: subs_users
  tags: [i0, m42, tree]
  numerator:
    observations: [subs_users]
  description: "Subscription products users"

extensions_users:
  title: extensions_users
  tags: [i0, m42, tree]
  numerator:
    observations: [ext_users]
  description: "Extension products users"

classified_users:
  title: classified_users
  tags: [i0, m42, tree]
  numerator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  description: "classified products users"

###############################################################################
# B2B Core :: Ratios
###############################################################################

vas_arpu_net_adj:
  title: vas_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "VAS average rate per user: VAS products revenue divided by total number of active listers"

lf_arpu_net_adj:
  title: lf_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "LF average rate per user: LF products revenue divided by total number of active listers"

subs_w_extensions_arpu_net_adj:
  title: subs_w_extensions_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "Subscription and extension products average rate per user: revenue divided by total number of active listers"

classified_arpu_net_adj:
  title: classified_ARPU_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [active_listers]
  description: "Classified products revenue divided by total number of active listers: vas,lf,subscriptions,extensions."

vas_paying_users_ratio:
  title: vas_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_users]
  denominator:
    observations: [active_listers]
  description: "VAS products users divided by total number of active listers"

lf_paying_users_ratio:
  title: lf_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_users]
  denominator:
    observations: [active_listers]
  description: "LF products users divided by total number of active listers"

subs_paying_users_ratio:
  title: subs_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_users]
  denominator:
    observations: [active_listers]
  description: "Subscription users divided by total number of active listers"

extensions_paying_users_ratio:
  title: extensions_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_users]
  denominator:
    observations: [active_listers]
  description: "Extension products users divided by total number of active listers"

classified_paying_users_ratio:
  title: classified_paying_users_ratio
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  denominator:
    observations: [active_listers]
  description: "Classified products users divided by total number of active listers: vas,lf,subscriptions,extensions."

vas_transactions_per_user:
  title: vas_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_transactions]
  denominator:
    observations: [vas_users]
  description: "VAS products transactions divided by number of users"

lf_transactions_per_user:
  title: lf_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_transactions]
  denominator:
    observations: [lf_users]
  description: "LF products transactions divided by number of users"

subs_transactions_per_user:
  title: subs_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_transactions]
  denominator:
    observations: [subs_users]
  description: "Subscription products transactions divided by number of users"

extensions_transactions_per_user:
  title: extensions_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_transactions]
  denominator:
    observations: [ext_users]
  description: "Extension products transactions divided by number of users"

classified_transactions_per_user:
  title: classified_transactions_per_user
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  denominator:
    observations: [vas_users, lf_users, subs_users, ext_users]
  description: "Classified products transactions divided by number of users: vas,lf,subscriptions,extensions."

vas_price_net_adj:
  title: vas_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj]
  denominator:
    observations: [vas_transactions]
  description: "VAS products revenue divided by number of transactions"

lf_price_net_adj:
  title: lf_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [lf_amount_net_adj]
  denominator:
    observations: [lf_transactions]
  description: "LF products revenue divided by number of transactions"

subs_price_net_adj:
  title: subs_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [subs_amount_net_adj]
  denominator:
    observations: [subs_transactions]
  description: "Subscription products revenue divided by number of transactions"

extensions_price_net_adj:
  title: extensions_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [ext_amount_net_adj]
  denominator:
    observations: [ext_transactions]
  description: "Extension products revenue divided by number of transactions"

classified_price_net_adj:
  title: classified_price_net_adj
  tags: [i0, m42, tree, ratio]
  numerator:
    observations: [vas_amount_net_adj, lf_amount_net_adj, subs_amount_net_adj, ext_amount_net_adj]
  denominator:
    observations: [vas_transactions, lf_transactions, subs_transactions, ext_transactions]
  description: "Classified products revenue divided by number of transactionss: vas,lf,subscriptions,extensions."


########  ######## ########  ########  #######  ########  ##     ##    ###    ##    ##  ######  ########
##     ## ##       ##     ## ##       ##     ## ##     ## ###   ###   ## ##   ###   ## ##    ## ##
##     ## ##       ##     ## ##       ##     ## ##     ## #### ####  ##   ##  ####  ## ##       ##
########  ######   ########  ######   ##     ## ########  ## ### ## ##     ## ## ## ## ##       ######
##        ##       ##   ##   ##       ##     ## ##   ##   ##     ## ######### ##  #### ##       ##
##        ##       ##    ##  ##       ##     ## ##    ##  ##     ## ##     ## ##   ### ##    ## ##
##        ######## ##     ## ##        #######  ##     ## ##     ## ##     ## ##    ##  ######  ########

server_loading_dur:
  tags: [performance]
  numerator:
    observations: [serverloading_duration]
  denominator:
    observations: [serverloading_events]

draw_dur:
  tags: [performance]
  numerator:
    observations: [draw_duration]
  denominator:
    observations: [draw_events]

prepare_dur:
  tags: [performance]
  numerator:
    observations: [prepare_duration]
  denominator:
    observations: [prepare_events]

init_dur:
  tags: [performance]
  numerator:
    observations: [init_duration]
  denominator:
    observations: [init_events]

local_loading_dur:
  tags: [performance]
  numerator:
    observations: [localloading_duration]
  denominator:
    observations: [localloading_events]

di_dur:
  tags: [performance]
  numerator:
    observations: [di_duration]
  denominator:
    observations: [di_events]

screen_total_dur:
  tags: [performance]
  numerator:
    observations: [serverloading_duration, draw_duration, prepare_duration, init_duration, localloading_duration, di_duration]
  denominator:
    observations: [uniq_screen_sessions]

server_loading_exc:
  tags: [performance]
  numerator:
    observations: [serverloading_exceptions]

draw_exc:
  tags: [performance]
  numerator:
    observations: [draw_exceptions]

prepare_exc:
  tags: [performance]
  numerator:
    observations: [prepare_exceptions]

init_exc:
  tags: [performance]
  numerator:
    observations: [init_exceptions]

local_loading_exc:
  tags: [performance]
  numerator:
    observations: [localloading_exceptions]

di_exc:
  tags: [performance]
  numerator:
    observations: [di_exceptions]
