metric.counter:
  cnt_reviews_score_sum:                   {filter: [{observation_name: reviews_score_sum}], m42: False}
  cnt_s_items:                             {filter: [{observation_name: search_items}], m42: False}
  cnt_s_items_with_rating:                 {filter: [{observation_name: search_items_with_rating}], m42: False}
  cnt_s_with_rating:                       {filter: [{observation_name: searches_with_rating}], m42: False}
  contacts_on_rating:                      {filter: [{$or: [[{observation_name: contacts_on_rating_1}], [{observation_name: contacts_on_rating_2}], [{observation_name: contacts_on_rating_3}], [{observation_name: contacts_on_rating_4}], [{observation_name: contacts_on_rating_5}]]}]}
  contacts_on_rating_1:                    {filter: [{observation_name: contacts_on_rating_1}]}
  contacts_on_rating_2:                    {filter: [{observation_name: contacts_on_rating_2}]}
  contacts_on_rating_3:                    {filter: [{observation_name: contacts_on_rating_3}]}
  contacts_on_rating_4:                    {filter: [{observation_name: contacts_on_rating_4}]}
  contacts_on_rating_5:                    {filter: [{observation_name: contacts_on_rating_5}]}
  item_views_on_rating:                    {filter: [{$or: [[{observation_name: itemviews_on_rating_1}], [{observation_name: itemviews_on_rating_2}], [{observation_name: itemviews_on_rating_3}], [{observation_name: itemviews_on_rating_4}], [{observation_name: itemviews_on_rating_5}]]}]}
  item_views_on_rating_1:                  {filter: [{observation_name: itemviews_on_rating_1}]}
  item_views_on_rating_2:                  {filter: [{observation_name: itemviews_on_rating_2}]}
  item_views_on_rating_3:                  {filter: [{observation_name: itemviews_on_rating_3}]}
  item_views_on_rating_4:                  {filter: [{observation_name: itemviews_on_rating_4}]}
  item_views_on_rating_5:                  {filter: [{observation_name: itemviews_on_rating_5}]}
  items_with_rating:                       {filter: [{observation_name: active_items_with_rating}]}
  reviews_added:                           {filter: [{observation_name: reviews_added}]}

metric.uniq:
  buyers_on_rating_1:                      {counter: contacts_on_rating_1,            key: [participant]}
  buyers_on_rating_2:                      {counter: contacts_on_rating_2,            key: [participant]}
  buyers_on_rating_3:                      {counter: contacts_on_rating_4,            key: [participant]}
  buyers_on_rating_5:                      {counter: contacts_on_rating_5,            key: [participant]}
  users_reviews_added:                     {counter: reviews_added,                   key: [participant]}

metric.ratio:
  contacts_per_item_view_on_rating_1:      {num: contacts_on_rating_1,            den: item_views_on_rating_1}
  contacts_per_item_view_on_rating_2:      {num: contacts_on_rating_2,            den: item_views_on_rating_2}
  contacts_per_item_view_on_rating_3:      {num: contacts_on_rating_3,            den: item_views_on_rating_3}
  contacts_per_item_view_on_rating_4:      {num: contacts_on_rating_4,            den: item_views_on_rating_4}
  contacts_per_item_view_on_rating_5:      {num: contacts_on_rating_5,            den: item_views_on_rating_5}
  reviews_avg_score:                       {num: cnt_reviews_score_sum,           den: reviews_added}
  search_items_ratings_coverage:           {num: cnt_s_items_with_rating,         den: cnt_s_items}

