metric.counter:
  cnt_item_added_chains_15min_3_6min_3min_6: {filter: [{$or: [[{duration_sec.<=: 180}], [{duration_sec.<=: 360}, {duration_sec.>: 180}], [{duration_sec.<=: 900}, {duration_sec.>: 360}], [{duration_sec.>: 900}]]}], m42: False}
  item_add_category_first_clicks:          {filter: [{chain_wizard_click_time.isnull: False}]}
  item_add_category_last_clicks:           {filter: [{chain_wizard_last_click_time.isnull: False}]}
  item_add_chains_confirm:                 {filter: [{chain_item_confirm_time.isnull: False}]}
  item_add_chains_form_input:              {filter: [{chain_last_form_input_time.isnull: False}]}
  item_added_chains_15min:                 {filter: [{duration_sec.>: 900}]}
  item_added_chains_3_6min:                {filter: [{duration_sec.<=: 360}, {duration_sec.>: 180}]}
  item_added_chains_3min:                  {filter: [{duration_sec.<=: 180}]}
  item_added_chains_6_15min:               {filter: [{duration_sec.<=: 900}, {duration_sec.>: 360}]}
  item_chains_started:                     {obs: [observation_value]}
  items_created:                           {filter: [{chain_item_create_time.isnull: False}]}

metric.uniq:
  users_item_add_category_first_click:     {counter: item_add_category_first_clicks,  key: [participant]}
  users_item_add_category_last_click:      {counter: item_add_category_last_clicks,   key: [participant]}
  users_item_add_confirm:                  {counter: item_add_chains_confirm,         key: [participant]}
  users_item_add_created:                  {counter: items_created,                   key: [participant]}
  users_item_add_form_input:               {counter: item_add_chains_form_input,      key: [participant]}
  users_item_chain_started:                {counter: item_chains_started,             key: [participant]}
  users_with_item_added_chains_15min:      {counter: item_added_chains_15min,         key: [participant]}
  users_with_item_added_chains_3_6min:     {counter: item_added_chains_3_6min,        key: [participant]}
  users_with_item_added_chains_3min:       {counter: item_added_chains_3min,          key: [participant]}
  users_with_item_added_chains_6_15min:    {counter: item_added_chains_6_15min,       key: [participant]}

metric.ratio:
  item_add_category_last_click_per_item_add_category_first_click: {num: item_add_category_last_clicks,   den: item_add_category_first_clicks}
  item_add_form_input_per_item_chains_started: {num: item_add_chains_form_input,      den: item_chains_started}
  item_added_chains_15min_share:           {num: item_added_chains_15min,         den: cnt_item_added_chains_15min_3_6min_3min_6}
  item_added_chains_3_6min_share:          {num: item_added_chains_3_6min,        den: cnt_item_added_chains_15min_3_6min_3min_6}
  item_added_chains_3min_share:            {num: item_added_chains_3min,          den: cnt_item_added_chains_15min_3_6min_3min_6}
  item_added_chains_6_15min_share:         {num: item_added_chains_6_15min,       den: cnt_item_added_chains_15min_3_6min_3min_6}
  item_create_per_item_add_first_click:    {num: items_created,                   den: item_add_category_first_clicks}
  item_create_per_item_add_last_click:     {num: items_created,                   den: item_add_category_last_clicks}
  item_create_per_item_chains_started:     {num: items_created,                   den: item_chains_started}
  users_item_add_form_input_per_users_item_chain_started: {num: users_item_add_form_input,       den: users_item_chain_started}
  users_item_add_last_click_per_users_item_add_first_click: {num: users_item_add_category_last_click, den: users_item_add_category_first_click}
  users_item_create_per_users_item_add_first_click: {num: users_item_add_created,          den: users_item_add_category_first_click}
  users_item_create_per_users_item_add_last_click: {num: users_item_add_created,          den: users_item_add_category_last_click}
  users_item_create_per_users_item_chain_started: {num: users_item_add_created,          den: users_item_chain_started}

