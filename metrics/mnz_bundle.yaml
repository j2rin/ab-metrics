metric.counter:    
  bdl_bundle_revenue: {filter: [{transaction_type: 'bundle write off'}], obs: [revenue]}
  bdl_vas_revenue: {filter: [{transaction_type: ['VAS write off', 'Performance VAS write off', 'VAS']}], obs: [revenue]}
  bdl_lf_revenue: {filter: [{transaction_type: 'listing.fee'}], obs: [revenue]}
  bdl_vas_and_bundle_revenue: {filter: [{transaction_type: ['VAS write off', 'Performance VAS write off', 'VAS', 'bundle write off']}], obs: [revenue]}
  bdl_bundle_clean_reserved_revenue: {filter: [{transaction_type: ['bundle reserve', 'bundle return']}], obs: [revenue]}
  bdl_total_clean_reserved_revenue: {filter: [{transaction_type: ['bundle reserve', 'bundle return', 'VAS reserve', 'VAS return', 'Performance VAS reserve', 'Performance VAS return', 'VAS', 'listing.fee']}], obs: [revenue]}
  bdl_total_revenue: {filter: [{transaction_type: ['VAS write off', 'Performance VAS write off', 'VAS', 'bundle write off', 'listing.fee']}], obs: [revenue]}
  bdl_first_day_transactions: {obs: [first_day_transaction_count], m42: False}
  bdl_exposure: {obs: [exposure], m42: False

metric.uniq:
  bdl_vas_or_bundle_users: {counter: bdl_vas_and_bundle_revenue, key: [user_id]}
  bdl_bundle_users: {counter: bdl_bundle_revenue, key: [user_id]}

metric.ratio:
  bdl_conversion_rate: {num: bdl_first_day_transactions, den: bdl_exposure}