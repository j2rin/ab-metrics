definitions:
    - &btc        {metric_name: 'btc'}
    - &c          {metric_name: 'contact'}
    - &delivery   {metric_name: 'delivery'}
    - &order      {metric_name: 'order'}
    - &d3         {delay: 3}
    - &d7         {delay: 7}
    - &d14        {delay: 14}


metric.counter:
    btc_delay_3:               { filter: [*btc,       *d3], obs: [metric_value] }
    btc_delay_7:               { filter: [*btc,       *d7], obs: [metric_value] }
    btc_delay_14:              { filter: [*btc,      *d14], obs: [metric_value] }
    c_delay_3:                 { filter: [*c,         *d3], obs: [metric_value] }
    c_delay_7:                 { filter: [*c,         *d7], obs: [metric_value] }
    c_delay_14:                { filter: [*c,        *d14], obs: [metric_value] }
    delivery_delay_3:          { filter: [*delivery,  *d3], obs: [metric_value] }
    delivery_delay_7:          { filter: [*delivery,  *d7], obs: [metric_value] }
    delivery_delay_14:         { filter: [*delivery, *d14], obs: [metric_value] }
    order_delay_3:             { filter: [*order,     *d3], obs: [metric_value] }
    order_delay_7:             { filter: [*order,     *d7], obs: [metric_value] }
    order_delay_14:            { filter: [*order,    *d14], obs: [metric_value] }

  
metric.uniq:
    user_btc_delay_3:          { counter: btc_delay_3,       key: [cookie] }
    user_btc_delay_7:          { counter: btc_delay_7,       key: [cookie] }
    user_btc_delay_14:         { counter: btc_delay_14,      key: [cookie] }
    user_c_delay_3:            { counter: c_delay_3,         key: [cookie] }
    user_c_delay_7:            { counter: c_delay_7,         key: [cookie] }
    user_c_delay_14:           { counter: c_delay_14,        key: [cookie] }
    user_delivery_delay_3:     { counter: delivery_delay_3,  key: [cookie] }
    user_delivery_delay_7:     { counter: delivery_delay_7,  key: [cookie] }
    user_delivery_delay_14:    { counter: delivery_delay_14, key: [cookie] }
    user_order_delay_3:        { counter: order_delay_3,     key: [cookie] }
    user_order_delay_7:        { counter: order_delay_7,     key: [cookie] }
    user_order_delay_14:       { counter: order_delay_14,    key: [cookie] }
