definitions:
    - &btc        {metric_name: 'btc'}
    - &c          {metric_name: 'contact'}
    - &delivery   {metric_name: 'delivery'}
    - &order      {metric_name: 'order'}
    - &d3         {delay: 3}
    - &d7         {delay: 7}
    - &d14        {delay: 14}


metric.counter:
    btc_3:          { filter: [*btc,       *d3], obs: [metric_value] }
    btc_7:          { filter: [*btc,       *d7], obs: [metric_value] }
    btc_14:         { filter: [*btc,      *d14], obs: [metric_value] }
    c_3:            { filter: [*c,         *d3], obs: [metric_value] }
    c_7:            { filter: [*c,         *d7], obs: [metric_value] }
    c_14:           { filter: [*c,        *d14], obs: [metric_value] }
    delivery_3:     { filter: [*delivery,  *d3], obs: [metric_value] }
    delivery_7:     { filter: [*delivery,  *d7], obs: [metric_value] }
    delivery_14:    { filter: [*delivery, *d14], obs: [metric_value] }
    order_3:        { filter: [*order,     *d3], obs: [metric_value] }
    order_7:        { filter: [*order,     *d7], obs: [metric_value] }
    order_14:       { filter: [*order,    *d14], obs: [metric_value] }

  
metric.uniq:
    user_btc_3:          {counter: btc_3,       key: [cookie] }
    user_btc_7:          {counter: btc_7,       key: [cookie] }
    user_btc_14:         {counter: btc_14,      key: [cookie] }
    user_c_3:            {counter: c_3,         key: [cookie] }
    user_c_7:            {counter: c_7,         key: [cookie] }
    user_c_14:           {counter: c_14,        key: [cookie] }
    user_delivery_3:     {counter: delivery_3,  key: [cookie] }
    user_delivery_7:     {counter: delivery_7,  key: [cookie] }
    user_delivery_14:    {counter: delivery_14, key: [cookie] }
    user_order_3:        {counter: order_3,     key: [cookie] }
    user_order_7:        {counter: order_7,     key: [cookie] }
    user_order_14:       {counter: order_14,    key: [cookie] }
