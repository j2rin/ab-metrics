metric.counter:
  autoteka_revenue:     {filter: [funnel_stage_id: 4], obs: [amount]}
  autoteka_cnt_reports: {filter: [funnel_stage_id: 4], obs: [reports_count]}
  autoteka_cnt_paypage_loads: {filter: [funnel_stage_id: 3]}
  autoteka_cnt_product_selections: {filter: [funnel_stage_id: 2]}
  autoteka_cnt_previews: {filter: [funnel_stage_id: 1]}
  autoteka_revenue_new_users: {filter: [funnel_stage_id: 4, is_new_user: true], obs: [amount]}
  autoteka_cnt_reports_new_users: {filter: [funnel_stage_id: 4, is_new_user: true], obs: [reports_count]}
  autoteka_cnt_one_report: {filter: [funnel_stage_id: 4, reports_count: 1], obs: [reports_count]}
  autoteka_cnt_big_package: {filter: [funnel_stage_id: 4, reports_count.>=: 20], obs: [reports_count]}
  autoteka_cnt_small_package: {filter: [funnel_stage_id: 4, reports_count.>: 1, reports_count.<: 20], obs: [reports_count]}
  autoteka_cnt_main_page: {filter: [funnel_stage_id: 0]}
  autoteka_cnt_card: { filter: [ funnel_stage_id: 4, payment_method: card ] }
  autoteka_cnt_apple_in_app: { filter: [ funnel_stage_id: 4, payment_method: appleInAppPurchase ] }
  autoteka_cnt_gpay: { filter: [ funnel_stage_id: 4, payment_method: googlePay ] }
  autoteka_cnt_apple_pay: { filter: [ funnel_stage_id: 4, payment_method: applePay ] }
  autoteka_cnt_sms: { filter: [ funnel_stage_id: 4, payment_method: sms ] }
  autoteka_revenue_pro_users: { filter: [ funnel_stage_id: 4,is_pro: true ], obs: [ amount ] }
  autoteka_revenue_nonpro_users: { filter: [ funnel_stage_id: 4,is_pro: false ], obs: [ amount ] }
  autoteka_cnt_reports_pro_users: { filter: [ funnel_stage_id: 4,is_pro: true ], obs: [ reports_count ] }
  autoteka_cnt_reports_nonpro_users: { filter: [ funnel_stage_id: 4,is_pro: false ], obs: [ reports_count ] }

metric.uniq:
  autoteka_unique_report_buyers: {counter: autoteka_cnt_reports, key: [autotekauser_id]}
  autoteka_unique_paypage_visitors: {counter: autoteka_cnt_paypage_loads, key: [autotekauser_id]}
  autoteka_unique_product_selection_visitors: {counter: autoteka_cnt_product_selections, key: [cookie_id]}
  autoteka_unique_preview_visitors: {counter: autoteka_cnt_previews, key: [cookie_id]}
  autoteka_unique_main_page_visitors: { counter: autoteka_cnt_main_page, key: [ additionalcookie_id ] }
  autoteka_one_report_purchase: { counter: autoteka_cnt_one_report, key: [ autotekaorder_id ] }
  autoteka_small_package_purchase: { counter: autoteka_cnt_small_package, key: [ autotekaorder_id ] }
  autoteka_big_package_purchase: { counter: autoteka_cnt_big_package, key: [ autotekaorder_id ] }
  autoteka_one_report_buyer: { counter: autoteka_cnt_one_report, key: [ autotekauser_id ] }
  autoteka_small_package_buyer: { counter: autoteka_cnt_small_package, key: [ autotekauser_id ] }
  autoteka_big_package_buyer: { counter: autoteka_cnt_big_package, key: [ autotekauser_id ] }
  autoteka_payment_card: { counter: autoteka_cnt_card, key: [ autotekaorder_id ] }
  autoteka_payment_apple_in_app: { counter: autoteka_cnt_apple_in_app, key: [ autotekaorder_id ] }
  autoteka_payment_gpay: { counter: autoteka_cnt_gpay, key: [ autotekaorder_id ] }
  autoteka_payment_apple_pay: { counter: autoteka_cnt_apple_pay, key: [ autotekaorder_id ] }
  autoteka_payment_sms: { counter: autoteka_cnt_sms, key: [ autotekaorder_id ] }
  autoteka_unique_report_new_buyers: {counter: autoteka_cnt_reports_new_users, key: [autotekauser_id]}
  autoteka_unique_report_pro_buyers: {counter: autoteka_cnt_reports_pro_users, key: [autotekauser_id]}
  autoteka_unique_report_non_buyers: {counter: autoteka_cnt_reports_nonpro_users, key: [autotekauser_id]}
  
metric.ratio:
  autoteka_report_price: {num: autoteka_revenue, den: autoteka_cnt_reports}
  autoteka_preview_callback_conversion: {num: autoteka_cnt_reports, den: autoteka_cnt_previews}
  autoteka_preview_callback_conversion_unique: {num: autoteka_unique_report_buyers, den: autoteka_unique_preview_visitors}