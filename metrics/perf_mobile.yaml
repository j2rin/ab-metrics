metric.counter:
  cnt_di_events:                           {filter: [{stage_name: DI}], obs: [events], m42: False}
  cnt_di_events_p25:                       {filter: [{stage_name: DI}], obs: [events_p25], m42: False}
  cnt_di_events_p50:                       {filter: [{stage_name: DI}], obs: [events_p50], m42: False}
  cnt_di_events_p75:                       {filter: [{stage_name: DI}], obs: [events_p75], m42: False}
  cnt_di_events_p95:                       {filter: [{stage_name: DI}], obs: [events_p95], m42: False}
  cnt_di_session_duration:                 {filter: [{stage_name: DI}], obs: [session_duration], m42: False}
  cnt_di_session_duration_events:          {filter: [{stage_name: DI}], obs: [session_duration_events], m42: False}
  cnt_draw_appstart_session_duration:      {filter: [{stage_name: Draw_appstart}], obs: [session_duration], m42: False}
  cnt_draw_appstart_session_duration_events: {filter: [{stage_name: Draw_appstart}], obs: [session_duration_events], m42: False}
  cnt_draw_appstart_sessions:              {filter: [{stage_name: Draw_appstart}], obs: [sessions], m42: False}
  cnt_draw_appstart_sessions_p25:          {filter: [{stage_name: Draw_appstart}], obs: [sessions_p25], m42: False}
  cnt_draw_appstart_sessions_p50:          {filter: [{stage_name: Draw_appstart}], obs: [sessions_p50], m42: False}
  cnt_draw_appstart_sessions_p75:          {filter: [{stage_name: Draw_appstart}], obs: [sessions_p75], m42: False}
  cnt_draw_appstart_sessions_p95:          {filter: [{stage_name: Draw_appstart}], obs: [sessions_p95], m42: False}
  cnt_draw_duration:                       {filter: [{stage_name: Draw}], obs: [duration], m42: False}
  cnt_draw_duration_events:                {filter: [{stage_name: Draw}], obs: [duration_events], m42: False}
  cnt_draw_events:                         {filter: [{stage_name: Draw}], obs: [events], m42: False}
  cnt_draw_events_exceptions:              {filter: [{stage_name: Draw}], obs: [events, exceptions], m42: False}
  cnt_draw_events_p25:                     {filter: [{stage_name: Draw}], obs: [events_p25], m42: False}
  cnt_draw_events_p50:                     {filter: [{stage_name: Draw}], obs: [events_p50], m42: False}
  cnt_draw_events_p75:                     {filter: [{stage_name: Draw}], obs: [events_p75], m42: False}
  cnt_draw_events_p95:                     {filter: [{stage_name: Draw}], obs: [events_p95], m42: False}
  cnt_draw_exceptions:                     {filter: [{stage_name: Draw}], obs: [exceptions], m42: False}
  cnt_draw_session_duration:               {filter: [{stage_name: Draw}], obs: [session_duration], m42: False}
  cnt_draw_session_duration_events:        {filter: [{stage_name: Draw}], obs: [session_duration_events], m42: False}
  cnt_draw_sessions:                       {filter: [{stage_name: Draw}], obs: [sessions], m42: False}
  cnt_draw_sessions_p25:                   {filter: [{stage_name: Draw}], obs: [sessions_p25], m42: False}
  cnt_draw_sessions_p50:                   {filter: [{stage_name: Draw}], obs: [sessions_p50], m42: False}
  cnt_draw_sessions_p75:                   {filter: [{stage_name: Draw}], obs: [sessions_p75], m42: False}
  cnt_draw_sessions_p95:                   {filter: [{stage_name: Draw}], obs: [sessions_p95], m42: False}
  cnt_draw_sessions_sla:                   {filter: [{stage_name: Draw}], obs: [sessions_sla], m42: False}
  cnt_init_appstart_session_duration:      {filter: [{stage_name: Init_appstart}], obs: [session_duration], m42: False}
  cnt_init_appstart_session_duration_events: {filter: [{stage_name: Init_appstart}], obs: [session_duration_events], m42: False}
  cnt_init_appstart_sessions:              {filter: [{stage_name: Init_appstart}], obs: [sessions], m42: False}
  cnt_init_appstart_sessions_p25:          {filter: [{stage_name: Init_appstart}], obs: [sessions_p25], m42: False}
  cnt_init_appstart_sessions_p50:          {filter: [{stage_name: Init_appstart}], obs: [sessions_p50], m42: False}
  cnt_init_appstart_sessions_p75:          {filter: [{stage_name: Init_appstart}], obs: [sessions_p75], m42: False}
  cnt_init_appstart_sessions_p95:          {filter: [{stage_name: Init_appstart}], obs: [sessions_p95], m42: False}
  cnt_init_duration:                       {filter: [{stage_name: Init}], obs: [duration], m42: False}
  cnt_init_duration_events:                {filter: [{stage_name: Init}], obs: [duration_events], m42: False}
  cnt_init_events:                         {filter: [{stage_name: Init}], obs: [events], m42: False}
  cnt_init_events_p25:                     {filter: [{stage_name: Init}], obs: [events_p25], m42: False}
  cnt_init_events_p50:                     {filter: [{stage_name: Init}], obs: [events_p50], m42: False}
  cnt_init_events_p75:                     {filter: [{stage_name: Init}], obs: [events_p75], m42: False}
  cnt_init_events_p95:                     {filter: [{stage_name: Init}], obs: [events_p95], m42: False}
  cnt_init_session_duration:               {filter: [{stage_name: Init}], obs: [session_duration], m42: False}
  cnt_init_session_duration_events:        {filter: [{stage_name: Init}], obs: [session_duration_events], m42: False}
  cnt_init_sessions:                       {filter: [{stage_name: Init}], obs: [sessions], m42: False}
  cnt_init_sessions_p25:                   {filter: [{stage_name: Init}], obs: [sessions_p25], m42: False}
  cnt_init_sessions_p50:                   {filter: [{stage_name: Init}], obs: [sessions_p50], m42: False}
  cnt_init_sessions_p75:                   {filter: [{stage_name: Init}], obs: [sessions_p75], m42: False}
  cnt_init_sessions_p95:                   {filter: [{stage_name: Init}], obs: [sessions_p95], m42: False}
  cnt_init_sessions_sla:                   {filter: [{stage_name: Init}], obs: [sessions_sla], m42: False}
  cnt_localloading_duration:               {filter: [{stage_name: LocalLoading}], obs: [duration], m42: False}
  cnt_localloading_duration_events:        {filter: [{stage_name: LocalLoading}], obs: [duration_events], m42: False}
  cnt_localloading_events:                 {filter: [{stage_name: LocalLoading}], obs: [events], m42: False}
  cnt_localloading_events_p25:             {filter: [{stage_name: LocalLoading}], obs: [events_p25], m42: False}
  cnt_localloading_events_p50:             {filter: [{stage_name: LocalLoading}], obs: [events_p50], m42: False}
  cnt_localloading_events_p75:             {filter: [{stage_name: LocalLoading}], obs: [events_p75], m42: False}
  cnt_localloading_events_p95:             {filter: [{stage_name: LocalLoading}], obs: [events_p95], m42: False}
  cnt_localloading_session_duration:       {filter: [{stage_name: LocalLoading}], obs: [session_duration], m42: False}
  cnt_localloading_session_duration_events: {filter: [{stage_name: LocalLoading}], obs: [session_duration_events], m42: False}
  cnt_prepare_duration:                    {filter: [{stage_name: Prepare}], obs: [duration], m42: False}
  cnt_prepare_duration_events:             {filter: [{stage_name: Prepare}], obs: [duration_events], m42: False}
  cnt_prepare_events:                      {filter: [{stage_name: Prepare}], obs: [events], m42: False}
  cnt_prepare_events_exceptions:           {filter: [{stage_name: Prepare}], obs: [events, exceptions], m42: False}
  cnt_prepare_events_p25:                  {filter: [{stage_name: Prepare}], obs: [events_p25], m42: False}
  cnt_prepare_events_p50:                  {filter: [{stage_name: Prepare}], obs: [events_p50], m42: False}
  cnt_prepare_events_p75:                  {filter: [{stage_name: Prepare}], obs: [events_p75], m42: False}
  cnt_prepare_events_p95:                  {filter: [{stage_name: Prepare}], obs: [events_p95], m42: False}
  cnt_prepare_exceptions:                  {filter: [{stage_name: Prepare}], obs: [exceptions], m42: False}
  cnt_prepare_session_duration:            {filter: [{stage_name: Prepare}], obs: [session_duration], m42: False}
  cnt_prepare_session_duration_events:     {filter: [{stage_name: Prepare}], obs: [session_duration_events], m42: False}
  cnt_serverloading_duration:              {filter: [{stage_name: ServerLoading}], obs: [duration], m42: False}
  cnt_serverloading_duration_events:       {filter: [{stage_name: ServerLoading}], obs: [duration_events], m42: False}
  cnt_serverloading_events:                {filter: [{stage_name: ServerLoading}], obs: [events], m42: False}
  cnt_serverloading_events_exceptions:     {filter: [{stage_name: ServerLoading}], obs: [events, exceptions], m42: False}
  cnt_serverloading_events_p25:            {filter: [{stage_name: ServerLoading}], obs: [events_p25], m42: False}
  cnt_serverloading_events_p50:            {filter: [{stage_name: ServerLoading}], obs: [events_p50], m42: False}
  cnt_serverloading_events_p75:            {filter: [{stage_name: ServerLoading}], obs: [events_p75], m42: False}
  cnt_serverloading_events_p95:            {filter: [{stage_name: ServerLoading}], obs: [events_p95], m42: False}
  cnt_serverloading_exceptions:            {filter: [{stage_name: ServerLoading}], obs: [exceptions], m42: False}
  cnt_serverloading_session_duration:      {filter: [{stage_name: ServerLoading}], obs: [session_duration], m42: False}
  cnt_serverloading_session_duration_events: {filter: [{stage_name: ServerLoading}], obs: [session_duration_events], m42: False}

  any_exceptions:                           {obs: [exceptions], m42: True}
  any_core_exceptions:                      {filter: [{is_core_content: true}], obs: [exceptions], m42: True}
  netwok_exceptions:                        {filter: [{stage_name: ServerLoading}], obs: [network_exceptions], m42: True}
  api_exceptions:                           {filter: [{stage_name: ServerLoading}], obs: [api_exceptions], m42: True}
  silent_exceptions:                        {filter: [{stage_name: ServerLoading}], obs: [silent_exceptions], m42: True}

  draw_core_exceptions:                     {filter: [{stage_name: Draw, is_core_content: true}], obs: [exceptions], m42: True}
  prepare_core_exceptions:                  {filter: [{stage_name: Prepare, is_core_content: true}], obs: [exceptions], m42: True}
  serverloading_core_exceptions:            {filter: [{stage_name: ServerLoading, is_core_content: true}], obs: [exceptions], m42: True}



metric.uniq:
  user_draw_exceptions:                    {counter: cnt_draw_exceptions, key: [cookie_id], m42: True}
  user_prepare_exceptions:                 {counter: cnt_prepare_exceptions, key: [cookie_id], m42: True}
  user_serverloading_exceptions:           {counter: cnt_serverloading_exceptions, key: [cookie_id], m42: True}

  user_draw_core_exceptions:               {counter: draw_core_exceptions, key: [cookie_id], m42: True}
  user_prepare_core_exceptions:            {counter: api_exceptions, key: [cookie_id], m42: True}
  user_serverloading_core_exceptions:      {counter: silent_exceptions, key: [cookie_id], m42: True}

  user_netwok_exceptions:                  {counter: netwok_exceptions, key: [cookie_id], m42: True}
  user_api_exceptions:                     {counter: api_exceptions, key: [cookie_id], m42: True}
  user_silent_exceptions:                  {counter: silent_exceptions, key: [cookie_id], m42: True}

  user_exceptions:                         {counter: any_exceptions, key: [cookie_id], m42: True}
  user_core_exceptions:                    {counter: any_core_exceptions, key: [cookie_id], m42: True}


metric.ratio:
  bounce_rate_perf:                        {num: cnt_draw_events,                 den: cnt_init_events}
  di_percent_p25:                          {num: cnt_di_events_p25,               den: cnt_di_events}
  di_percent_p50:                          {num: cnt_di_events_p50,               den: cnt_di_events}
  di_percent_p75:                          {num: cnt_di_events_p75,               den: cnt_di_events}
  di_percent_p95:                          {num: cnt_di_events_p95,               den: cnt_di_events}
  di_session_duration:                     {num: cnt_di_session_duration,         den: cnt_di_session_duration_events}
  draw_appstart_session_duration:          {num: cnt_draw_appstart_session_duration, den: cnt_draw_appstart_session_duration_events}
  draw_appstart_session_percent_p25:       {num: cnt_draw_appstart_sessions_p25,  den: cnt_draw_appstart_sessions}
  draw_appstart_session_percent_p50:       {num: cnt_draw_appstart_sessions_p50,  den: cnt_draw_appstart_sessions}
  draw_appstart_session_percent_p75:       {num: cnt_draw_appstart_sessions_p75,  den: cnt_draw_appstart_sessions}
  draw_appstart_session_percent_p95:       {num: cnt_draw_appstart_sessions_p95,  den: cnt_draw_appstart_sessions}
  draw_duration:                           {num: cnt_draw_duration,               den: cnt_draw_duration_events}
  draw_percent_exceptions:                 {num: cnt_draw_exceptions,             den: cnt_draw_events_exceptions}
  draw_percent_p25:                        {num: cnt_draw_events_p25,             den: cnt_draw_events}
  draw_percent_p50:                        {num: cnt_draw_events_p50,             den: cnt_draw_events}
  draw_percent_p75:                        {num: cnt_draw_events_p75,             den: cnt_draw_events}
  draw_percent_p95:                        {num: cnt_draw_events_p95,             den: cnt_draw_events}
  draw_session_duration:                   {num: cnt_draw_session_duration,       den: cnt_draw_session_duration_events}
  draw_session_percent_p25:                {num: cnt_draw_sessions_p25,           den: cnt_draw_sessions}
  draw_session_percent_p50:                {num: cnt_draw_sessions_p50,           den: cnt_draw_sessions}
  draw_session_percent_p75:                {num: cnt_draw_sessions_p75,           den: cnt_draw_sessions}
  draw_session_percent_p95:                {num: cnt_draw_sessions_p95,           den: cnt_draw_sessions}
  draw_session_percent_sla:                {num: cnt_draw_sessions_sla,           den: cnt_draw_sessions}
  init_appstart_session_duration:          {num: cnt_init_appstart_session_duration, den: cnt_init_appstart_session_duration_events}
  init_appstart_session_percent_p25:       {num: cnt_init_appstart_sessions_p25,  den: cnt_init_appstart_sessions}
  init_appstart_session_percent_p50:       {num: cnt_init_appstart_sessions_p50,  den: cnt_init_appstart_sessions}
  init_appstart_session_percent_p75:       {num: cnt_init_appstart_sessions_p75,  den: cnt_init_appstart_sessions}
  init_appstart_session_percent_p95:       {num: cnt_init_appstart_sessions_p95,  den: cnt_init_appstart_sessions}
  init_duration:                           {num: cnt_init_duration,               den: cnt_init_duration_events}
  init_percent_p25:                        {num: cnt_init_events_p25,             den: cnt_init_events}
  init_percent_p50:                        {num: cnt_init_events_p50,             den: cnt_init_events}
  init_percent_p75:                        {num: cnt_init_events_p75,             den: cnt_init_events}
  init_percent_p95:                        {num: cnt_init_events_p95,             den: cnt_init_events}
  init_session_duration:                   {num: cnt_init_session_duration,       den: cnt_init_session_duration_events}
  init_session_percent_p25:                {num: cnt_init_sessions_p25,           den: cnt_init_sessions}
  init_session_percent_p50:                {num: cnt_init_sessions_p50,           den: cnt_init_sessions}
  init_session_percent_p75:                {num: cnt_init_sessions_p75,           den: cnt_init_sessions}
  init_session_percent_p95:                {num: cnt_init_sessions_p95,           den: cnt_init_sessions}
  init_session_percent_sla:                {num: cnt_init_sessions_sla,           den: cnt_init_sessions}
  localloading_duration:                   {num: cnt_localloading_duration,       den: cnt_localloading_duration_events}
  localloading_percent_p25:                {num: cnt_localloading_events_p25,     den: cnt_localloading_events}
  localloading_percent_p50:                {num: cnt_localloading_events_p50,     den: cnt_localloading_events}
  localloading_percent_p75:                {num: cnt_localloading_events_p75,     den: cnt_localloading_events}
  localloading_percent_p95:                {num: cnt_localloading_events_p95,     den: cnt_localloading_events}
  localloading_session_duration:           {num: cnt_localloading_session_duration, den: cnt_localloading_session_duration_events}
  prepare_duration:                        {num: cnt_prepare_duration,            den: cnt_prepare_duration_events}
  prepare_percent_exceptions:              {num: cnt_prepare_exceptions,          den: cnt_prepare_events_exceptions}
  prepare_percent_p25:                     {num: cnt_prepare_events_p25,          den: cnt_prepare_events}
  prepare_percent_p50:                     {num: cnt_prepare_events_p50,          den: cnt_prepare_events}
  prepare_percent_p75:                     {num: cnt_prepare_events_p75,          den: cnt_prepare_events}
  prepare_percent_p95:                     {num: cnt_prepare_events_p95,          den: cnt_prepare_events}
  prepare_session_duration:                {num: cnt_prepare_session_duration,    den: cnt_prepare_session_duration_events}
  serverloading_duration:                  {num: cnt_serverloading_duration,      den: cnt_serverloading_duration_events}
  serverloading_percent_exceptions:        {num: cnt_serverloading_exceptions,    den: cnt_serverloading_events_exceptions}
  serverloading_percent_p25:               {num: cnt_serverloading_events_p25,    den: cnt_serverloading_events}
  serverloading_percent_p50:               {num: cnt_serverloading_events_p50,    den: cnt_serverloading_events}
  serverloading_percent_p75:               {num: cnt_serverloading_events_p75,    den: cnt_serverloading_events}
  serverloading_percent_p95:               {num: cnt_serverloading_events_p95,    den: cnt_serverloading_events}
  serverloading_session_duration:          {num: cnt_serverloading_session_duration, den: cnt_serverloading_session_duration_events}
