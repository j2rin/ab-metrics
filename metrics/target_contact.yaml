definitions:
   - &is_trash                                         {type: trash}
   - &is_preliminary                                   {type: preliminary}
   - &is_messenger                                     {contact_type: messenger}
        
metric.counter:
  target_contact_all:                                   {filter: [{is_target: True}]}
  trash_contact:                                        {filter: [*is_trash]}
  preliminary_contact:                                  {filter: [*preliminary]}
  trash_contact_chat:                                   {filter: [*is_trash, *is_messenger]}

    

metric.uniq: 
  target_buyers_any:                                     {counter: target_contact_all,     key: [cookie]}
  user_target_contact:                                   {counter: target_contact_all,     key: [user]}
  target_contact_canonical:                              {counter: target_contact_all,      key: [logcat_item]}
  target_buyers_canonical:                               {counter: target_contact_all,      key: [cookie_logcat]}