definitions:
  - &is_marketplace                               {workflow: 'marketplace'}
  - &is_b2c                                       {workflow: 'delivery-b2c'}
  - &is_c2c_pvz                                   {workflow: 'delivery-c2c'}
  - &is_c2c_courier                               {workflow: 'delivery-c2c-courier'}

metric.counter:
  mp_orders_created:                           {filter: [*is_marketplace]}
  mp_orders_paid:                              {filter: [*is_marketplace,                {is_paid: True}]}
  b2c_orders_created:                          {filter: [*is_b2c]}
  b2c_orders_paid:                             {filter: [*is_b2c,                        {is_paid: True}]}
  c2c_orders_created:                          {filter: [*is_c2c_pvz]}
  c2c_orders_paid:                             {filter: [*is_c2c_pvz,                    {is_paid: True}]}
  c2c_orders_in_transit:                       {filter: [*is_c2c_pvz,                    {in_transit: True}]}
  c2c_orders_recieved:                         {filter: [*is_c2c_pvz,                    {is_recieved: True}]}
  c2c_orders_accepted:                         {filter: [*is_c2c_pvz,                    {is_accepted: True}]}
  courier_orders_created:                      {filter: [*is_c2c_courier]}
  courier_orders_paid:                         {filter: [*is_c2c_courier,                {is_paid: True}]}
  courier_orders_in_transit:                   {filter: [*is_c2c_courier,                {in_transit: True}]}
  courier_orders_recieved:                     {filter: [*is_c2c_courier,                {is_recieved: True}]}
  courier_orders_accepted:                     {filter: [*is_c2c_courier,                {is_accepted: True}]}


metric.uniq:
  mp_shipments_created:                           {counter: mp_orders_created,           key: [purchase_id]}
  mp_shipments_paid:                              {counter: mp_orders_paid,              key: [purchase_id]}
  b2c_shipments_created:                          {counter: b2c_orders_created,          key: [purchase_id]}
  b2c_shipments_paid:                             {counter: b2c_orders_paid,             key: [purchase_id]}
