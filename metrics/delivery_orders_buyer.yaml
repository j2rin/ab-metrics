metric.counter:
  buyer_delivery_gmv_created:          {filter: [{is_created: true}], obs: [item_price]}
  buyer_delivery_gmv_paid:             {filter: [{is_paid: true}], obs: [item_price]}
  buyer_delivery_gmv_confirmed:        {filter: [{is_confirmed: true}], obs: [item_price]}
  buyer_delivery_gmv_paid_video:             {filter: [{is_paid: true}, {has_short_video: true}], obs: [item_price]}
  buyer_delivery_gmv_confirmed_video:        {filter: [{is_confirmed: true}, {has_short_video: true}], obs: [item_price]}
  buyer_delivery_gmv_paid_no_video:             {filter: [{is_paid: true}, {has_short_video: false}], obs: [item_price]}
  buyer_delivery_gmv_confirmed_no_video:        {filter: [{is_confirmed: true}, {has_short_video: false}], obs: [item_price]}
  buyer_delivery_gmv_performed:        {filter: [{is_performed: true}], obs: [item_price]}
  buyer_delivery_gmv_provided:         {filter: [{is_provided: true}], obs: [item_price]}
  buyer_delivery_gmv_received:         {filter: [{is_received: true}], obs: [item_price]}
  buyer_delivery_gmv_accepted:         {filter: [{is_accepted: true}], obs: [item_price]}
  buyer_delivery_gmv_canceled:         {filter: [{is_canceled: true}], obs: [item_price]}
  buyer_delivery_gmv_voided:           {filter: [{is_voided: true}], obs: [item_price]}
  buyer_delivery_gmv_unperformed:      {filter: [{is_unperformed: true}], obs: [item_price]}
  buyer_delivery_gmv_return_performed: {filter: [{is_return_performed: true}], obs: [item_price]}
  buyer_delivery_gmv_return_delivered: {filter: [{is_return_delivered: true}], obs: [item_price]}
  buyer_delivery_gmv_returned:         {filter: [{is_returned: true}], obs: [item_price]}
  buyer_delivery_gmv_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [item_price]}

  buyer_delivery_items_created:          {filter: [{is_created: true}]}
  buyer_delivery_items_created_video:    {filter: [{is_created: true}, {has_short_video: true}]}
  buyer_delivery_items_created_no_video: {filter: [{is_created: true}, {has_short_video: false}]}
  buyer_delivery_items_paid:             {filter: [{is_paid: true}]}
  buyer_delivery_items_paid_video:       {filter: [{is_paid: true}, {has_short_video: true}]}
  buyer_delivery_items_paid_no_video:    {filter: [{is_paid: true}, {has_short_video: false}]}
  buyer_delivery_items_confirmed:        {filter: [{is_confirmed: true}]}
  buyer_delivery_items_confirmed_video:  {filter: [{is_confirmed: true}, {has_short_video: true}]}
  buyer_delivery_items_confirmed_no_video: {filter: [{is_confirmed: true}, {has_short_video: false}]}
  buyer_delivery_items_performed:        {filter: [{is_performed: true}]}
  buyer_delivery_items_provided:         {filter: [{is_provided: true}]}
  buyer_delivery_items_received:         {filter: [{is_received: true}]}
  buyer_delivery_items_accepted:         {filter: [{is_accepted: true}]}
  buyer_delivery_items_canceled:         {filter: [{is_canceled: true}]}
  buyer_delivery_items_voided:           {filter: [{is_voided: true}]}
  buyer_delivery_items_unperformed:      {filter: [{is_unperformed: true}]}
  buyer_delivery_items_return_performed: {filter: [{is_return_performed: true}]}
  buyer_delivery_items_return_delivered: {filter: [{is_return_delivered: true}]}
  buyer_delivery_items_returned:         {filter: [{is_returned: true}]}
  buyer_delivery_items_unconfirmed:      {filter: [{is_unconfirmed: true}]}

  buyer_delivery_items_delivery_discount_created:                     {filter: [{is_created: true}, {is_delivery_discount: true}]}
  buyer_delivery_items_delivery_discount_paid:                        {filter: [{is_paid: true}, {is_delivery_discount: true}]}
  buyer_delivery_items_delivery_discount_accepted:                    {filter: [{is_accepted: true}, {is_delivery_discount: true}]}
  buyer_delivery_items_delivery_discount_returned:                    {filter: [{is_returned: true}, {is_delivery_discount: true}]}
  buyer_delivery_items_delivery_discount_accepted_and_returned:       {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_delivery_discount: true}]}

  buyer_delivery_items_delivery_subsidies_created:                    {filter: [{is_created: true}, {total_subsidies.>: 0}]}
  buyer_delivery_items_delivery_subsidies_paid:                       {filter: [{is_paid: true}, {total_subsidies.>: 0}]}
  buyer_delivery_items_delivery_subsidies_accepted:                   {filter: [{is_accepted: true}, {total_subsidies.>: 0}]}
  buyer_delivery_items_delivery_subsidies_returned:                   {filter: [{is_returned: true}, {total_subsidies.>: 0}]}
  buyer_delivery_items_delivery_subsidies_accepted_and_returned:      {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {total_subsidies.>: 0}]}

  buyer_delivery_items_threefirst_discount_created:                   {filter: [{is_created: true}, {is_threefirst_discount: true}]}
  buyer_delivery_items_threefirst_discount_paid:                      {filter: [{is_paid: true}, {is_threefirst_discount: true}]}
  buyer_delivery_items_threefirst_discount_accepted:                  {filter: [{is_accepted: true}, {is_threefirst_discount: true}]}
  buyer_delivery_items_threefirst_discount_returned:                  {filter: [{is_returned: true}, {is_threefirst_discount: true}]}
  buyer_delivery_items_threefirst_discount_accepted_and_returned:     {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_threefirst_discount: true}]}

  buyer_delivery_items_threefirst_subsidies_created:                  { filter: [ { is_created: true }, {threefirst_subsidies.>: 0} ] }
  buyer_delivery_items_threefirst_subsidies_paid:                     { filter: [ { is_paid: true }, {threefirst_subsidies.>: 0} ] }
  buyer_delivery_items_threefirst_subsidies_accepted:                 { filter: [ { is_accepted: true }, {threefirst_subsidies.>: 0} ] }
  buyer_delivery_items_threefirst_subsidies_returned:                 { filter: [ { is_returned: true }, {threefirst_subsidies.>: 0} ] }
  buyer_delivery_items_threefirst_subsidies_accepted_and_returned:    { filter: [ { $or: [ { is_returned: true }, { is_accepted: true } ] }, {threefirst_subsidies.>: 0} ] }

  buyer_delivery_items_bonus_discount_created:                        {filter: [{is_created: true}, {is_bonus_discount: true}]}
  buyer_delivery_items_bonus_discount_paid:                           {filter: [{is_paid: true}, {is_bonus_discount: true}]}
  buyer_delivery_items_bonus_discount_accepted:                       {filter: [{is_accepted: true}, {is_bonus_discount: true}]}
  buyer_delivery_items_bonus_discount_returned:                       {filter: [{is_returned: true}, {is_bonus_discount: true}]}
  buyer_delivery_items_bonus_discount_accepted_and_returned:          {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_bonus_discount: true}]}

  buyer_delivery_items_bonus_subsidies_created:                        { filter: [ { is_created: true }, {bonus_subsidies.>: 0} ] }
  buyer_delivery_items_bonus_subsidies_paid:                           { filter: [ { is_paid: true }, {bonus_subsidies.>: 0} ] }
  buyer_delivery_items_bonus_subsidies_accepted:                       { filter: [ { is_accepted: true }, {bonus_subsidies.>: 0} ] }
  buyer_delivery_items_bonus_subsidies_returned:                       { filter: [ { is_returned: true }, {bonus_subsidies.>: 0} ] }
  buyer_delivery_items_bonus_subsidies_accepted_and_returned:          { filter: [ { $or: [ { is_returned: true }, { is_accepted: true } ] }, {bonus_subsidies.>: 0} ] }

  buyer_delivery_items_bonus_cashback_created:                        {filter: [{is_created: true}, {is_bonus_cashback: true}]}
  buyer_delivery_items_bonus_cashback_paid:                           {filter: [{is_paid: true}, {is_bonus_cashback: true}]}
  buyer_delivery_items_bonus_cashback_accepted:                       {filter: [{is_accepted: true}, {is_bonus_cashback: true}]}
  buyer_delivery_items_bonus_cashback_returned:                       {filter: [{is_returned: true}, {is_bonus_cashback: true}]}
  buyer_delivery_items_bonus_cashback_accepted_and_returned:          {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_bonus_cashback: true}]}

  buyer_delivery_items_promocode_discount_created:                    {filter: [{is_created: true}, {is_promocode_discount: true}]}
  buyer_delivery_items_promocode_discount_paid:                       {filter: [{is_paid: true}, {is_promocode_discount: true}]}
  buyer_delivery_items_promocode_discount_accepted:                   {filter: [{is_accepted: true}, {is_promocode_discount: true}]}
  buyer_delivery_items_promocode_discount_returned:                   {filter: [{is_returned: true}, {is_promocode_discount: true}]}
  buyer_delivery_items_promocode_discount_accepted_and_returned:      {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_promocode_discount: true}]}

  buyer_delivery_items_promocode_subsidies_created:                    { filter: [ { is_created: true }, {promocode_subsidies.>: 0} ] }
  buyer_delivery_items_promocode_subsidies_paid:                       { filter: [ { is_paid: true }, {promocode_subsidies.>: 0} ] }
  buyer_delivery_items_promocode_subsidies_accepted:                   { filter: [ { is_accepted: true }, {promocode_subsidies.>: 0} ] }
  buyer_delivery_items_promocode_subsidies_returned:                   { filter: [ { is_returned: true }, {promocode_subsidies.>: 0} ] }
  buyer_delivery_items_promocode_subsidies_accepted_and_returned:      { filter: [ { $or: [ { is_returned: true }, { is_accepted: true } ] }, {promocode_subsidies.>: 0} ] }

  buyer_delivery_items_c2c_seller_discount_created:                   {filter: [{is_created: true}, {is_c2c_seller_discount: true}]}
  buyer_delivery_items_c2c_seller_discount_paid:                      {filter: [{is_paid: true}, {is_c2c_seller_discount: true}]}
  buyer_delivery_items_c2c_seller_discount_accepted:                  {filter: [{is_accepted: true}, {is_c2c_seller_discount: true}]}
  buyer_delivery_items_c2c_seller_discount_returned:                  {filter: [{is_returned: true}, {is_c2c_seller_discount: true}]}
  buyer_delivery_items_c2c_seller_discount_accepted_and_returned:     {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_c2c_seller_discount: true}]}

  buyer_delivery_items_exmail_discount_created:                       {filter: [{is_created: true}, {is_exmail_discount: true}]}
  buyer_delivery_items_exmail_discount_paid:                          {filter: [{is_paid: true}, {is_exmail_discount: true}]}
  buyer_delivery_items_exmail_discount_accepted:                      {filter: [{is_accepted: true}, {is_exmail_discount: true}]}
  buyer_delivery_items_exmail_discount_returned:                      {filter: [{is_returned: true}, {is_exmail_discount: true}]}
  buyer_delivery_items_exmail_discount_accepted_and_returned:         {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}, {is_exmail_discount: true}]}

  buyer_delivery_items_exmail_subsidies_created:                      {filter: [ { is_created: true }, {exmail_subsidies.>: 0} ] }
  buyer_delivery_items_exmail_subsidies_paid:                         {filter: [ { is_paid: true }, {exmail_subsidies.>: 0} ] }
  buyer_delivery_items_exmail_subsidies_accepted:                     {filter: [ { is_accepted: true }, {exmail_subsidies.>: 0} ] }
  buyer_delivery_items_exmail_subsidies_returned:                     {filter: [ { is_returned: true }, {exmail_subsidies.>: 0} ] }
  buyer_delivery_items_exmail_subsidies_accepted_and_returned:        {filter: [ { $or: [ { is_returned: true }, { is_accepted: true } ] }, {exmail_subsidies.>: 0} ] }

  buyer_delivery_subsidies_created:                         {filter: [{is_created: true}], obs: [total_subsidies]}
  buyer_delivery_subsidies_paid:                            {filter: [{is_paid: true}], obs: [total_subsidies]}
  buyer_delivery_subsidies_accepted:                        {filter: [{is_accepted: true}], obs: [total_subsidies]}
  buyer_delivery_subsidies_returned:                        {filter: [{is_returned: true}], obs: [total_subsidies]}
  buyer_delivery_subsidies_accepted_and_returned:           {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_subsidies]}

  buyer_threefirst_subsidies_created:                       {filter: [{is_created: true}], obs: [threefirst_subsidies]}
  buyer_threefirst_subsidies_paid:                          {filter: [{is_paid: true}], obs: [threefirst_subsidies]}
  buyer_threefirst_subsidies_accepted:                      {filter: [{is_accepted: true}], obs: [threefirst_subsidies]}
  buyer_threefirst_subsidies_returned:                      {filter: [{is_returned: true}], obs: [threefirst_subsidies]}
  buyer_threefirst_subsidies_accepted_and_returned:         {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [threefirst_subsidies]}

  buyer_total_threefirst_subsidies_created:                 {filter: [{is_created: true}], obs: [total_threefirst_subsidies]}
  buyer_total_threefirst_subsidies_paid:                    {filter: [{is_paid: true}], obs: [total_threefirst_subsidies]}
  buyer_total_threefirst_subsidies_accepted:                {filter: [{is_accepted: true}], obs: [total_threefirst_subsidies]}
  buyer_total_threefirst_subsidies_returned:                {filter: [{is_returned: true}], obs: [total_threefirst_subsidies]}
  buyer_total_threefirst_subsidies_accepted_and_returned:   {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_threefirst_subsidies]}

  buyer_bonus_subsidies_created:                            {filter: [{is_created: true}], obs: [bonus_subsidies]}
  buyer_bonus_subsidies_paid:                               {filter: [{is_paid: true}], obs: [bonus_subsidies]}
  buyer_bonus_subsidies_accepted:                           {filter: [{is_accepted: true}], obs: [bonus_subsidies]}
  buyer_bonus_subsidies_returned:                           {filter: [{is_returned: true}], obs: [bonus_subsidies]}
  buyer_bonus_subsidies_accepted_and_returned:              {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [bonus_subsidies]}

  buyer_promocode_subsidies_wo_tax_created:                 {filter: [{is_created: true}], obs: [promocode_subsidies_wo_tax]}
  buyer_promocode_subsidies_wo_tax_paid:                    {filter: [{is_paid: true}], obs: [promocode_subsidies_wo_tax]}
  buyer_promocode_subsidies_wo_tax_accepted:                {filter: [{is_accepted: true}], obs: [promocode_subsidies_wo_tax]}
  buyer_promocode_subsidies_wo_tax_returned:                {filter: [{is_returned: true}], obs: [promocode_subsidies_wo_tax]}
  buyer_promocode_subsidies_wo_tax_accepted_and_returned:   {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [promocode_subsidies_wo_tax]}

  buyer_total_promocode_subsidies_wo_tax_created:                 {filter: [{is_created: true}], obs: [total_promocode_subsidies_wo_tax]}
  buyer_total_promocode_subsidies_wo_tax_paid:                    {filter: [{is_paid: true}], obs: [total_promocode_subsidies_wo_tax]}
  buyer_total_promocode_subsidies_wo_tax_accepted:                {filter: [{is_accepted: true}], obs: [total_promocode_subsidies_wo_tax]}
  buyer_total_promocode_subsidies_wo_tax_returned:                {filter: [{is_returned: true}], obs: [total_promocode_subsidies_wo_tax]}
  buyer_total_promocode_subsidies_wo_tax_accepted_and_returned:   {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_promocode_subsidies_wo_tax]}

  buyer_promocode_subsidies_created:                        {filter: [{is_created: true}], obs: [promocode_subsidies]}
  buyer_promocode_subsidies_paid:                           {filter: [{is_paid: true}], obs: [promocode_subsidies]}
  buyer_promocode_subsidies_accepted:                       {filter: [{is_accepted: true}], obs: [promocode_subsidies]}
  buyer_promocode_subsidies_returned:                       {filter: [{is_returned: true}], obs: [promocode_subsidies]}
  buyer_promocode_subsidies_accepted_and_returned:          {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [promocode_subsidies]}

  buyer_total_promocode_subsidies_created:                  {filter: [{is_created: true}], obs: [total_promocode_subsidies]}
  buyer_total_promocode_subsidies_paid:                     {filter: [{is_paid: true}], obs: [total_promocode_subsidies]}
  buyer_total_promocode_subsidies_accepted:                 {filter: [{is_accepted: true}], obs: [total_promocode_subsidies]}
  buyer_total_promocode_subsidies_returned:                 {filter: [{is_returned: true}], obs: [total_promocode_subsidies]}
  buyer_total_promocode_subsidies_accepted_and_returned:    {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_promocode_subsidies]}

  buyer_exmail_subsidies_created:                           {filter: [{is_created: true}], obs: [exmail_subsidies]}
  buyer_exmail_subsidies_paid:                              {filter: [{is_paid: true}], obs: [exmail_subsidies]}
  buyer_exmail_subsidies_accepted:                          {filter: [{is_accepted: true}], obs: [exmail_subsidies]}
  buyer_exmail_subsidies_returned:                          {filter: [{is_returned: true}], obs: [exmail_subsidies]}
  buyer_exmail_subsidies_accepted_and_returned:             {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [exmail_subsidies]}

  buyer_total_exmail_subsidies_created:                     {filter: [{is_created: true}], obs: [total_exmail_subsidies]}
  buyer_total_exmail_subsidies_paid:                        {filter: [{is_paid: true}], obs: [total_exmail_subsidies]}
  buyer_total_exmail_subsidies_accepted:                    {filter: [{is_accepted: true}], obs: [total_exmail_subsidies]}
  buyer_total_exmail_subsidies_returned:                    {filter: [{is_returned: true}], obs: [total_exmail_subsidies]}
  buyer_total_exmail_subsidies_accepted_and_returned:       {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_exmail_subsidies]}

  buyer_threefirst_subsidies_saved_created:                 {filter: [{is_created: true}], obs: [threefirst_subsidies_saved]}
  buyer_threefirst_subsidies_saved_paid:                    {filter: [{is_paid: true}], obs: [threefirst_subsidies_saved]}
  buyer_threefirst_subsidies_saved_accepted:                {filter: [{is_accepted: true}], obs: [threefirst_subsidies_saved]}
  buyer_threefirst_subsidies_saved_returned:                {filter: [{is_returned: true}], obs: [threefirst_subsidies_saved]}
  buyer_threefirst_subsidies_saved_accepted_and_returned:   {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [threefirst_subsidies_saved]}

  buyer_exmail_subsidies_saved_created:                     {filter: [{is_created: true}], obs: [exmail_subsidies_saved]}
  buyer_exmail_subsidies_saved_paid:                        {filter: [{is_paid: true}], obs: [exmail_subsidies_saved]}
  buyer_exmail_subsidies_saved_accepted:                    {filter: [{is_accepted: true}], obs: [exmail_subsidies_saved]}
  buyer_exmail_subsidies_saved_returned:                    {filter: [{is_returned: true}], obs: [exmail_subsidies_saved]}
  buyer_exmail_subsidies_saved_accepted_and_returned:       {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [exmail_subsidies_saved]}

  buyer_promocode_subsidies_saved_created:                  {filter: [{is_created: true}], obs: [promocode_subsidies_saved]}
  buyer_promocode_subsidies_saved_paid:                     {filter: [{is_paid: true}], obs: [promocode_subsidies_saved]}
  buyer_promocode_subsidies_saved_accepted:                 {filter: [{is_accepted: true}], obs: [promocode_subsidies_saved]}
  buyer_promocode_subsidies_saved_returned:                 {filter: [{is_returned: true}], obs: [promocode_subsidies_saved]}
  buyer_promocode_subsidies_saved_accepted_and_returned:    {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [promocode_subsidies_saved]}

  buyer_delivery_subsidies_saved_created:                   {filter: [{is_created: true}], obs: [threefirst_subsidies_saved, exmail_subsidies_saved, promocode_subsidies_saved]}
  buyer_delivery_subsidies_saved_paid:                      {filter: [{is_paid: true}], obs: [threefirst_subsidies_saved, exmail_subsidies_saved, promocode_subsidies_saved]}
  buyer_delivery_subsidies_saved_accepted:                  {filter: [{is_accepted: true}], obs: [threefirst_subsidies_saved, exmail_subsidies_saved, promocode_subsidies_saved]}
  buyer_delivery_subsidies_saved_returned:                  {filter: [{is_returned: true}], obs: [threefirst_subsidies_saved, exmail_subsidies_saved, promocode_subsidies_saved]}
  buyer_delivery_subsidies_saved_accepted_and_returned:     {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [threefirst_subsidies_saved, exmail_subsidies_saved, promocode_subsidies_saved]}

  buyer_delivery_subsidies_saving_available_created:                   {filter: [{is_created: true}], obs: [total_threefirst_subsidies, total_exmail_subsidies, total_promocode_subsidies_wo_tax]}
  buyer_delivery_subsidies_saving_available_paid:                      {filter: [{is_paid: true}], obs: [total_threefirst_subsidies, total_exmail_subsidies, total_promocode_subsidies_wo_tax]}
  buyer_delivery_subsidies_saving_available_accepted:                  {filter: [{is_accepted: true}], obs: [total_threefirst_subsidies, total_exmail_subsidies, total_promocode_subsidies_wo_tax]}
  buyer_delivery_subsidies_saving_available_returned:                  {filter: [{is_returned: true}], obs: [total_threefirst_subsidies, total_exmail_subsidies, total_promocode_subsidies_wo_tax]}
  buyer_delivery_subsidies_saving_available_accepted_and_returned:     {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [total_threefirst_subsidies, total_exmail_subsidies, total_promocode_subsidies_wo_tax]}

  buyer_bonus_cashback_created:                             {filter: [{is_created: true}], obs: [bonus_cashback]}
  buyer_bonus_cashback_paid:                                {filter: [{is_paid: true}], obs: [bonus_cashback]}
  buyer_bonus_cashback_accepted:                            {filter: [{is_accepted: true}], obs: [bonus_cashback]}
  buyer_bonus_cashback_returned:                            {filter: [{is_returned: true}], obs: [bonus_cashback]}
  buyer_bonus_cashback_accepted_and_returned:               {filter: [{$or: [{is_returned: true}, {is_accepted: true}]}], obs: [bonus_cashback]}

  buyer_delivery_total_revenue_no_vat_paid:                      {filter: [{is_paid: true}], obs: [delivery_revenue_no_vat, trx_commission_no_vat, seller_commission_no_vat]}
  buyer_delivery_total_revenue_no_vat_performed:                 {filter: [{is_performed: true}], obs: [delivery_revenue_no_vat, trx_commission_no_vat, seller_commission_no_vat]}
  buyer_delivery_total_revenue_no_vat_accepted:                  {filter: [{is_accepted: true}], obs: [delivery_revenue_no_vat, trx_commission_no_vat, seller_commission_no_vat]}
  
  buyer_delivery_revenue_no_vat_created:          {filter: [{is_created: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_paid:             {filter: [{is_paid: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_paid_video:             {filter: [{is_paid: true}, {has_short_video: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_paid_no_video:             {filter: [{is_paid: true}, {has_short_video: false}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_confirmed:        {filter: [{is_confirmed: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_confirmed_video:        {filter: [{is_confirmed: true, has_short_video: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_confirmed_no_video:        {filter: [{is_confirmed: true, has_short_video: false}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_performed:        {filter: [{is_performed: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_provided:         {filter: [{is_provided: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_received:         {filter: [{is_received: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_accepted:         {filter: [{is_accepted: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_canceled:         {filter: [{is_canceled: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_voided:           {filter: [{is_voided: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_unperformed:      {filter: [{is_unperformed: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_return_performed: {filter: [{is_return_performed: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_return_delivered: {filter: [{is_return_delivered: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_returned:         {filter: [{is_returned: true}], obs: [delivery_revenue_no_vat]}
  buyer_delivery_revenue_no_vat_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [delivery_revenue_no_vat]}

  buyer_delivery_safedeal_comission_no_vat_created:          {filter: [{is_created: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_paid:             {filter: [{is_paid: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_confirmed:        {filter: [{is_confirmed: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_performed:        {filter: [{is_performed: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_provided:         {filter: [{is_provided: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_received:         {filter: [{is_received: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_accepted:         {filter: [{is_accepted: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_canceled:         {filter: [{is_canceled: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_voided:           {filter: [{is_voided: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_unperformed:      {filter: [{is_unperformed: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_return_performed: {filter: [{is_return_performed: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_return_delivered: {filter: [{is_return_delivered: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_returned:         {filter: [{is_returned: true}], obs: [safedeal_comission_no_vat]}
  buyer_delivery_safedeal_comission_no_vat_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [safedeal_comission_no_vat]}

  buyer_delivery_delivery_comission_no_vat_created:          {filter: [{is_created: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_paid:             {filter: [{is_paid: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_confirmed:        {filter: [{is_confirmed: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_performed:        {filter: [{is_performed: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_provided:         {filter: [{is_provided: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_received:         {filter: [{is_received: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_accepted:         {filter: [{is_accepted: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_canceled:         {filter: [{is_canceled: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_voided:           {filter: [{is_voided: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_unperformed:      {filter: [{is_unperformed: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_return_performed: {filter: [{is_return_performed: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_return_delivered: {filter: [{is_return_delivered: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_returned:         {filter: [{is_returned: true}], obs: [delivery_comission_no_vat]}
  buyer_delivery_delivery_comission_no_vat_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [delivery_comission_no_vat]}

  buyer_delivery_approximate_provider_cost_no_vat_created:          {filter: [{is_created: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_paid:             {filter: [{is_paid: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_confirmed:        {filter: [{is_confirmed: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_canceled:         {filter: [{is_canceled: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_voided:           {filter: [{is_voided: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_unperformed:      {filter: [{is_unperformed: true}], obs: [approximate_delivery_provider_cost_no_vat]}
  buyer_delivery_approximate_provider_cost_no_vat_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [approximate_delivery_provider_cost_no_vat]}

  buyer_delivery_real_provider_cost_no_vat_performed:        {filter: [{is_performed: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_provided:         {filter: [{is_provided: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_received:         {filter: [{is_received: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_accepted:         {filter: [{is_accepted: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_return_performed: {filter: [{is_return_performed: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_return_delivered: {filter: [{is_return_delivered: true}], obs: [real_delivery_provider_cost_no_vat]}
  buyer_delivery_real_provider_cost_no_vat_returned:         {filter: [{is_returned: true}], obs: [real_delivery_provider_cost_no_vat]}

  buyer_delivery_approximate_margin_no_vat_created:          {filter: [{is_created: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_paid:             {filter: [{is_paid: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_confirmed:        {filter: [{is_confirmed: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_canceled:         {filter: [{is_canceled: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_voided:           {filter: [{is_voided: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_unperformed:      {filter: [{is_unperformed: true}], obs: [approximate_delivery_margin]}
  buyer_delivery_approximate_margin_no_vat_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [approximate_delivery_margin]}

  buyer_delivery_real_margin_no_vat_performed:        {filter: [{is_performed: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_provided:         {filter: [{is_provided: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_received:         {filter: [{is_received: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_accepted:         {filter: [{is_accepted: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_return_performed: {filter: [{is_return_performed: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_return_delivered: {filter: [{is_return_delivered: true}], obs: [real_delivery_margin]}
  buyer_delivery_real_margin_no_vat_returned:         {filter: [{is_returned: true}], obs: [real_delivery_margin]}

  buyer_delivery_seller_commission_created:          {filter: [{is_created: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_paid:             {filter: [{is_paid: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_confirmed:        {filter: [{is_confirmed: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_performed:        {filter: [{is_performed: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_provided:         {filter: [{is_provided: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_received:         {filter: [{is_received: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_accepted:         {filter: [{is_accepted: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_canceled:         {filter: [{is_canceled: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_voided:           {filter: [{is_voided: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_unperformed:      {filter: [{is_unperformed: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_return_performed: {filter: [{is_return_performed: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_return_delivered: {filter: [{is_return_delivered: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_returned:         {filter: [{is_returned: true}], obs: [seller_commission]}
  buyer_delivery_seller_commission_unconfirmed:      {filter: [{is_unconfirmed: true}], obs: [seller_commission]}

  buyer_delivery_total_payment_time:                 {filter: [{is_paid: true}], obs: [time_to_payment]}
  
  payment_conversion_paid: { filter: [ { is_finally_paid: true }, { purchase_equal_final_purchase: true }, { paylink_not_null: true }, { is_cod: false } ] } # PCR metric
  payment_conversion_created: { filter: [ { purchase_equal_final_purchase: true }, { paylink_not_null: true }, { is_cod: false } ] } # PCR
  orders_paid_paid: { filter: [ { is_paid_purchase: true }, { paylink_not_null: true } ] } # OPR
  orders_paid_created: { filter: [ { paylink_not_null: true } ] } # OPR

  buyer_delivery_items_paid_new:                     {filter: [{is_paid: true}, {is_delivery_paid_new: true}]}

metric.uniq:
  buyer_delivery_orders_created:          {counter: buyer_delivery_items_created, key: [deliveryorder_id]}
  buyer_delivery_orders_created_video:    {counter: buyer_delivery_items_created_video, key: [deliveryorder_id]}
  buyer_delivery_orders_created_no_video: {counter: buyer_delivery_items_created_no_video, key: [deliveryorder_id]}
  buyer_delivery_orders_paid:             {counter: buyer_delivery_items_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_paid_video:             {counter: buyer_delivery_items_paid_video, key: [deliveryorder_id]}
  buyer_delivery_orders_paid_no_video:             {counter: buyer_delivery_items_paid_no_video, key: [deliveryorder_id]}
  buyer_delivery_orders_confirmed:        {counter: buyer_delivery_items_confirmed, key: [deliveryorder_id]}
  buyer_delivery_orders_confirmed_video:        {counter: buyer_delivery_items_confirmed_video, key: [deliveryorder_id]}
  buyer_delivery_orders_confirmed_no_video:        {counter: buyer_delivery_items_confirmed_no_video, key: [deliveryorder_id]}
  buyer_delivery_orders_performed:        {counter: buyer_delivery_items_performed, key: [deliveryorder_id]}
  buyer_delivery_orders_provided:         {counter: buyer_delivery_items_provided, key: [deliveryorder_id]}
  buyer_delivery_orders_received:         {counter: buyer_delivery_items_received, key: [deliveryorder_id]}
  buyer_delivery_orders_accepted:         {counter: buyer_delivery_items_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_canceled:         {counter: buyer_delivery_items_canceled, key: [deliveryorder_id]}
  buyer_delivery_orders_voided:           {counter: buyer_delivery_items_voided, key: [deliveryorder_id]}
  buyer_delivery_orders_unperformed:      {counter: buyer_delivery_items_unperformed, key: [deliveryorder_id]}
  buyer_delivery_orders_return_performed: {counter: buyer_delivery_items_return_performed, key: [deliveryorder_id]}
  buyer_delivery_orders_return_delivered: {counter: buyer_delivery_items_return_delivered, key: [deliveryorder_id]}
  buyer_delivery_orders_returned:         {counter: buyer_delivery_items_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_unconfirmed:      {counter: buyer_delivery_items_unconfirmed, key: [deliveryorder_id]}
  buyer_delivery_clustered_items_created: {counter: buyer_delivery_items_created, key: [buyer_id, item_id]}
  buyer_delivery_clustered_items_paid:    {counter: buyer_delivery_items_paid, key: [buyer_id, item_id]}

  buyers_with_delivery_order_created:     {counter: buyer_delivery_items_created, key: [buyer_id]}
  buyers_with_delivery_order_created_video:     {counter: buyer_delivery_items_created_video, key: [buyer_id]}
  buyers_with_delivery_order_created_no_video:     {counter: buyer_delivery_items_created_no_video, key: [buyer_id]}

  buyers_with_delivery_order_paid:        {counter: buyer_delivery_items_paid, key: [buyer_id]}
  buyers_with_delivery_order_paid_video:        {counter: buyer_delivery_items_paid_video, key: [buyer_id]}
  buyers_with_delivery_order_paid_no_video:        {counter: buyer_delivery_items_paid_no_video, key: [buyer_id]}

  buyers_with_delivery_order_confirmed:   {counter: buyer_delivery_items_confirmed, key: [buyer_id]}
  buyers_with_delivery_order_confirmed_video:   {counter: buyer_delivery_items_confirmed_video, key: [buyer_id]}
  buyers_with_delivery_order_confirmed_no_video:   {counter: buyer_delivery_items_confirmed_no_video, key: [buyer_id]}

  buyer_delivery_purchases_created:       {counter: buyer_delivery_items_created, key: [purchase_id]} # созданные покупки
  buyer_delivery_purchases_paid:          {counter: buyer_delivery_items_paid, key: [purchase_id]} # оплаченные покупки
  buyer_delivery_purchases_canceled:      {counter: buyer_delivery_items_canceled, key: [purchase_id]} # отмененные покупки

  buyer_delivery_orders_delivery_discount_created:                        {counter: buyer_delivery_items_delivery_discount_created, key: [deliveryorder_id]} # созданные заказы со скидкой: delivery_discount > 0
  buyer_delivery_orders_delivery_discount_paid:                           {counter: buyer_delivery_items_delivery_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_delivery_discount_accepted:                       {counter: buyer_delivery_items_delivery_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_delivery_discount_returned:                       {counter: buyer_delivery_items_delivery_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_delivery_discount_accepted_and_returned:          {counter: buyer_delivery_items_delivery_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_delivery_subsidies_created:                        {counter: buyer_delivery_items_delivery_subsidies_created, key: [ deliveryorder_id ] } # созданные заказы с субсидиями: total_subsidies > 0
  buyer_delivery_orders_delivery_subsidies_paid:                           {counter: buyer_delivery_items_delivery_subsidies_paid, key: [ deliveryorder_id ] }
  buyer_delivery_orders_delivery_subsidies_accepted:                       {counter: buyer_delivery_items_delivery_subsidies_accepted, key: [ deliveryorder_id ] }
  buyer_delivery_orders_delivery_subsidies_returned:                       {counter: buyer_delivery_items_delivery_subsidies_returned, key: [ deliveryorder_id ] }
  buyer_delivery_orders_delivery_subsidies_accepted_and_returned:          {counter: buyer_delivery_items_delivery_subsidies_accepted_and_returned, key: [ deliveryorder_id ] }

  buyer_delivery_orders_threefirst_discount_created:                      {counter: buyer_delivery_items_threefirst_discount_created, key: [deliveryorder_id]} # созданные заказы со скидкой 3first: threefirst_discount > 0
  buyer_delivery_orders_threefirst_discount_paid:                         {counter: buyer_delivery_items_threefirst_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_threefirst_discount_accepted:                     {counter: buyer_delivery_items_threefirst_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_threefirst_discount_returned:                     {counter: buyer_delivery_items_threefirst_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_threefirst_discount_accepted_and_returned:        {counter: buyer_delivery_items_threefirst_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_threefirst_subsidies_created:                     { counter: buyer_delivery_items_threefirst_subsidies_created, key: [ deliveryorder_id ] } # созданные заказы с субсидией 3first: threefirst_subsidies > 0; считаю отдельно, так как есть заказы, где threefirst_discount = 0, threefirst_subsidies > 0
  buyer_delivery_orders_threefirst_subsidies_paid:                        { counter: buyer_delivery_items_threefirst_subsidies_paid, key: [ deliveryorder_id ] }
  buyer_delivery_orders_threefirst_subsidies_accepted:                    { counter: buyer_delivery_items_threefirst_subsidies_accepted, key: [ deliveryorder_id ] }
  buyer_delivery_orders_threefirst_subsidies_returned:                    { counter: buyer_delivery_items_threefirst_subsidies_returned, key: [ deliveryorder_id ] }
  buyer_delivery_orders_threefirst_subsidies_accepted_and_returned:       { counter: buyer_delivery_items_threefirst_subsidies_accepted_and_returned, key: [ deliveryorder_id ] }

  buyer_delivery_orders_bonus_discount_created:                           {counter: buyer_delivery_items_bonus_discount_created, key: [deliveryorder_id]} # созданные заказы со списанием бонусов: bonus_discount > 0
  buyer_delivery_orders_bonus_discount_paid:                              {counter: buyer_delivery_items_bonus_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_discount_accepted:                          {counter: buyer_delivery_items_bonus_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_discount_returned:                          {counter: buyer_delivery_items_bonus_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_discount_accepted_and_returned:             {counter: buyer_delivery_items_bonus_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_bonus_subsidies_created:                          {counter: buyer_delivery_items_bonus_subsidies_created, key: [ deliveryorder_id ] } # созданные заказы с субсидией bonus: bonus_subsidies > 0 ; считаю отдельно, так как есть заказы, где bonus_discount > 0, но субсидий нет
  buyer_delivery_orders_bonus_subsidies_paid:                             {counter: buyer_delivery_items_bonus_subsidies_paid, key: [ deliveryorder_id ] }
  buyer_delivery_orders_bonus_subsidies_accepted:                         {counter: buyer_delivery_items_bonus_subsidies_accepted, key: [ deliveryorder_id ] }
  buyer_delivery_orders_bonus_subsidies_returned:                         {counter: buyer_delivery_items_bonus_subsidies_returned, key: [ deliveryorder_id ] }
  buyer_delivery_orders_bonus_subsidies_accepted_and_returned:            {counter: buyer_delivery_items_bonus_subsidies_accepted_and_returned, key: [ deliveryorder_id ] }

  buyer_delivery_orders_bonus_cashback_created:                           {counter: buyer_delivery_items_bonus_cashback_created, key: [deliveryorder_id]} # созданные заказы с кэшбеком
  buyer_delivery_orders_bonus_cashback_paid:                              {counter: buyer_delivery_items_bonus_cashback_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_cashback_accepted:                          {counter: buyer_delivery_items_bonus_cashback_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_cashback_returned:                          {counter: buyer_delivery_items_bonus_cashback_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_bonus_cashback_accepted_and_returned:             {counter: buyer_delivery_items_bonus_cashback_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_promocode_discount_created:                       {counter: buyer_delivery_items_promocode_discount_created, key: [deliveryorder_id]} # созданные заказы со скидкой по промокоду
  buyer_delivery_orders_promocode_discount_paid:                          {counter: buyer_delivery_items_promocode_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_promocode_discount_accepted:                      {counter: buyer_delivery_items_promocode_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_promocode_discount_returned:                      {counter: buyer_delivery_items_promocode_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_promocode_discount_accepted_and_returned:         {counter: buyer_delivery_items_promocode_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_promocode_subsidies_created:                      { counter: buyer_delivery_items_promocode_subsidies_created, key: [ deliveryorder_id ] } # созданные заказы с субсидией по промокоду
  buyer_delivery_orders_promocode_subsidies_paid:                         { counter: buyer_delivery_items_promocode_subsidies_paid, key: [ deliveryorder_id ] }
  buyer_delivery_orders_promocode_subsidies_accepted:                     { counter: buyer_delivery_items_promocode_subsidies_accepted, key: [ deliveryorder_id ] }
  buyer_delivery_orders_promocode_subsidies_returned:                     { counter: buyer_delivery_items_promocode_subsidies_returned, key: [ deliveryorder_id ] }
  buyer_delivery_orders_promocode_subsidies_accepted_and_returned:        { counter: buyer_delivery_items_promocode_subsidies_accepted_and_returned, key: [ deliveryorder_id ] }

  buyer_delivery_orders_c2c_seller_discount_created:                      {counter: buyer_delivery_items_c2c_seller_discount_created, key: [deliveryorder_id]} # созданные заказы со скидкой от субсидирования селлером
  buyer_delivery_orders_c2c_seller_discount_paid:                         {counter: buyer_delivery_items_c2c_seller_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_c2c_seller_discount_accepted:                     {counter: buyer_delivery_items_c2c_seller_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_c2c_seller_discount_returned:                     {counter: buyer_delivery_items_c2c_seller_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_c2c_seller_discount_accepted_and_returned:        {counter: buyer_delivery_items_c2c_seller_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_exmail_discount_created:                          {counter: buyer_delivery_items_exmail_discount_created, key: [deliveryorder_id]} # созданные заказы со скидкой exmail
  buyer_delivery_orders_exmail_discount_paid:                             {counter: buyer_delivery_items_exmail_discount_paid, key: [deliveryorder_id]}
  buyer_delivery_orders_exmail_discount_accepted:                         {counter: buyer_delivery_items_exmail_discount_accepted, key: [deliveryorder_id]}
  buyer_delivery_orders_exmail_discount_returned:                         {counter: buyer_delivery_items_exmail_discount_returned, key: [deliveryorder_id]}
  buyer_delivery_orders_exmail_discount_accepted_and_returned:            {counter: buyer_delivery_items_exmail_discount_accepted_and_returned, key: [deliveryorder_id]}

  buyer_delivery_orders_exmail_subsidies_created:                         { counter: buyer_delivery_items_exmail_subsidies_created, key: [ deliveryorder_id ] } # созданные заказы с субсидией по exmail
  buyer_delivery_orders_exmail_subsidies_paid:                            { counter: buyer_delivery_items_exmail_subsidies_paid, key: [ deliveryorder_id ] }
  buyer_delivery_orders_exmail_subsidies_accepted:                        { counter: buyer_delivery_items_exmail_subsidies_accepted, key: [ deliveryorder_id ] }
  buyer_delivery_orders_exmail_subsidies_returned:                        { counter: buyer_delivery_items_exmail_subsidies_returned, key: [ deliveryorder_id ] }
  buyer_delivery_orders_exmail_subsidies_accepted_and_returned:           { counter: buyer_delivery_items_exmail_subsidies_accepted_and_returned, key: [ deliveryorder_id ] }
  
  payment_conversion_paid_uniq: { counter: payment_conversion_paid, key: [ purchase_ext ] } # PCR
  payment_conversion_created_uniq: { counter: payment_conversion_created, key: [ purchase_ext ] } # PCR
  orders_paid_paid_uniq: { counter: orders_paid_paid, key: [ purchase_ext ] } # OPR
  orders_paid_created_uniq: { counter: orders_paid_created, key: [ purchase_ext ] } # OPR

  buyer_delivery_orders_paid_new:                                         { counter: buyer_delivery_items_paid_new, key: [ deliveryorder_id ] }
  buyers_with_delivery_orders_paid_new:                                   { counter: buyer_delivery_items_paid_new, key: [ buyer_id ] }

metric.ratio:
  buyer_delivery_average_item_price_created: {num: buyer_delivery_gmv_created, den: buyer_delivery_items_created}
  buyer_delivery_average_item_price_paid: {num: buyer_delivery_gmv_paid, den: buyer_delivery_items_paid}
  buyer_delivery_average_item_price_paid_video: {num: buyer_delivery_gmv_paid_video, den: buyer_delivery_items_paid_video}
  buyer_delivery_average_item_price_paid_no_video: {num: buyer_delivery_gmv_paid_no_video, den: buyer_delivery_items_paid_no_video}
  buyer_delivery_average_item_price_confirmed: {num: buyer_delivery_gmv_confirmed, den: buyer_delivery_items_confirmed}
  buyer_delivery_average_item_price_confirmed_video: {num: buyer_delivery_gmv_confirmed_video, den: buyer_delivery_items_confirmed_video}
  buyer_delivery_average_item_price_confirmed_no_video: {num: buyer_delivery_gmv_confirmed_no_video, den: buyer_delivery_items_confirmed_no_video}
  buyer_delivery_average_item_price_performed: {num: buyer_delivery_gmv_performed, den: buyer_delivery_items_performed}
  buyer_delivery_average_item_price_provided: {num: buyer_delivery_gmv_provided, den: buyer_delivery_items_provided}
  buyer_delivery_average_item_price_received: {num: buyer_delivery_gmv_received, den: buyer_delivery_items_received}
  buyer_delivery_average_item_price_accepted: {num: buyer_delivery_gmv_accepted, den: buyer_delivery_items_accepted}
  buyer_delivery_average_item_price_canceled: {num: buyer_delivery_gmv_canceled, den: buyer_delivery_items_canceled}
  buyer_delivery_average_item_price_voided: {num: buyer_delivery_gmv_voided, den: buyer_delivery_items_voided}
  buyer_delivery_average_item_price_unperformed: {num: buyer_delivery_gmv_unperformed, den: buyer_delivery_items_unperformed}
  buyer_delivery_average_item_price_return_performed: {num: buyer_delivery_gmv_return_performed, den: buyer_delivery_items_return_performed}
  buyer_delivery_average_item_price_return_delivered: {num: buyer_delivery_gmv_return_delivered, den: buyer_delivery_items_return_delivered}
  buyer_delivery_average_item_price_returned: {num: buyer_delivery_gmv_returned, den: buyer_delivery_items_returned}
  buyer_delivery_average_item_price_unconfirmed: {num: buyer_delivery_gmv_unconfirmed, den: buyer_delivery_items_unconfirmed}

  buyer_delivery_average_total_revenue_no_vat_paid: {num: buyer_delivery_total_revenue_no_vat_paid, den: buyer_delivery_orders_paid}
  buyer_delivery_average_total_revenue_no_vat_performed: {num: buyer_delivery_total_revenue_no_vat_performed, den: buyer_delivery_orders_performed}
  buyer_delivery_average_total_revenue_no_vat_accepted: {num: buyer_delivery_total_revenue_no_vat_accepted, den: buyer_delivery_orders_accepted}

  buyer_delivery_average_revenue_no_vat_created: {num: buyer_delivery_revenue_no_vat_created, den: buyer_delivery_orders_created}
  buyer_delivery_average_revenue_no_vat_paid: {num: buyer_delivery_revenue_no_vat_paid, den: buyer_delivery_orders_paid}
  buyer_delivery_average_revenue_no_vat_paid_video: {num: buyer_delivery_revenue_no_vat_paid_video, den: buyer_delivery_orders_paid_video}
  buyer_delivery_average_revenue_no_vat_paid_no_video: {num: buyer_delivery_revenue_no_vat_paid_no_video, den: buyer_delivery_orders_paid_no_video}
  buyer_delivery_average_revenue_no_vat_confirmed: {num: buyer_delivery_revenue_no_vat_confirmed, den: buyer_delivery_orders_confirmed}
  buyer_delivery_average_revenue_no_vat_confirmed_video: {num: buyer_delivery_revenue_no_vat_confirmed_video, den: buyer_delivery_orders_confirmed_video}
  buyer_delivery_average_revenue_no_vat_confirmed_no_video: {num: buyer_delivery_revenue_no_vat_confirmed_no_video, den: buyer_delivery_orders_confirmed_no_video}
  buyer_delivery_average_revenue_no_vat_performed: {num: buyer_delivery_revenue_no_vat_performed, den: buyer_delivery_orders_performed}
  buyer_delivery_average_revenue_no_vat_provided: {num: buyer_delivery_revenue_no_vat_provided, den: buyer_delivery_orders_provided}
  buyer_delivery_average_revenue_no_vat_received: {num: buyer_delivery_revenue_no_vat_received, den: buyer_delivery_orders_received}
  buyer_delivery_average_revenue_no_vat_accepted: {num: buyer_delivery_revenue_no_vat_accepted, den: buyer_delivery_orders_accepted}
  buyer_delivery_average_revenue_no_vat_canceled: {num: buyer_delivery_revenue_no_vat_canceled, den: buyer_delivery_orders_canceled}
  buyer_delivery_average_revenue_no_vat_voided: {num: buyer_delivery_revenue_no_vat_voided, den: buyer_delivery_orders_voided}
  buyer_delivery_average_revenue_no_vat_unperformed: {num: buyer_delivery_revenue_no_vat_unperformed, den: buyer_delivery_orders_unperformed}
  buyer_delivery_average_revenue_no_vat_return_performed: {num: buyer_delivery_revenue_no_vat_return_performed, den: buyer_delivery_orders_return_performed}
  buyer_delivery_average_revenue_no_vat_return_delivered: {num: buyer_delivery_revenue_no_vat_return_delivered, den: buyer_delivery_orders_return_delivered}
  buyer_delivery_average_revenue_no_vat_returned: {num: buyer_delivery_revenue_no_vat_returned, den: buyer_delivery_orders_returned}
  buyer_delivery_average_revenue_no_vat_unconfirmed: {num: buyer_delivery_revenue_no_vat_unconfirmed, den: buyer_delivery_orders_unconfirmed}

  buyer_delivery_avg_delivery_subsidies_created: {num: buyer_delivery_subsidies_created, den: buyer_delivery_orders_delivery_subsidies_created}
  buyer_delivery_avg_delivery_subsidies_paid: {num: buyer_delivery_subsidies_paid, den: buyer_delivery_orders_delivery_subsidies_paid}
  buyer_delivery_avg_delivery_subsidies_accepted: {num: buyer_delivery_subsidies_accepted, den: buyer_delivery_orders_delivery_subsidies_accepted}
  buyer_delivery_avg_delivery_subsidies_returned: {num: buyer_delivery_subsidies_returned, den: buyer_delivery_orders_delivery_subsidies_returned}
  buyer_delivery_avg_delivery_subsidies_accepted_and_returned: {num: buyer_delivery_subsidies_accepted_and_returned, den: buyer_delivery_orders_delivery_subsidies_accepted_and_returned}

  buyer_delivery_avg_threefirst_subsidies_created: {num: buyer_threefirst_subsidies_created, den: buyer_delivery_orders_threefirst_subsidies_created}
  buyer_delivery_avg_threefirst_subsidies_paid: {num: buyer_threefirst_subsidies_paid, den: buyer_delivery_orders_threefirst_subsidies_paid}
  buyer_delivery_avg_threefirst_subsidies_accepted: {num: buyer_threefirst_subsidies_accepted, den: buyer_delivery_orders_threefirst_subsidies_accepted}
  buyer_delivery_avg_threefirst_subsidies_returned: {num: buyer_threefirst_subsidies_returned, den: buyer_delivery_orders_threefirst_subsidies_returned}
  buyer_delivery_avg_threefirst_subsidies_accepted_and_returned: {num: buyer_threefirst_subsidies_accepted_and_returned, den: buyer_delivery_orders_threefirst_subsidies_accepted_and_returned}

  buyer_delivery_avg_bonus_subsidies_created: {num: buyer_bonus_subsidies_created, den: buyer_delivery_orders_bonus_subsidies_created}
  buyer_delivery_avg_bonus_subsidies_paid: {num: buyer_bonus_subsidies_paid, den: buyer_delivery_orders_bonus_subsidies_paid}
  buyer_delivery_avg_bonus_subsidies_accepted: {num: buyer_bonus_subsidies_accepted, den: buyer_delivery_orders_bonus_subsidies_accepted}
  buyer_delivery_avg_bonus_subsidies_returned: {num: buyer_bonus_subsidies_returned, den: buyer_delivery_orders_bonus_subsidies_returned}
  buyer_delivery_avg_bonus_subsidies_accepted_and_returned: {num: buyer_bonus_subsidies_accepted_and_returned, den: buyer_delivery_orders_bonus_subsidies_accepted_and_returned}

  buyer_delivery_avg_promocode_subsidies_created: {num: buyer_promocode_subsidies_created, den: buyer_delivery_orders_promocode_subsidies_created}
  buyer_delivery_avg_promocode_subsidies_paid: {num: buyer_promocode_subsidies_paid, den: buyer_delivery_orders_promocode_subsidies_paid}
  buyer_delivery_avg_promocode_subsidies_accepted: {num: buyer_promocode_subsidies_accepted, den: buyer_delivery_orders_promocode_subsidies_accepted}
  buyer_delivery_avg_promocode_subsidies_returned: {num: buyer_promocode_subsidies_returned, den: buyer_delivery_orders_promocode_subsidies_returned}
  buyer_delivery_avg_promocode_subsidies_accepted_and_returned: {num: buyer_promocode_subsidies_accepted_and_returned, den: buyer_delivery_orders_promocode_subsidies_accepted_and_returned}

  buyer_delivery_avg_exmail_subsidies_created: {num: buyer_exmail_subsidies_created, den: buyer_delivery_orders_exmail_subsidies_created}
  buyer_delivery_avg_exmail_subsidies_paid: {num: buyer_exmail_subsidies_paid, den: buyer_delivery_orders_exmail_subsidies_paid}
  buyer_delivery_avg_exmail_subsidies_accepted: {num: buyer_exmail_subsidies_accepted, den: buyer_delivery_orders_exmail_subsidies_accepted}
  buyer_delivery_avg_exmail_subsidies_returned: {num: buyer_exmail_subsidies_returned, den: buyer_delivery_orders_exmail_subsidies_returned}
  buyer_delivery_avg_exmail_subsidies_accepted_and_returned: {num: buyer_exmail_subsidies_accepted_and_returned, den: buyer_delivery_orders_exmail_subsidies_accepted_and_returned}

  buyer_delivery_threefirst_subs_saved_ratio_created: { num: buyer_threefirst_subsidies_saved_created, den: buyer_total_threefirst_subsidies_created }
  buyer_delivery_threefirst_subs_saved_ratio_paid: { num: buyer_threefirst_subsidies_saved_paid, den: buyer_total_threefirst_subsidies_paid }
  buyer_delivery_threefirst_subs_saved_ratio_accepted: { num: buyer_threefirst_subsidies_saved_accepted, den: buyer_total_threefirst_subsidies_accepted }
  buyer_delivery_threefirst_subs_saved_ratio_returned: { num: buyer_threefirst_subsidies_saved_returned, den: buyer_total_threefirst_subsidies_returned }
  buyer_delivery_threefirst_subs_saved_ratio_accepted_and_returned: { num: buyer_threefirst_subsidies_saved_accepted_and_returned, den: buyer_total_threefirst_subsidies_accepted_and_returned }

  buyer_delivery_exmail_subs_saved_ratio_created: { num: buyer_exmail_subsidies_saved_created, den: buyer_total_exmail_subsidies_created }
  buyer_delivery_exmail_subs_saved_ratio_paid: { num: buyer_exmail_subsidies_saved_paid, den: buyer_total_exmail_subsidies_paid }
  buyer_delivery_exmail_subs_saved_ratio_accepted: { num: buyer_exmail_subsidies_saved_accepted, den: buyer_total_exmail_subsidies_accepted }
  buyer_delivery_exmail_subs_saved_ratio_returned: { num: buyer_exmail_subsidies_saved_returned, den: buyer_total_exmail_subsidies_returned }
  buyer_delivery_exmail_subs_saved_ratio_accepted_and_returned: { num: buyer_exmail_subsidies_saved_accepted_and_returned, den: buyer_total_exmail_subsidies_accepted_and_returned }

  buyer_delivery_promocode_subs_saved_ratio_created: { num: buyer_promocode_subsidies_saved_created, den: buyer_total_promocode_subsidies_wo_tax_created }
  buyer_delivery_promocode_subs_saved_ratio_paid: { num: buyer_promocode_subsidies_saved_paid, den: buyer_total_promocode_subsidies_wo_tax_paid }
  buyer_delivery_promocode_subs_saved_ratio_accepted: { num: buyer_promocode_subsidies_saved_accepted, den: buyer_total_promocode_subsidies_wo_tax_accepted }
  buyer_delivery_promocode_subs_saved_ratio_returned: { num: buyer_promocode_subsidies_saved_returned, den: buyer_total_promocode_subsidies_wo_tax_returned }
  buyer_delivery_promocode_subs_saved_ratio_accepted_and_returned: { num: buyer_promocode_subsidies_saved_accepted_and_returned, den: buyer_total_promocode_subsidies_wo_tax_accepted_and_returned }

  buyer_delivery_subs_saved_ratio_created: { num: buyer_delivery_subsidies_saved_created, den: buyer_delivery_subsidies_saving_available_created }
  buyer_delivery_subs_saved_ratio_paid: { num: buyer_delivery_subsidies_saved_paid, den: buyer_delivery_subsidies_saving_available_paid }
  buyer_delivery_subs_saved_ratio_accepted: { num: buyer_delivery_subsidies_saved_accepted, den: buyer_delivery_subsidies_saving_available_accepted }
  buyer_delivery_subs_saved_ratio_returned: { num: buyer_delivery_subsidies_saved_returned, den: buyer_delivery_subsidies_saving_available_returned }
  buyer_delivery_subs_saved_ratio_accepted_and_returned: { num: buyer_delivery_subsidies_saved_accepted_and_returned, den: buyer_delivery_subsidies_saving_available_accepted_and_returned }

  buyer_delivery_create_paid_orders_ratio: {num: buyer_delivery_orders_paid, den: buyer_delivery_orders_created}
  buyer_delivery_create_paid_items_ratio: {num: buyer_delivery_items_paid, den: buyer_delivery_items_created}
  buyer_delivery_clustered_create_paid_items_ratio: {num: buyer_delivery_clustered_items_paid, den: buyer_delivery_clustered_items_created}
  buyers_with_delivery_created_paid_uniq_ratio : {num: buyers_with_delivery_order_paid, den: buyers_with_delivery_order_created}

  buyer_delivery_orders_received_per_provided: {num: buyer_delivery_orders_received, den: buyer_delivery_orders_provided}

  buyer_delivery_create_paid_purchases_ratio:       {num: buyer_delivery_purchases_paid, den: buyer_delivery_purchases_created} # доля оплат среди созданных
  buyer_delivery_paid_canceled_purchases_ratio:     {num: buyer_delivery_purchases_canceled, den: buyer_delivery_purchases_paid} # доля отмен среди оплат

  buyer_delivery_average_purchase_price_paid:       {num: buyer_delivery_gmv_paid, den: buyer_delivery_purchases_paid} # средняя стоимость покупки
  buyer_delivery_purchase_avg_paid_items:           {num: buyer_delivery_items_paid, den: buyer_delivery_purchases_paid} # среднее количество айтемов в покупке 

  buyer_delivery_average_payment_time:              {num: buyer_delivery_total_payment_time, den: buyer_delivery_items_paid}
  
  orders_paid_ratio: { num: orders_paid_paid_uniq, den: orders_paid_created_uniq } # OPR
  payment_conversion_rate: { num: payment_conversion_paid_uniq, den: payment_conversion_created_uniq } #PCR
   
